(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function A(){}const Le=t=>t;function ze(t,e){for(const n in e)t[n]=e[n];return t}function Dt(t){return t()}function dt(){return Object.create(null)}function z(t){t.forEach(Dt)}function de(t){return typeof t=="function"}function F(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function fn(t){return Object.keys(t).length===0}function tt(t,...e){if(t==null)return A;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function D(t,e,n){t.$$.on_destroy.push(tt(e,n))}function dn(t,e,n,o){if(t){const s=Kt(t,e,n,o);return t[0](s)}}function Kt(t,e,n,o){return t[1]&&o?ze(n.ctx.slice(),t[1](o(e))):n.ctx}function pn(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],l=Math.max(e.dirty.length,s.length);for(let r=0;r<l;r+=1)i[r]=e.dirty[r]|s[r];return i}return e.dirty|s}return e.dirty}function _n(t,e,n,o,s,i){if(s){const l=Kt(e,n,o,i);t.p(l,s)}}function hn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function pt(t){return t??""}function pe(t,e,n){return t.set(n),e}const Wt=typeof window<"u";let Fe=Wt?()=>window.performance.now():()=>Date.now(),nt=Wt?t=>requestAnimationFrame(t):A;const ke=new Set;function qt(t){ke.forEach(e=>{e.c(t)||(ke.delete(e),e.f())}),ke.size!==0&&nt(qt)}function He(t){let e;return ke.size===0&&nt(qt),{promise:new Promise(n=>{ke.add(e={c:t,f:n})}),abort(){ke.delete(e)}}}function w(t,e){t.appendChild(e)}function Ft(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function gn(t){const e=v("style");return mn(Ft(t),e),e.sheet}function mn(t,e){return w(t.head||t,e),e.sheet}function $(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function ot(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function Y(t){return document.createTextNode(t)}function O(){return Y(" ")}function le(){return Y("")}function R(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function K(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yn(t){return Array.from(t.childNodes)}function Re(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function fe(t,e){t.value=e??""}function te(t,e,n){t.classList[n?"add":"remove"](e)}function Ht(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}const De=new Map;let Ke=0;function bn(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function wn(t,e){const n={stylesheet:gn(e),rules:{}};return De.set(t,n),n}function Oe(t,e,n,o,s,i,l,r=0){const a=16.666/o;let c=`{
`;for(let d=0;d<=1;d+=a){const h=e+(n-e)*i(d);c+=d*100+`%{${l(h,1-h)}}
`}const f=c+`100% {${l(n,1-n)}}
}`,u=`__svelte_${bn(f)}_${r}`,g=Ft(t),{stylesheet:m,rules:p}=De.get(g)||wn(g,t);p[u]||(p[u]=!0,m.insertRule(`@keyframes ${u} ${f}`,m.cssRules.length));const _=t.style.animation||"";return t.style.animation=`${_?`${_}, `:""}${u} ${o}ms linear ${s}ms 1 both`,Ke+=1,u}function Ae(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-o.length;s&&(t.style.animation=o.join(", "),Ke-=s,Ke||vn())}function vn(){nt(()=>{Ke||(De.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&b(e)}),De.clear())})}function Vt(t,e,n,o){if(!e)return A;const s=t.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return A;const{delay:i=0,duration:l=300,easing:r=Le,start:a=Fe()+i,end:c=a+l,tick:f=A,css:u}=n(t,{from:e,to:s},o);let g=!0,m=!1,p;function _(){u&&(p=Oe(t,0,1,l,i,r,u)),i||(m=!0)}function d(){u&&Ae(t,p),g=!1}return He(h=>{if(!m&&h>=a&&(m=!0),m&&h>=c&&(f(1,0),d()),!g)return!1;if(m){const C=h-a,S=0+1*r(C/l);f(S,1-S)}return!0}),_(),f(0,1),d}function Gt(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:o}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=o,st(t,s)}}function st(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const o=getComputedStyle(t),s=o.transform==="none"?"":o.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let Ne;function Ce(t){Ne=t}function rt(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function kn(t){rt().$$.on_mount.push(t)}function $n(t){rt().$$.on_destroy.push(t)}function zt(){const t=rt();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=Ht(e,n,{cancelable:o});return s.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}const we=[],We=[];let $e=[];const Je=[],Tn=Promise.resolve();let Ye=!1;function Sn(){Ye||(Ye=!0,Tn.then(Jt))}function H(t){$e.push(t)}function En(t){Je.push(t)}const Ge=new Set;let ye=0;function Jt(){if(ye!==0)return;const t=Ne;do{try{for(;ye<we.length;){const e=we[ye];ye++,Ce(e),Cn(e.$$)}}catch(e){throw we.length=0,ye=0,e}for(Ce(null),we.length=0,ye=0;We.length;)We.pop()();for(let e=0;e<$e.length;e+=1){const n=$e[e];Ge.has(n)||(Ge.add(n),n())}$e.length=0}while(we.length);for(;Je.length;)Je.pop()();Ye=!1,Ge.clear(),Ce(t)}function Cn(t){if(t.fragment!==null){t.update(),z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}function On(t){const e=[],n=[];$e.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),$e=e}let Ee;function it(){return Ee||(Ee=Promise.resolve(),Ee.then(()=>{Ee=null})),Ee}function _e(t,e,n){t.dispatchEvent(Ht(`${e?"intro":"outro"}${n}`))}const Me=new Set;let ne;function W(){ne={r:0,c:[],p:ne}}function q(){ne.r||z(ne.c),ne=ne.p}function k(t,e){t&&t.i&&(Me.delete(t),t.i(e))}function E(t,e,n,o){if(t&&t.o){if(Me.has(t))return;Me.add(t),ne.c.push(()=>{Me.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const lt={duration:0};function at(t,e,n){const o={direction:"in"};let s=e(t,n,o),i=!1,l,r,a=0;function c(){l&&Ae(t,l)}function f(){const{delay:g=0,duration:m=300,easing:p=Le,tick:_=A,css:d}=s||lt;d&&(l=Oe(t,0,1,m,g,p,d,a++)),_(0,1);const h=Fe()+g,C=h+m;r&&r.abort(),i=!0,H(()=>_e(t,!0,"start")),r=He(S=>{if(i){if(S>=C)return _(1,0),_e(t,!0,"end"),c(),i=!1;if(S>=h){const T=p((S-h)/m);_(T,1-T)}}return i})}let u=!1;return{start(){u||(u=!0,Ae(t),de(s)?(s=s(o),it().then(f)):f())},invalidate(){u=!1},end(){i&&(c(),i=!1)}}}function ct(t,e,n){const o={direction:"out"};let s=e(t,n,o),i=!0,l;const r=ne;r.r+=1;function a(){const{delay:c=0,duration:f=300,easing:u=Le,tick:g=A,css:m}=s||lt;m&&(l=Oe(t,1,0,f,c,u,m));const p=Fe()+c,_=p+f;H(()=>_e(t,!1,"start")),He(d=>{if(i){if(d>=_)return g(0,1),_e(t,!1,"end"),--r.r||z(r.c),!1;if(d>=p){const h=u((d-p)/f);g(1-h,h)}}return i})}return de(s)?it().then(()=>{s=s(o),a()}):a(),{end(c){c&&s.tick&&s.tick(1,0),i&&(l&&Ae(t,l),i=!1)}}}function se(t,e,n,o){const s={direction:"both"};let i=e(t,n,s),l=o?0:1,r=null,a=null,c=null;function f(){c&&Ae(t,c)}function u(m,p){const _=m.b-l;return p*=Math.abs(_),{a:l,b:m.b,d:_,duration:p,start:m.start,end:m.start+p,group:m.group}}function g(m){const{delay:p=0,duration:_=300,easing:d=Le,tick:h=A,css:C}=i||lt,S={start:Fe()+p,b:m};m||(S.group=ne,ne.r+=1),r||a?a=S:(C&&(f(),c=Oe(t,l,m,_,p,d,C)),m&&h(0,1),r=u(S,_),H(()=>_e(t,m,"start")),He(T=>{if(a&&T>a.start&&(r=u(a,_),a=null,_e(t,r.b,"start"),C&&(f(),c=Oe(t,l,r.b,r.duration,0,d,i.css))),r){if(T>=r.end)h(l=r.b,1-l),_e(t,r.b,"end"),a||(r.b?f():--r.group.r||z(r.group.c)),r=null;else if(T>=r.start){const N=T-r.start;l=r.a+r.d*d(N/r.duration),h(l,1-l)}}return!!(r||a)}))}return{run(m){de(i)?it().then(()=>{i=i(s),g(m)}):g(m)},end(){f(),r=a=null}}}function Yt(t,e){E(t,1,1,()=>{e.delete(t.key)})}function _t(t,e){t.f(),Yt(t,e)}function Qe(t,e,n,o,s,i,l,r,a,c,f,u){let g=t.length,m=i.length,p=g;const _={};for(;p--;)_[t[p].key]=p;const d=[],h=new Map,C=new Map,S=[];for(p=m;p--;){const P=u(s,i,p),U=n(P);let L=l.get(U);L?o&&S.push(()=>L.p(P,e)):(L=c(U,P),L.c()),h.set(U,d[p]=L),U in _&&C.set(U,Math.abs(p-_[U]))}const T=new Set,N=new Set;function j(P){k(P,1),P.m(r,f),l.set(P.key,P),f=P.first,m--}for(;g&&m;){const P=d[m-1],U=t[g-1],L=P.key,Z=U.key;P===U?(f=P.first,g--,m--):h.has(Z)?!l.has(L)||T.has(L)?j(P):N.has(Z)?g--:C.get(L)>C.get(Z)?(N.add(L),j(P)):(T.add(Z),g--):(a(U,l),g--)}for(;g--;){const P=t[g];h.has(P.key)||a(P,l)}for(;m;)j(d[m-1]);return z(S),d}function An(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function I(t){t&&t.c()}function B(t,e,n,o){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),o||H(()=>{const l=t.$$.on_mount.map(Dt).filter(de);t.$$.on_destroy?t.$$.on_destroy.push(...l):z(l),t.$$.on_mount=[]}),i.forEach(H)}function M(t,e){const n=t.$$;n.fragment!==null&&(On(n.after_update),z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Nn(t,e){t.$$.dirty[0]===-1&&(we.push(t),Sn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,o,s,i,l,r=[-1]){const a=Ne;Ce(t);const c=t.$$={fragment:null,ctx:[],props:i,update:A,not_equal:s,bound:dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:dt(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};l&&l(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(u,g,...m)=>{const p=m.length?m[0]:g;return c.ctx&&s(c.ctx[u],c.ctx[u]=p)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](p),f&&Nn(t,u)),g}):[],c.update(),f=!0,z(c.before_update),c.fragment=o?o(c.ctx):!1,e.target){if(e.hydrate){const u=yn(e.target);c.fragment&&c.fragment.l(u),u.forEach(b)}else c.fragment&&c.fragment.c();e.intro&&k(t.$$.fragment),B(t,e.target,e.anchor,e.customElement),Jt()}Ce(a)}class G{$destroy(){M(this,1),this.$destroy=A}$on(e,n){if(!de(n))return A;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!fn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}window.addEventListener("load",()=>{const t=document.createElement("div");t.style.overflow="scroll",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const n=t.offsetWidth-e.offsetWidth;console.log("Scrollbars",n),t.parentNode.removeChild(t);const o=document.querySelector(".noscrollbars");o&&o.style.setProperty("--scrollbarwidth",n+"px")});function jn(t){let e,n;return{c(){e=v("option"),e.__value=n=t[1].value,e.value=e.__value},m(o,s){$(o,e,s)},p(o,[s]){s&2&&n!==(n=o[1].value)&&(e.__value=n,e.value=e.__value)},i:A,o:A,d(o){o&&b(e)}}}function Pn(t,e,n){let o,s=A,i=()=>(s(),s=tt(l,r=>n(1,o=r)),l);t.$$.on_destroy.push(()=>s());let{tagstore:l}=e;return i(),t.$$set=r=>{"tagstore"in r&&i(n(0,l=r.tagstore))},[l,o]}class Ln extends G{constructor(e){super(),V(this,e,Pn,jn,F,{tagstore:0})}}const Se=new Promise((t,e)=>{if(window?.Dexie){const n=new window.Dexie("helloworldtodos",{});n.version(2).stores({tags:"&key",todos:"++id,*tags"}),t(n)}else e(new Error("Dexie is not loaded in window"))}),be=[];function me(t,e=A){let n;const o=new Set;function s(r){if(F(t,r)&&(t=r,n)){const a=!be.length;for(const c of o)c[1](),be.push(c,t);if(a){for(let c=0;c<be.length;c+=2)be[c][0](be[c+1]);be.length=0}}}function i(r){s(r(t))}function l(r,a=A){const c=[r,a];return o.add(c),o.size===1&&(n=e(s)||A),r(t),()=>{o.delete(c),o.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:l}}class Rn{_obj;subscribe;parset;constructor(e,n){const{subscribe:o,set:s}=me(e,n);this.subscribe=o,this.parset=s,this._obj=e}set(e){this._obj=e,this.parset(e)}get object(){return this._obj}set object(e){this.set(e)}update(e){const n=e(this._obj);this.set(n)}}function Qt(t,e=!1){return e?crypto.subtle.digest("SHA-256",new TextEncoder().encode(t)).then(n=>{const o=new Uint8Array(n);let s="";for(let i=0;i<o.length;i++)s+=o[i].toString(16).padStart(2,"0");return s}):crypto.subtle.digest("SHA-256",new TextEncoder().encode(t))}function Bn(t){return crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"])}function Mn(){return crypto.randomUUID()}class re{data;iv;static fromBase64(e){return re.fromUint8Array(new Uint8Array(Zt(e||"")))}static fromUint8Array(e){if(e.length<32)throw new Error("the given array does not seem to contain encrypted data (min length: 32)");const n=new Uint8Array(16),o=new Uint8Array(e.length-16);for(let s=0;s<16;s++)n[s]=e[s];for(let s=16,i=0;s<e.length;s++,i++)o[i]=e[s];return new re({iv:n,data:o})}constructor(e){this.data=e.data,this.iv=e.iv}toUint8Array(){const e=this.iv.length,n=this.data.length,o=new Uint8Array(e+n);for(let s=0;s<e;s++)o[s]=this.iv[s];for(let s=0,i=e;s<n;s++,i++)o[i]=this.data[s];return o}toBase64(){return Xt(this.toUint8Array())}}function Ve(t){return Qt(t).then(e=>Bn(e))}async function Un(t,e){const n=e instanceof CryptoKey?e:await Ve(e),o=new Uint8Array(16);return await crypto.getRandomValues(o),new re({iv:o,data:new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",length:2048,iv:o},n,t))})}async function In(t,e){if(!t)return;const n=e instanceof CryptoKey?e:await Ve(e);return await crypto.subtle.decrypt({name:"AES-GCM",length:2048,iv:t.iv},n,t.data)}function Xt(t){if(typeof Buffer<"u")return Buffer.from(t).toString("base64");{let e="";const n=new Uint8Array(t),o=n.byteLength;for(let s=0;s<o;s++)e+=String.fromCharCode(n[s]);return btoa(e)}}function Zt(t){if(typeof Buffer<"u")return Buffer.from(t,"base64");{const e=atob(t),n=e.length,o=new Uint8Array(n);for(let s=0;s<n;s++)o[s]=e.charCodeAt(s);return o.buffer}}const Q={sha256:Qt,uuid:Mn,password2CryptoKey:Ve,synckey:{encrypt:Un,decrypt:In},base64:{encrypt:Xt,decrypt:Zt}},x=me(),Te=me(localStorage.getItem("haslock")!=null),J=await Se,Ue=1,Dn=await Q.sha256("",!0);let xt=localStorage.getItem("haslock")!=null;Te.subscribe(t=>xt=t);let je;class ae extends Error{static EMPTY_TAG_KEY="the given value resulted in an empty tag-key";static NO_TAG_FOR_KEY="a tag for the given Key or Value does not exist in the Database";static INVALID_CONSTRUCT="construct must be provided with either 'key' or 'value'";static NEEDS_UNLOCK="You need to unlock the app with your set password first."}class he{key;value;color;version;data;static async createNew(e,n="#73828c"){const o=await Q.sha256(tn(e),!0);return new he({value:e,key:o,color:n,version:Ue})}constructor(e){if(!e.key||!e.key.trim().length||e.key.trim()==Dn)throw new ae(ae.EMPTY_TAG_KEY);this.key=e.key,e.data?(this.data=e.data,this.value="*******"):(this.value=e.value||"corrupted tag",this.color=e.color||"#73828c",this.version=e.version||0)}async drop(){await J.tags.delete(this.key);const e=[];await J.todos.where("tags").equals(this.key).each(n=>{n.tags=n.tags.filter(o=>o!=this.key),e.push(n)}),await J.todos.bulkPut(e),qe.refresh()}async insert(){let e={};return je?e={key:this.key,data:await Xe(je,this),value:"*******"}:e={key:this.key,value:this.value,color:this.color,version:this.version},J.tags.put(e).then(()=>qe.refresh())}async unlock(e){if(console.log("unlock tag"),this.data){const n=JSON.parse(new TextDecoder().decode(await Q.synckey.decrypt(re.fromBase64(this.data),e)));this.value=n.value,this.color=n.color,this.version=n.version}return this}async lock(){return console.log("lock tag"),this.data&&xt&&(this.value="*******",delete this.color,delete this.version),this}}class Kn extends Rn{constructor(e){super(e,()=>(ge.set(e.key,this),()=>ge.delete(e.key))),je&&this.object.unlock(je).then(()=>this.notifiySubscribers())}notifiySubscribers(){this.set(this.object)}}const ge=new Map;function ut(t){const e=new he(t);return ge.has(e.key)?ge.get(e.key):new Kn(e)}function en(t){return J.tags.where("key").equals(t).first().then(e=>{if(e)return ut(e);throw console.log(t),new ae(ae.NO_TAG_FOR_KEY)})}function Wn(t){return Q.sha256(tn(t),!0).then(e=>en(e)).catch(e=>{throw console.error("for value",t),e})}async function qn(t,e=void 0){let n=[];t&&e?await J.tags.each(async o=>{const s=JSON.parse(new TextDecoder().decode(await Q.synckey.decrypt(re.fromBase64(o.data),e))),i=await Xe(t,s);n.push({key:o.key,value:"*******",data:i})}):t?await J.tags.each(async o=>{if(o.data)throw new Error("tag already encrypted");const s=await Xe(t,o);n.push({key:o.key,value:"*******",data:s})}):e&&await J.tags.each(async o=>{const s=JSON.parse(new TextDecoder().decode(await Q.synckey.decrypt(re.fromBase64(o.data),e)));n.push({key:o.key,value:s.value,color:s.color,version:s.version})}),n.length&&await J.tags.bulkPut(n),n.forEach(o=>{let s=ge.get(o.key);s&&(s.object=new he(o))})}class Fn{subs=new Set;subscribe(e){return console.log("new sub",e),this.subs.add(e),e([]),this._dat().then(e),()=>{console.log("unsub",e),this.subs.delete(e)}}async refresh(){const e=await this._dat();this.subs.forEach(n=>n(e))}_dat(){return Hn().then(e=>e.toArray()).then(e=>e.map(n=>ut(n)))}}const qe=new Fn,ue={getTagStore:ut,tagsstore:qe,findByKey:en,findByValue:Wn,encryptAll:qn};async function Hn(){return(await Se).tags}function tn(t){return(t||"").trim().toLowerCase()}async function Xe(t,e){return(await Q.synckey.encrypt(new TextEncoder().encode(JSON.stringify({value:e.value,color:e.color,version:e.version})),t)).toBase64()}await Promise.all((await J.tags.toArray()).map(async t=>{const e=new he(t);switch(e.version){case Ue:default:break;case 0:const n=new he(t),o=await Q.sha256(e.key,!0),s=e.key;console.log("update key: ",s,o);let i=await J.todos.where("tags").anyOf(s).distinct().toArray();i=i.map(l=>(l.tags=l.tags.map(r=>r==s?o:r),l)),await J.todos.bulkPut(i),await n.drop(),e.key=o;case 99999999999999:console.log("tag update: ",e.version,"=>",Ue),e.version=Ue,await e.insert()}}));x.subscribe(t=>{je=t,t?ge.forEach(async e=>{e.object=await e.object.unlock(t)}):ge.forEach(async e=>{e.object=await e.object.lock()})});function ht(t,e,n){const o=t.slice();return o[1]=e[n],o}function gt(t){let e,n;return e=new Ln({props:{tagstore:t[1]}}),{c(){I(e.$$.fragment)},m(o,s){B(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.tagstore=o[1]),e.$set(i)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){M(e,o)}}}function Vn(t){let e,n,o=t[0],s=[];for(let l=0;l<o.length;l+=1)s[l]=gt(ht(t,o,l));const i=l=>E(s[l],1,1,()=>{s[l]=null});return{c(){e=v("datalist");for(let l=0;l<s.length;l+=1)s[l].c();y(e,"id","available_tags")},m(l,r){$(l,e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);n=!0},p(l,[r]){if(r&1){o=l[0];let a;for(a=0;a<o.length;a+=1){const c=ht(l,o,a);s[a]?(s[a].p(c,r),k(s[a],1)):(s[a]=gt(c),s[a].c(),k(s[a],1),s[a].m(e,null))}for(W(),a=o.length;a<s.length;a+=1)i(a);q()}},i(l){if(!n){for(let r=0;r<o.length;r+=1)k(s[r]);n=!0}},o(l){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)E(s[r]);n=!1},d(l){l&&b(e),ot(s,l)}}}function Gn(t,e,n){let o;return D(t,qe,s=>n(0,o=s)),[o]}class zn extends G{constructor(e){super(),V(this,e,Gn,Vn,F,{})}}function ft(t){const e=t-1;return e*e*e+1}function Jn(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(n[o[s]]=t[o[s]]);return n}function mt(t,{delay:e=0,duration:n=400,easing:o=Le}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:i=>`opacity: ${i*s}`}}function X(t,{delay:e=0,duration:n=400,easing:o=ft,axis:s="y"}={}){const i=getComputedStyle(t),l=+i.opacity,r=s==="y"?"height":"width",a=parseFloat(i[r]),c=s==="y"?["top","bottom"]:["left","right"],f=c.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),u=parseFloat(i[`padding${f[0]}`]),g=parseFloat(i[`padding${f[1]}`]),m=parseFloat(i[`margin${f[0]}`]),p=parseFloat(i[`margin${f[1]}`]),_=parseFloat(i[`border${f[0]}Width`]),d=parseFloat(i[`border${f[1]}Width`]);return{delay:e,duration:n,easing:o,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*l};${r}: ${h*a}px;padding-${c[0]}: ${h*u}px;padding-${c[1]}: ${h*g}px;margin-${c[0]}: ${h*m}px;margin-${c[1]}: ${h*p}px;border-${c[0]}-width: ${h*_}px;border-${c[1]}-width: ${h*d}px;`}}function Yn(t){var{fallback:e}=t,n=Jn(t,["fallback"]);const o=new Map,s=new Map;function i(r,a,c){const{delay:f=0,duration:u=P=>Math.sqrt(P)*30,easing:g=ft}=ze(ze({},n),c),m=r.getBoundingClientRect(),p=a.getBoundingClientRect(),_=m.left-p.left,d=m.top-p.top,h=m.width/p.width,C=m.height/p.height,S=Math.sqrt(_*_+d*d),T=getComputedStyle(a),N=T.transform==="none"?"":T.transform,j=+T.opacity;return{delay:f,duration:de(u)?u(S):u,easing:g,css:(P,U)=>`
				opacity: ${P*j};
				transform-origin: top left;
				transform: ${N} translate(${U*_}px,${U*d}px) scale(${P+(1-P)*h}, ${P+(1-P)*C});
			`}}function l(r,a,c){return(f,u)=>(r.set(u.key,f),()=>{if(a.has(u.key)){const g=a.get(u.key);return a.delete(u.key),i(g,f,u)}return r.delete(u.key),e&&e(f,u,c)})}return[l(s,o,!1),l(o,s,!0)]}function yt(t,e,n){const o=t.slice();return o[3]=e[n],o}function bt(t,e){let n,o=e[3].msg+"",s,i,l,r,a;return{key:t,first:null,c(){n=v("article"),s=Y(o),i=O(),y(n,"class",l=pt(e[3].cssClass)+" svelte-1e5twis"),this.first=n},m(c,f){$(c,n,f),w(n,s),w(n,i),a=!0},p(c,f){e=c,(!a||f&1)&&o!==(o=e[3].msg+"")&&Re(s,o),(!a||f&1&&l!==(l=pt(e[3].cssClass)+" svelte-1e5twis"))&&y(n,"class",l)},i(c){a||(H(()=>{r||(r=se(n,X,{duration:250},!0)),r.run(1)}),a=!0)},o(c){r||(r=se(n,X,{duration:250},!1)),r.run(0),a=!1},d(c){c&&b(n),c&&r&&r.end()}}}function Qn(t){let e,n=[],o=new Map,s,i=t[0];const l=r=>r[3].id;for(let r=0;r<i.length;r+=1){let a=yt(t,i,r),c=l(a);o.set(c,n[r]=bt(c,a))}return{c(){e=v("div");for(let r=0;r<n.length;r+=1)n[r].c();y(e,"class","toastcontainer svelte-1e5twis")},m(r,a){$(r,e,a);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);s=!0},p(r,[a]){a&1&&(i=r[0],W(),n=Qe(n,a,l,1,r,i,o,e,Yt,bt,null,yt),q())},i(r){if(!s){for(let a=0;a<i.length;a+=1)k(n[a]);s=!0}},o(r){for(let a=0;a<n.length;a+=1)E(n[a]);s=!1},d(r){r&&b(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}let Xn=1;const Ze=me([]);function oe(t,e,n=4){Ze.update(o=>(o.push({id:Xn++,msg:t,cssClass:e,timeout:n*10}),o))}function Zn(t,e,n){let o;D(t,Ze,l=>n(0,o=l));let s;function i(){!s&&o.length&&(s=window.setTimeout(()=>{o.forEach(l=>l.timeout--),pe(Ze,o=o.filter(l=>l.timeout>0),o),s=void 0,i()},100))}return t.$$.update=()=>{t.$$.dirty&1&&o.length&&i()},[o]}class xn extends G{constructor(e){super(),V(this,e,Zn,Qn,F,{})}}function wt(t){let e,n,o,s,i,l,r,a,c,f,u,g,m,p,_,d,h,C,S,T,N,j,P,U;return{c(){e=v("section"),n=v("label"),n.textContent="Key:",o=O(),s=v("input"),l=O(),r=v("button"),a=O(),c=v("label"),c.textContent="Value:",f=O(),u=v("input"),m=O(),p=v("label"),p.textContent="Color:",_=O(),d=v("input"),h=O(),C=v("button"),C.textContent="close",S=O(),T=v("button"),T.textContent="save",y(n,"for","tagedit_key_input"),y(s,"id","tagedit_key_input"),y(s,"type","text"),s.value=i=t[0].object.key,s.disabled=!0,y(r,"class","fa fa-trash-can"),y(r,"title","delete"),y(c,"for","tagedit_value_input"),y(u,"id","tagedit_value_input"),y(u,"type","text"),u.value=g=t[0].object.value,u.disabled=!0,y(u,"class","svelte-1hd6fid"),y(p,"for","tagedit_value_input"),y(d,"id","tagedit_value_input"),y(d,"type","color"),y(d,"class","svelte-1hd6fid"),y(C,"id","tagedit_close_btn"),y(T,"id","tagedit_save_btn"),y(T,"class","svelte-1hd6fid"),y(e,"class","svelte-1hd6fid")},m(L,Z){$(L,e,Z),w(e,n),w(e,o),w(e,s),w(e,l),w(e,r),w(e,a),w(e,c),w(e,f),w(e,u),w(e,m),w(e,p),w(e,_),w(e,d),fe(d,t[0].object.color),w(e,h),w(e,C),w(e,S),w(e,T),j=!0,P||(U=[R(r,"click",K(t[3])),R(d,"input",t[4]),R(C,"click",K(t[5])),R(T,"click",K(t[2]))],P=!0)},p(L,Z){(!j||Z&1&&i!==(i=L[0].object.key)&&s.value!==i)&&(s.value=i),(!j||Z&1&&g!==(g=L[0].object.value)&&u.value!==g)&&(u.value=g),Z&1&&fe(d,L[0].object.color)},i(L){j||(H(()=>{N||(N=se(e,X,{},!0)),N.run(1)}),j=!0)},o(L){N||(N=se(e,X,{},!1)),N.run(0),j=!1},d(L){L&&b(e),L&&N&&N.end(),P=!1,z(U)}}}function eo(t){let e,n,o=t[0]&&wt(t);return{c(){o&&o.c(),e=le()},m(s,i){o&&o.m(s,i),$(s,e,i),n=!0},p(s,[i]){s[0]?o?(o.p(s,i),i&1&&k(o,1)):(o=wt(s),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(W(),E(o,1,1,()=>{o=null}),q())},i(s){n||(k(o),n=!0)},o(s){E(o),n=!1},d(s){o&&o.d(s),s&&b(e)}}}let ee=me();function to(t,e,n){let o,s=A,i;D(t,ee,u=>n(0,o=u)),D(t,ie,u=>n(6,i=u)),t.$$.on_destroy.push(()=>s());const l=async()=>{confirm("deleting the tag here, will remove it from all Todos too. This step can not be undone! Continue?")&&o&&(await o.object.drop(),pe(ie,i=i.filter(u=>u!=o.object.key),i),pe(ee,o=void 0,o),oe("tag removed","info",2))},r=async()=>{await o.object.insert(),o.notifiySubscribers(),pe(ee,o=void 0,o),oe("changes saved","success",2)},a=()=>l();function c(){o.object.color=this.value,ee.set(o)}return[o,l,r,a,c,()=>pe(ee,o=void 0,o)]}class no extends G{constructor(e){super(),V(this,e,to,eo,F,{})}}function oo(t){return typeof t=="object"}function xe(t){return t instanceof Array}function vt(t){let e,n,o;function s(a,c){return a[1]?ro:so}let i=s(t),l=i(t),r=!t[0]&&kt(t);return{c(){e=v("span"),l.c(),n=O(),r&&r.c(),y(e,"class","tag svelte-nlznha"),y(e,"style",o=`--tagcolor: ${t[3].color}`)},m(a,c){$(a,e,c),l.m(e,null),w(e,n),r&&r.m(e,null)},p(a,c){i===(i=s(a))&&l?l.p(a,c):(l.d(1),l=i(a),l&&(l.c(),l.m(e,n))),a[0]?r&&(r.d(1),r=null):r?r.p(a,c):(r=kt(a),r.c(),r.m(e,null)),c&8&&o!==(o=`--tagcolor: ${a[3].color}`)&&y(e,"style",o)},d(a){a&&b(e),l.d(),r&&r.d()}}}function so(t){let e,n=t[3].value+"",o,s,i;return{c(){e=v("a"),o=Y(n),y(e,"href","#"),y(e,"class","svelte-nlznha")},m(l,r){$(l,e,r),w(e,o),s||(i=R(e,"click",K(t[9])),s=!0)},p(l,r){r&8&&n!==(n=l[3].value+"")&&Re(o,n)},d(l){l&&b(e),s=!1,i()}}}function ro(t){let e=t[3].value+"",n;return{c(){n=Y(e)},m(o,s){$(o,n,s)},p(o,s){s&8&&e!==(e=o[3].value+"")&&Re(n,e)},d(o){o&&b(n)}}}function kt(t){let e,n,o;return{c(){e=v("a"),e.textContent=" ",y(e,"href","#"),y(e,"class","fa fa-times svelte-nlznha")},m(s,i){$(s,e,i),n||(o=R(e,"click",K(t[10])),n=!0)},p:A,d(s){s&&b(e),n=!1,o()}}}function io(t){let e,n=t[2]&&vt(t);return{c(){n&&n.c(),e=le()},m(o,s){n&&n.m(o,s),$(o,e,s)},p(o,[s]){o[2]?n?n.p(o,s):(n=vt(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:A,o:A,d(o){n&&n.d(o),o&&b(e)}}}function lo(t,e,n){let o,s=A,i=()=>(s(),s=tt(g,d=>n(3,o=d)),g);t.$$.on_destroy.push(()=>s());let{tagstore:l=void 0}=e,{tag:r=void 0}=e,{value:a=""}=e,{key:c=""}=e,{noremove:f=!1}=e,{noclick:u=!1}=e,g;const m=zt(),p=()=>m("click",g),_=()=>m("remove",g);return t.$$set=d=>{"tagstore"in d&&n(5,l=d.tagstore),"tag"in d&&n(6,r=d.tag),"value"in d&&n(7,a=d.value),"key"in d&&n(8,c=d.key),"noremove"in d&&n(0,f=d.noremove),"noclick"in d&&n(1,u=d.noclick)},t.$$.update=()=>{if(t.$$.dirty&480){if(l)i(n(2,g=l));else if(r)i(n(2,g=ue.getTagStore(r)));else if(c)try{ue.findByKey(c).then(d=>i(n(2,g=d)))}catch(d){console.error(d),i(n(2,g=void 0))}else if(a)try{ue.findByValue(a).then(d=>i(n(2,g=d)))}catch(d){console.error(d),i(n(2,g=void 0))}}},[f,u,g,o,m,l,r,a,c,p,_]}class nn extends G{constructor(e){super(),V(this,e,lo,io,F,{tagstore:5,tag:6,value:7,key:8,noremove:0,noclick:1})}}let Pe;x.subscribe(t=>Pe=t);const ve=await Se;class ao{subs=new Set;subscribe=e=>(e([]),(async()=>{const n=await this._dat();console.log(n),e(n||[])})(),this.subs.add(e),()=>{this.subs.delete(e)});async refresh(){const e=await this._dat()||[];console.log(e),this.subs.forEach(n=>n(e))}_dat=async()=>{let e;return Ie.length?e=await ve.todos.where("tags").anyOf(Ie).distinct().filter(n=>Ie.reduce((s,i,l)=>s&&n.tags.indexOf(i)!=-1,!0)).toArray():e=await ve.todos.toArray(),Pe?await Promise.all(e.map(n=>on(Pe,n).then(o=>(n.done=o.done,n.description=o.description,delete n.data,n)))):e.filter(n=>n.data===void 0)}}function co(t){return oo(t)&&typeof t.description=="string"&&typeof t.done=="boolean"}const Be=new ao;let Ie=[];async function uo(t,e=!0){t.tags&&(t.tags=t.tags.filter(n=>typeof n=="string")),Pe&&(t.data=await et(Pe,t),delete t.done,t.description="*******"),await(await Se).table("todos").put(t),e&&await Be.refresh()}async function fo(t,e=!0){await(await Se).table("todos").delete(t.id),e&&await Be.refresh()}async function po(t,e=!0){Ie=t,e&&await Be.refresh()}async function et(t,e){return(await Q.synckey.encrypt(new TextEncoder().encode(JSON.stringify({description:e.description,done:e.done})),t)).toBase64()}async function on(t,e){if(!e.data)throw console.error("not encrypted",e),new Error("todo is not encrypted");return JSON.parse(new TextDecoder().decode(await Q.synckey.decrypt(re.fromBase64(e.data),t)))}async function _o(t,e){let n=[];t&&e?await ve.todos.each(async o=>{const s=await on(e,o),i=await et(t,s);n.push({id:o.id,description:"*******",data:i,tags:o.tags})}):t?await ve.todos.each(async o=>{if(o.data)throw console.error(o),new Error("todo already encrypted");const s=await et(t,o);n.push({id:o.id,description:"*******",data:s,tags:o.tags})}):e&&await ve.todos.each(async o=>{const s=JSON.parse(new TextDecoder().decode(await Q.synckey.decrypt(re.fromBase64(o.data),e)));n.push({id:o.id,description:s.description,done:s.done,tags:o.tags})}),await ve.todos.bulkPut(n)}const ce={todos:Be,set:uo,remove:fo,filter:po,encryptAll:_o};if(localStorage){const t="rawTodos";let e;try{e=JSON.parse(localStorage.getItem(t))}catch(n){localStorage.removeItem(t),console.error("Error while initializing Todos: ",n)}xe(e)&&(e=e.filter(co),e.length&&Se.then(n=>n.table("todos").bulkPut(e)).then(()=>{localStorage.removeItem(t)}))}function $t(t){let e,n,o,s,i,l,r,a;return{c(){e=v("form"),n=v("input"),o=O(),s=v("button"),y(n,"type","text"),y(n,"list","available_tags"),y(n,"autocomplete",""),y(s,"type","submit"),y(s,"class","fa fa-plus-circle svelte-1jqn6dg"),y(e,"class","taginput svelte-1jqn6dg"),te(e,"open",t[1])},m(c,f){$(c,e,f),w(e,n),fe(n,t[0]),w(e,o),w(e,s),l=!0,r||(a=[R(n,"input",t[4]),R(e,"submit",K(t[2]))],r=!0)},p(c,f){f&1&&n.value!==c[0]&&fe(n,c[0]),(!l||f&2)&&te(e,"open",c[1])},i(c){l||(H(()=>{i||(i=se(e,X,{},!0)),i.run(1)}),l=!0)},o(c){i||(i=se(e,X,{},!1)),i.run(0),l=!1},d(c){c&&b(e),c&&i&&i.end(),r=!1,z(a)}}}function ho(t){let e,n,o=t[1]&&$t(t);return{c(){o&&o.c(),e=le()},m(s,i){o&&o.m(s,i),$(s,e,i),n=!0},p(s,[i]){s[1]?o?(o.p(s,i),i&2&&k(o,1)):(o=$t(s),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(W(),E(o,1,1,()=>{o=null}),q())},i(s){n||(k(o),n=!0)},o(s){E(o),n=!1},d(s){o&&o.d(s),s&&b(e)}}}function go(t,e,n){const o=zt();let{visible:s=!0}=e,{value:i=""}=e,{noautocreate:l=!1}=e,r;const a=async()=>{try{r=await ue.findByValue(i)}catch(f){if(f instanceof ae&&f.message==ae.NO_TAG_FOR_KEY)try{if(l){oe("tag is unknown","alert",2);return}else{const u=await he.createNew(i);await u.insert(),r=ue.getTagStore(u)}}catch(u){u instanceof ae&&u.message==ae.EMPTY_TAG_KEY?oe("can't submit an empty Tag","alert",2):(console.error(u),oe("ERROR: see console","alert",2));return}else{console.error(f),oe("ERROR: see console","alert",2);return}}o("submit",r)};function c(){i=this.value,n(0,i)}return t.$$set=f=>{"visible"in f&&n(1,s=f.visible),"value"in f&&n(0,i=f.value),"noautocreate"in f&&n(3,l=f.noautocreate)},[i,s,a,l,c]}class sn extends G{constructor(e){super(),V(this,e,go,ho,F,{visible:1,value:0,noautocreate:3})}}function Tt(t,e,n){const o=t.slice();return o[12]=e[n],o}function St(t){let e,n,o,s,i,l,r,a,c,f;function u(d){t[9](d)}let g={};t[1]!==void 0&&(g.value=t[1]),e=new sn({props:g}),We.push(()=>An(e,"value",u)),e.$on("submit",t[4]),s=new no({});const m=[yo,mo],p=[];function _(d,h){return d[0].length?0:1}return r=_(t),a=p[r]=m[r](t),{c(){I(e.$$.fragment),o=O(),I(s.$$.fragment),i=O(),l=v("section"),a.c(),y(l,"class","taglist svelte-n6f67g"),te(l,"open",t[2])},m(d,h){B(e,d,h),$(d,o,h),B(s,d,h),$(d,i,h),$(d,l,h),p[r].m(l,null),f=!0},p(d,h){const C={};!n&&h&2&&(n=!0,C.value=d[1],En(()=>n=!1)),e.$set(C);let S=r;r=_(d),r===S?p[r].p(d,h):(W(),E(p[S],1,1,()=>{p[S]=null}),q(),a=p[r],a?a.p(d,h):(a=p[r]=m[r](d),a.c()),k(a,1),a.m(l,null)),(!f||h&4)&&te(l,"open",d[2])},i(d){f||(k(e.$$.fragment,d),k(s.$$.fragment,d),k(a),H(()=>{c||(c=se(l,X,{},!0)),c.run(1)}),f=!0)},o(d){E(e.$$.fragment,d),E(s.$$.fragment,d),E(a),c||(c=se(l,X,{},!1)),c.run(0),f=!1},d(d){M(e,d),d&&b(o),M(s,d),d&&b(i),d&&b(l),p[r].d(),d&&c&&c.end()}}}function mo(t){let e;return{c(){e=Y("No Tags yet")},m(n,o){$(n,e,o)},p:A,i:A,o:A,d(n){n&&b(e)}}}function yo(t){let e,n,o=t[0],s=[];for(let l=0;l<o.length;l+=1)s[l]=Et(Tt(t,o,l));const i=l=>E(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=le()},m(l,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,r);$(l,e,r),n=!0},p(l,r){if(r&41){o=l[0];let a;for(a=0;a<o.length;a+=1){const c=Tt(l,o,a);s[a]?(s[a].p(c,r),k(s[a],1)):(s[a]=Et(c),s[a].c(),k(s[a],1),s[a].m(e.parentNode,e))}for(W(),a=o.length;a<s.length;a+=1)i(a);q()}},i(l){if(!n){for(let r=0;r<o.length;r+=1)k(s[r]);n=!0}},o(l){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)E(s[r]);n=!1},d(l){ot(s,l),l&&b(e)}}}function Et(t){let e,n;return e=new nn({props:{key:t[12]}}),e.$on("remove",t[10]),e.$on("click",t[11]),{c(){I(e.$$.fragment)},m(o,s){B(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.key=o[12]),e.$set(i)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){M(e,o)}}}function bo(t){let e,n,o,s,i,l,r=t[2]&&St(t);return{c(){e=v("a"),e.textContent="Tags",n=O(),r&&r.c(),o=le(),y(e,"role","button"),y(e,"href","#"),y(e,"class","svelte-n6f67g")},m(a,c){$(a,e,c),$(a,n,c),r&&r.m(a,c),$(a,o,c),s=!0,i||(l=R(e,"click",K(t[8])),i=!0)},p(a,[c]){a[2]?r?(r.p(a,c),c&4&&k(r,1)):(r=St(a),r.c(),k(r,1),r.m(o.parentNode,o)):r&&(W(),E(r,1,1,()=>{r=null}),q())},i(a){s||(k(r),s=!0)},o(a){E(r),s=!1},d(a){a&&b(e),a&&b(n),r&&r.d(a),a&&b(o),i=!1,l()}}}const ie=me([]);function rn(t){ie.update(e=>(e.indexOf(t.key)==-1&&e.push(t.key),e))}try{let t=localStorage.getItem("tagfilter"),e=[];if(t&&(t=JSON.parse(t)),xe(t)){ie.set(t);const n=[];(async()=>{let o=await Promise.all(t.map(s=>ue.findByValue(s).catch(i=>{console.warn(`tag '${s}' does not exist`),n.push(s)})));n.forEach(s=>ie.update(i=>e=i.filter(l=>l!=s))),xe(o)&&(o=o.filter(s=>typeof s<"u"))})()}}catch{}ie.subscribe(t=>{localStorage.setItem("tagfilter",JSON.stringify(t)),ce.filter(t)});function wo(t,e,n){let o,s,i=A,l,r,a;D(t,ie,d=>n(0,s=d)),D(t,ee,d=>n(3,l=d)),D(t,x,d=>n(6,r=d)),D(t,Te,d=>n(7,a=d)),t.$$.on_destroy.push(()=>i());let c="";const f=async d=>{let h=d.detail.object;rn(h),n(1,c="")},u=async d=>{l==d&&pe(ee,l=void 0,l),pe(ie,s=s.filter(h=>h!=d.object.key),s)},g=()=>n(2,o=!o);function m(d){c=d,n(1,c)}const p=d=>u(d.detail),_=d=>{console.log(d.detail,l,ee),ee.set(ee&&l==d.detail?void 0:d.detail)};return t.$$.update=()=>{t.$$.dirty&193&&n(2,o=a&&!r?!1:s.length>0)},[s,c,o,l,f,u,r,a,g,m,p,_]}class vo extends G{constructor(e){super(),V(this,e,wo,bo,F,{})}}function ko(t){let e,n,o,s,i,l,r;return{c(){e=v("div"),n=v("form"),o=v("input"),s=O(),i=v("button"),y(o,"tabindex","0"),y(o,"type","text"),y(i,"type","submit"),y(i,"class","fa fa-circle-plus svelte-1telry2"),y(n,"class","svelte-1telry2")},m(a,c){$(a,e,c),w(e,n),w(n,o),fe(o,t[0].description),w(n,s),w(n,i),l||(r=[R(o,"input",t[3]),R(n,"submit",K(t[1]))],l=!0)},p(a,[c]){c&1&&o.value!==a[0].description&&fe(o,a[0].description)},i:A,o:A,d(a){a&&b(e),l=!1,z(r)}}}function $o(t,e,n){let o;D(t,ie,r=>n(2,o=r));let s={description:"",done:!1,tags:[]};const i=()=>{s.description.trim()==""?oe("noting to add","alert",2):(n(0,s.description=s.description.trim(),s),ce.set(s),n(0,s={description:"",done:!1,tags:s.tags}))};function l(){s.description=this.value,n(0,s),n(2,o)}return t.$$.update=()=>{t.$$.dirty&4&&n(0,s.tags=[...o],s)},[s,i,o,l]}class To extends G{constructor(e){super(),V(this,e,$o,ko,F,{})}}function ln(t,{from:e,to:n},o={}){const s=getComputedStyle(t),i=s.transform==="none"?"":s.transform,[l,r]=s.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*l/n.width-(n.left+l),c=e.top+e.height*r/n.height-(n.top+r),{delay:f=0,duration:u=m=>Math.sqrt(m)*120,easing:g=ft}=o;return{delay:f,duration:de(u)?u(Math.sqrt(a*a+c*c)):u,easing:g,css:(m,p)=>{const _=p*a,d=p*c,h=m+p*e.width/n.width,C=m+p*e.height/n.height;return`transform: ${i} translate(${_}px, ${d}px) scale(${h}, ${C});`}}}function Ct(t,e,n){const o=t.slice();return o[12]=e[n],o}function Ot(t){let e,n,o;return n=new nn({props:{key:t[12],noremove:t[0].done}}),n.$on("click",t[10]),n.$on("remove",t[5]),{c(){e=v("li"),I(n.$$.fragment),y(e,"class","svelte-qn670o")},m(s,i){$(s,e,i),B(n,e,null),o=!0},p(s,i){const l={};i&1&&(l.key=s[12]),i&1&&(l.noremove=s[0].done),n.$set(l)},i(s){o||(k(n.$$.fragment,s),o=!0)},o(s){E(n.$$.fragment,s),o=!1},d(s){s&&b(e),M(n)}}}function At(t){let e,n,o,s,i,l,r=t[1]&&Nt(t);return{c(){e=v("button"),n=O(),r&&r.c(),o=le(),y(e,"class","fa fa-tag"),y(e,"title","new Tag")},m(a,c){$(a,e,c),$(a,n,c),r&&r.m(a,c),$(a,o,c),s=!0,i||(l=R(e,"click",K(t[11])),i=!0)},p(a,c){a[1]?r?(r.p(a,c),c&2&&k(r,1)):(r=Nt(a),r.c(),k(r,1),r.m(o.parentNode,o)):r&&(W(),E(r,1,1,()=>{r=null}),q())},i(a){s||(k(r),s=!0)},o(a){E(r),s=!1},d(a){a&&b(e),a&&b(n),r&&r.d(a),a&&b(o),i=!1,l()}}}function Nt(t){let e,n,o;return n=new sn({}),n.$on("submit",t[6]),{c(){e=v("div"),I(n.$$.fragment),y(e,"class","taginput svelte-qn670o")},m(s,i){$(s,e,i),B(n,e,null),o=!0},p:A,i(s){o||(k(n.$$.fragment,s),o=!0)},o(s){E(n.$$.fragment,s),o=!1},d(s){s&&b(e),M(n)}}}function So(t){let e,n,o,s,i,l=t[0].description+"",r,a,c,f,u,g,m,p,_,d=t[0].tags,h=[];for(let T=0;T<d.length;T+=1)h[T]=Ot(Ct(t,d,T));const C=T=>E(h[T],1,1,()=>{h[T]=null});let S=!t[0].done&&At(t);return{c(){e=v("article"),n=v("span"),o=v("input"),s=O(),i=v("span"),r=Y(l),a=O(),c=v("button"),f=O(),u=v("ul");for(let T=0;T<h.length;T+=1)h[T].c();g=O(),S&&S.c(),y(o,"type","checkbox"),y(i,"class","txt svelte-qn670o"),y(c,"class","fa fa-trash-can"),y(c,"title","delete"),y(u,"class","svelte-qn670o"),y(e,"class","svelte-qn670o"),te(e,"done",t[0].done)},m(T,N){$(T,e,N),w(e,n),w(n,o),o.checked=t[0].done,w(e,s),w(e,i),w(i,r),w(e,a),w(e,c),w(e,f),w(e,u);for(let j=0;j<h.length;j+=1)h[j]&&h[j].m(u,null);w(e,g),S&&S.m(e,null),m=!0,p||(_=[R(o,"change",t[7]),R(o,"click",t[8]),R(c,"click",K(t[9]))],p=!0)},p(T,[N]){if(N&1&&(o.checked=T[0].done),(!m||N&1)&&l!==(l=T[0].description+"")&&Re(r,l),N&49){d=T[0].tags;let j;for(j=0;j<d.length;j+=1){const P=Ct(T,d,j);h[j]?(h[j].p(P,N),k(h[j],1)):(h[j]=Ot(P),h[j].c(),k(h[j],1),h[j].m(u,null))}for(W(),j=d.length;j<h.length;j+=1)C(j);q()}T[0].done?S&&(W(),E(S,1,1,()=>{S=null}),q()):S?(S.p(T,N),N&1&&k(S,1)):(S=At(T),S.c(),k(S,1),S.m(e,null)),(!m||N&1)&&te(e,"done",T[0].done)},i(T){if(!m){for(let N=0;N<d.length;N+=1)k(h[N]);k(S),m=!0}},o(T){h=h.filter(Boolean);for(let N=0;N<h.length;N+=1)E(h[N]);E(S),m=!1},d(T){T&&b(e),ot(h,T),S&&S.d(),p=!1,z(_)}}}function Eo(t,e,n){let{todo:o}=e,s=!1;const i=_=>{confirm("remove todo permanently ?")&&ce.remove(_)},l=async _=>{_.done=!_.done,ce.set(_)},r=async _=>{try{rn(_.object)}catch{oe("cant add tag (See Console)","alert",2)}},a=async _=>{if(confirm("remove Tag?")){const d=_.detail;n(0,o.tags=o.tags.filter(h=>h!=d.object.key),o),ce.set(o)}},c=async _=>{console.log(_);const d=_.detail;o.tags.indexOf(d.object.key)==-1&&(o.tags.push(d.object.key),ce.set(o)),n(1,s=!1)};function f(){o.done=this.checked,n(0,o)}const u=()=>l(o),g=()=>i(o),m=_=>r(_.detail),p=()=>n(1,s=!s);return t.$$set=_=>{"todo"in _&&n(0,o=_.todo)},[o,s,i,l,r,a,c,f,u,g,m,p]}class an extends G{constructor(e){super(),V(this,e,Eo,So,F,{todo:0})}}function jt(t,e,n){const o=t.slice();return o[6]=e[n],o}function Pt(t,e,n){const o=t.slice();return o[6]=e[n],o}function Lt(t,e){let n,o,s,i,l,r=A,a;return o=new an({props:{todo:e[6]}}),{key:t,first:null,c(){n=v("div"),I(o.$$.fragment),this.first=n},m(c,f){$(c,n,f),B(o,n,null),a=!0},p(c,f){e=c;const u={};f&2&&(u.todo=e[6]),o.$set(u)},r(){l=n.getBoundingClientRect()},f(){Gt(n),r(),st(n,l)},a(){r(),r=Vt(n,l,ln,{duration:cn})},i(c){a||(k(o.$$.fragment,c),c&&H(()=>{i&&i.end(1),s=at(n,e[3],{key:e[6].id}),s.start()}),a=!0)},o(c){E(o.$$.fragment,c),s&&s.invalidate(),c&&(i=ct(n,e[2],{key:e[6].id})),a=!1},d(c){c&&b(n),M(o),c&&i&&i.end()}}}function Rt(t,e){let n,o,s,i,l,r,a=A,c;return o=new an({props:{todo:e[6]}}),{key:t,first:null,c(){n=v("div"),I(o.$$.fragment),s=O(),this.first=n},m(f,u){$(f,n,u),B(o,n,null),w(n,s),c=!0},p(f,u){e=f;const g={};u&1&&(g.todo=e[6]),o.$set(g)},r(){r=n.getBoundingClientRect()},f(){Gt(n),a(),st(n,r)},a(){a(),a=Vt(n,r,ln,{duration:cn})},i(f){c||(k(o.$$.fragment,f),f&&H(()=>{l&&l.end(1),i=at(n,e[3],{key:e[6].id}),i.start()}),c=!0)},o(f){E(o.$$.fragment,f),i&&i.invalidate(),f&&(l=ct(n,e[2],{key:e[6].id})),c=!1},d(f){f&&b(n),M(o),f&&l&&l.end()}}}function Co(t){let e=[],n=new Map,o,s,i,l=[],r=new Map,a,c,f=t[1];const u=p=>p[6].id;for(let p=0;p<f.length;p+=1){let _=Pt(t,f,p),d=u(_);n.set(d,e[p]=Lt(d,_))}let g=t[0];const m=p=>p[6].id;for(let p=0;p<g.length;p+=1){let _=jt(t,g,p),d=m(_);r.set(d,l[p]=Rt(d,_))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();o=O(),s=v("h3"),s.textContent="Done:",i=O();for(let p=0;p<l.length;p+=1)l[p].c();a=le()},m(p,_){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(p,_);$(p,o,_),$(p,s,_),$(p,i,_);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(p,_);$(p,a,_),c=!0},p(p,[_]){if(_&2){f=p[1],W();for(let d=0;d<e.length;d+=1)e[d].r();e=Qe(e,_,u,1,p,f,n,o.parentNode,_t,Lt,o,Pt);for(let d=0;d<e.length;d+=1)e[d].a();q()}if(_&1){g=p[0],W();for(let d=0;d<l.length;d+=1)l[d].r();l=Qe(l,_,m,1,p,g,r,a.parentNode,_t,Rt,a,jt);for(let d=0;d<l.length;d+=1)l[d].a();q()}},i(p){if(!c){for(let _=0;_<f.length;_+=1)k(e[_]);for(let _=0;_<g.length;_+=1)k(l[_]);c=!0}},o(p){for(let _=0;_<e.length;_+=1)E(e[_]);for(let _=0;_<l.length;_+=1)E(l[_]);c=!1},d(p){for(let _=0;_<e.length;_+=1)e[_].d(p);p&&b(o),p&&b(s),p&&b(i);for(let _=0;_<l.length;_+=1)l[_].d(p);p&&b(a)}}}const cn=250;function Oo(t,e,n){let o,s,i,l;D(t,Be,c=>n(5,l=c));const[r,a]=Yn({fallback:X});return t.$$.update=()=>{t.$$.dirty&32&&n(4,o=[...l]),t.$$.dirty&16&&n(1,s=o.filter(c=>!c.done)),t.$$.dirty&16&&n(0,i=o.filter(c=>c.done))},[i,s,r,a,o,l]}class Ao extends G{constructor(e){super(),V(this,e,Oo,Co,F,{})}}function Bt(t){let e,n,o,s,i,l,r;return{c(){e=v("article"),n=Y(`App has been updated. Please reopen the app or 
    `),o=v("a"),o.textContent="reload",y(o,"href","#"),y(e,"class","ViteUpdatePrompt svelte-lnojhr")},m(a,c){$(a,e,c),w(e,n),w(e,o),i=!0,l||(r=R(o,"click",K(function(){de(t[0])&&t[0].apply(this,arguments)})),l=!0)},p(a,c){t=a},i(a){i||(H(()=>{s||(s=se(e,X,{},!0)),s.run(1)}),i=!0)},o(a){s||(s=se(e,X,{},!1)),s.run(0),i=!1},d(a){a&&b(e),a&&s&&s.end(),l=!1,r()}}}function No(t){let e,n,o=t[0]&&Bt(t);return{c(){o&&o.c(),e=le()},m(s,i){o&&o.m(s,i),$(s,e,i),n=!0},p(s,[i]){s[0]?o?(o.p(s,i),i&1&&k(o,1)):(o=Bt(s),o.c(),k(o,1),o.m(e.parentNode,e)):o&&(W(),E(o,1,1,()=>{o=null}),q())},i(s){n||(k(o),n=!0)},o(s){E(o),n=!1},d(s){o&&o.d(s),s&&b(e)}}}const un=me();function jo(t,e,n){let o,s=A;return D(t,un,i=>n(0,o=i)),t.$$.on_destroy.push(()=>s()),[o]}class Po extends G{constructor(e){super(),V(this,e,jo,No,F,{})}}function Lo(t){let e,n,o,s,i,l,r;const a=t[5].default,c=dn(a,t,t[4],null);return{c(){e=v("div"),n=v("div"),o=O(),s=v("div"),c&&c.c(),y(n,"class","modalBackdrop "+t[1]+" svelte-ce4pm9"),y(s,"class","modalContent Modal "+t[0]+" svelte-ce4pm9"),y(e,"class","modalContainer svelte-ce4pm9")},m(f,u){$(f,e,u),w(e,n),w(e,o),w(e,s),c&&c.m(s,null),t[6](e),r=!0},p(f,[u]){c&&c.p&&(!r||u&16)&&_n(c,a,f,f[4],r?pn(a,f[4],u,null):hn(f[4]),null)},i(f){r||(k(c,f),H(()=>{l&&l.end(1),i=at(e,mt,{}),i.start()}),r=!0)},o(f){E(c,f),i&&i.invalidate(),l=ct(e,mt,{}),r=!1},d(f){f&&b(e),c&&c.d(f),t[6](null),f&&l&&l.end()}}}function Ro(t,e,n){let{$$slots:o={},$$scope:s}=e;const i="",l="";let{open:r=!0}=e,a;kn(()=>{document.body.appendChild(a),n(3,r=!0)}),$n(()=>{document.body.removeChild(a),n(3,r=!1)});function c(f){We[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"open"in f&&n(3,r=f.open),"$$scope"in f&&n(4,s=f.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&(r?document.body.style.overflow="hidden":document.body.style.overflow="")},[i,l,a,r,s,o,c]}class Bo extends G{constructor(e){super(),V(this,e,Ro,Lo,F,{contentClass:0,backdropClass:1,open:3})}get contentClass(){return this.$$.ctx[0]}get backdropClass(){return this.$$.ctx[1]}}function Mt(t){let e,n,o;return{c(){e=v("a"),e.innerHTML='<li class="fa fa-shield-halved"></li>',y(e,"role","button"),y(e,"href","#"),y(e,"class","unlockbtn svelte-oug3cm")},m(s,i){$(s,e,i),n||(o=R(e,"click",K(t[7])),n=!0)},p:A,d(s){s&&b(e),n=!1,o()}}}function Ut(t){let e,n;return e=new Bo({props:{$$slots:{default:[Mo]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment)},m(o,s){B(e,o,s),n=!0},p(o,s){const i={};s&2062&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){E(e.$$.fragment,o),n=!1},d(o){M(e,o)}}}function Mo(t){let e,n,o,s,i,l,r,a,c,f,u,g,m;return{c(){e=v("article"),n=v("form"),o=v("h6"),s=Y(t[2]),i=Y(":"),l=O(),r=v("a"),r.innerHTML='<li class="fa fa-times"></li>',a=O(),c=v("input"),f=O(),u=v("button"),u.textContent="OK",y(r,"href","#"),y(r,"class","closebtn svelte-oug3cm"),y(c,"type","password"),y(c,"class","svelte-oug3cm"),y(u,"type","submit"),y(n,"class","svelte-oug3cm")},m(p,_){$(p,e,_),w(e,n),w(n,o),w(o,s),w(o,i),w(n,l),w(n,r),w(n,a),w(n,c),fe(c,t[3]),w(n,f),w(n,u),g||(m=[R(r,"click",K(t[8])),R(c,"input",t[9]),R(n,"submit",K(t[6]))],g=!0)},p(p,_){_&4&&Re(s,p[2]),_&8&&c.value!==p[3]&&fe(c,p[3])},d(p){p&&b(e),g=!1,z(m)}}}function Uo(t){let e,n,o,s,i,l,r,a,c=t[0]&&t[4]&&Mt(t),f=t[1]&&Ut(t);return{c(){e=v("a"),n=v("li"),o=O(),c&&c.c(),s=O(),f&&f.c(),i=le(),y(n,"class","fa"),te(n,"fa-lock",!t[0]),te(n,"fa-lock-open",t[0]),y(e,"role","button"),y(e,"href","#"),y(e,"class","unlockbtn svelte-oug3cm")},m(u,g){$(u,e,g),w(e,n),$(u,o,g),c&&c.m(u,g),$(u,s,g),f&&f.m(u,g),$(u,i,g),l=!0,r||(a=R(e,"click",K(t[5])),r=!0)},p(u,[g]){(!l||g&1)&&te(n,"fa-lock",!u[0]),(!l||g&1)&&te(n,"fa-lock-open",u[0]),u[0]&&u[4]?c?c.p(u,g):(c=Mt(u),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null),u[1]?f?(f.p(u,g),g&2&&k(f,1)):(f=Ut(u),f.c(),k(f,1),f.m(i.parentNode,i)):f&&(W(),E(f,1,1,()=>{f=null}),q())},i(u){l||(k(f),l=!0)},o(u){E(f),l=!1},d(u){u&&b(e),u&&b(o),c&&c.d(u),u&&b(s),f&&f.d(u),u&&b(i),r=!1,a()}}}function Io(t,e,n){let o,s;D(t,x,p=>n(10,o=p)),D(t,Te,p=>n(4,s=p));let i=localStorage.getItem("haslock")==null,l=!1,r="",a="";const c=()=>{i?s?(x.set(void 0),n(0,i=!1)):(n(2,r="Set a password"),n(1,l=!0)):(n(2,r="Enter your password"),n(1,l=!0))},f=async()=>{if(a.trim().length!=a.length)oe("password can't contain whitespaces at the start or end","error",4);else if(!a.length)oe("password is empty","info",2),n(0,i=!1),x.set(void 0),n(1,l=!1),n(3,a="");else{const p=await Ve(a);s?(n(0,i=!0),x.set(p),n(3,a="")):(await ue.encryptAll(p,o),await ce.encryptAll(p,o),Te.set(!0),localStorage.setItem("haslock","1"),x.set(void 0),n(0,i=!1),n(3,a="")),n(1,l=!1)}},u=async()=>{o&&confirm("this will remove the password protectedion from your todos. Continue?")&&(await ue.encryptAll(void 0,o),await ce.encryptAll(void 0,o),localStorage.removeItem("haslock"),Te.set(!1),x.set(void 0),n(0,i=!0),n(3,a=""))},g=()=>n(1,l=!1);function m(){a=this.value,n(3,a)}return[i,l,r,a,s,c,f,u,g,m]}class Do extends G{constructor(e){super(),V(this,e,Io,Uo,F,{})}}function Ko(t){let e,n,o,s,i,l,r,a,c,f;return e=new vo({}),i=new To({}),r=new Ao({}),c=new zn({}),{c(){I(e.$$.fragment),n=O(),o=v("h1"),o.textContent="Todos",s=O(),I(i.$$.fragment),l=O(),I(r.$$.fragment),a=O(),I(c.$$.fragment),y(o,"class","text-center")},m(u,g){B(e,u,g),$(u,n,g),$(u,o,g),$(u,s,g),B(i,u,g),$(u,l,g),B(r,u,g),$(u,a,g),B(c,u,g),f=!0},i(u){f||(k(e.$$.fragment,u),k(i.$$.fragment,u),k(r.$$.fragment,u),k(c.$$.fragment,u),f=!0)},o(u){E(e.$$.fragment,u),E(i.$$.fragment,u),E(r.$$.fragment,u),E(c.$$.fragment,u),f=!1},d(u){M(e,u),u&&b(n),u&&b(o),u&&b(s),M(i,u),u&&b(l),M(r,u),u&&b(a),M(c,u)}}}function Wo(t){let e;return{c(){e=Y("please enter your password first")},m(n,o){$(n,e,o)},i:A,o:A,d(n){n&&b(e)}}}function qo(t){let e,n,o,s,i,l,r,a,c,f,u,g,m;i=new Do({});const p=[Wo,Ko],_=[];function d(h,C){return h[0]&&!h[1]?0:1}return r=d(t),a=_[r]=p[r](t),f=new xn({}),g=new Po({}),{c(){e=v("base"),n=O(),o=v("nav"),o.innerHTML=`<ul><li><strong>HelloWorld Todo&#39;s</strong></li></ul> 
    <ul><li><a href="https://github.com/Rocco-Gossmann/SvelteHelloWorldTodos" target="_blank">GitHub</a></li></ul>`,s=O(),I(i.$$.fragment),l=O(),a.c(),c=O(),I(f.$$.fragment),u=O(),I(g.$$.fragment),y(e,"href","/SvelteHelloWorldTodos")},m(h,C){w(document.head,e),$(h,n,C),$(h,o,C),$(h,s,C),B(i,h,C),$(h,l,C),_[r].m(h,C),$(h,c,C),B(f,h,C),$(h,u,C),B(g,h,C),m=!0},p(h,[C]){let S=r;r=d(h),r!==S&&(W(),E(_[S],1,1,()=>{_[S]=null}),q(),a=_[r],a||(a=_[r]=p[r](h),a.c()),k(a,1),a.m(c.parentNode,c))},i(h){m||(k(i.$$.fragment,h),k(a),k(f.$$.fragment,h),k(g.$$.fragment,h),m=!0)},o(h){E(i.$$.fragment,h),E(a),E(f.$$.fragment,h),E(g.$$.fragment,h),m=!1},d(h){b(e),h&&b(n),h&&b(o),h&&b(s),M(i,h),h&&b(l),_[r].d(h),h&&b(c),M(f,h),h&&b(u),M(g,h)}}}function Fo(t,e,n){let o,s;return D(t,Te,i=>n(0,o=i)),D(t,x,i=>n(1,s=i)),[o,s]}class Ho extends G{constructor(e){super(),V(this,e,Fo,qo,F,{})}}const Vo="modulepreload",Go=function(t){return"/SvelteHelloWorldTodos/"+t},It={},zo=function(e,n,o){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Go(i),i in It)return;It[i]=!0;const l=i.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(!!o)for(let f=s.length-1;f>=0;f--){const u=s[f];if(u.href===i&&(!l||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${r}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":Vo,l||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),l)return new Promise((f,u)=>{c.addEventListener("load",f),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};function Jo(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:o,onRegistered:s,onRegisteredSW:i,onRegisterError:l}=t;let r,a,c;const f=async(g=!0)=>{await a,await c?.()};async function u(){if("serviceWorker"in navigator){const{Workbox:g}=await zo(()=>import("./workbox-window.prod.es5-295a6886.js"),[]);r=new g("/SvelteHelloWorldTodos/sw.js",{scope:"/SvelteHelloWorldTodos/",type:"classic"}),c=async()=>{await r?.messageSkipWaiting()};{let m=!1;const p=()=>{m=!0,r?.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()}),n?.()};r.addEventListener("installed",_=>{typeof _.isUpdate>"u"?typeof _.isExternal<"u"?_.isExternal?p():!m&&o?.():_.isExternal?window.location.reload():!m&&o?.():_.isUpdate||o?.()}),r.addEventListener("waiting",p),r.addEventListener("externalwaiting",p)}r.register({immediate:e}).then(m=>{i?i("/SvelteHelloWorldTodos/sw.js",m):s?.(m)}).catch(m=>{l?.(m)})}}return a=u(),f}new Ho({target:document.getElementById("app")});const Yo=Jo({onNeedRefresh(){un.set(Yo)}});
