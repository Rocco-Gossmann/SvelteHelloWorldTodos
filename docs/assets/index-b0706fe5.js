var Bt=Object.defineProperty;var Ft=(t,e,n)=>e in t?Bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(Ft(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function C(){}const Ce=t=>t;function Ve(t,e){for(const n in e)t[n]=e[n];return t}function dt(t){return t()}function xe(){return Object.create(null)}function K(t){t.forEach(dt)}function Z(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Lt(t){return Object.keys(t).length===0}function Pt(t,...e){if(t==null)return C;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function pe(t,e,n){t.$$.on_destroy.push(Pt(e,n))}function He(t){return t??""}function _t(t,e,n){return t.set(n),e}const ht=typeof window<"u";let Ne=ht?()=>window.performance.now():()=>Date.now(),De=ht?t=>requestAnimationFrame(t):C;const se=new Set;function gt(t){se.forEach(e=>{e.c(t)||(se.delete(e),e.f())}),se.size!==0&&De(gt)}function Re(t){let e;return se.size===0&&De(gt),{promise:new Promise(n=>{se.add(e={c:t,f:n})}),abort(){se.delete(e)}}}function R(t,e){t.appendChild(e)}function pt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Dt(t){const e=S("style");return qt(pt(t),e),e.sheet}function qt(t,e){return R(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function qe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function ee(t){return document.createTextNode(t)}function M(){return ee(" ")}function me(){return ee("")}function D(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function U(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Kt(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $e(t,e){t.value=e??""}function fe(t,e,n){t.classList[n?"add":"remove"](e)}function mt(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}const Te=new Map;let Oe=0;function Yt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Gt(t,e){const n={stylesheet:Dt(e),rules:{}};return Te.set(t,n),n}function _e(t,e,n,i,r,l,o,s=0){const c=16.666/i;let f=`{
`;for(let p=0;p<=1;p+=c){const h=e+(n-e)*l(p);f+=p*100+`%{${o(h,1-h)}}
`}const d=f+`100% {${o(n,1-n)}}
}`,g=`__svelte_${Yt(d)}_${s}`,_=pt(t),{stylesheet:m,rules:a}=Te.get(_)||Gt(_,t);a[g]||(a[g]=!0,m.insertRule(`@keyframes ${g} ${d}`,m.cssRules.length));const u=t.style.animation||"";return t.style.animation=`${u?`${u}, `:""}${g} ${i}ms linear ${r}ms 1 both`,Oe+=1,g}function he(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),Oe-=r,Oe||zt())}function zt(){De(()=>{Oe||(Te.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&b(e)}),Te.clear())})}function yt(t,e,n,i){if(!e)return C;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return C;const{delay:l=0,duration:o=300,easing:s=Ce,start:c=Ne()+l,end:f=c+o,tick:d=C,css:g}=n(t,{from:e,to:r},i);let _=!0,m=!1,a;function u(){g&&(a=_e(t,0,1,o,l,s,g)),l||(m=!0)}function p(){g&&he(t,a),_=!1}return Re(h=>{if(!m&&h>=c&&(m=!0),m&&h>=f&&(d(1,0),p()),!_)return!1;if(m){const k=h-c,v=0+1*s(k/o);d(v,1-v)}return!0}),u(),d(0,1),p}function bt(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:i}=e,r=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=i,Ke(t,r)}}function Ke(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const i=getComputedStyle(t),r=i.transform==="none"?"":i.transform;t.style.transform=`${r} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let ge;function de(t){ge=t}function Vt(){if(!ge)throw new Error("Function called outside component initialization");return ge}function kt(){const t=Vt();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const l=mt(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}const re=[],Ie=[];let ce=[];const je=[],xt=Promise.resolve();let Be=!1;function Ht(){Be||(Be=!0,xt.then(vt))}function q(t){ce.push(t)}function Wt(t){je.push(t)}const Me=new Set;let ne=0;function vt(){if(ne!==0)return;const t=ge;do{try{for(;ne<re.length;){const e=re[ne];ne++,de(e),Jt(e.$$)}}catch(e){throw re.length=0,ne=0,e}for(de(null),re.length=0,ne=0;Ie.length;)Ie.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];Me.has(n)||(Me.add(n),n())}ce.length=0}while(re.length);for(;je.length;)je.pop()();Be=!1,Me.clear(),de(t)}function Jt(t){if(t.fragment!==null){t.update(),K(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}function Ut(t){const e=[],n=[];ce.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),ce=e}let ue;function Ye(){return ue||(ue=Promise.resolve(),ue.then(()=>{ue=null})),ue}function J(t,e,n){t.dispatchEvent(mt(`${e?"intro":"outro"}${n}`))}const ke=new Set;let G;function V(){G={r:0,c:[],p:G}}function x(){G.r||K(G.c),G=G.p}function E(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function N(t,e,n,i){if(t&&t.o){if(ke.has(t))return;ke.add(t),G.c.push(()=>{ke.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Ge={duration:0};function wt(t,e,n){const i={direction:"in"};let r=e(t,n,i),l=!1,o,s,c=0;function f(){o&&he(t,o)}function d(){const{delay:_=0,duration:m=300,easing:a=Ce,tick:u=C,css:p}=r||Ge;p&&(o=_e(t,0,1,m,_,a,p,c++)),u(0,1);const h=Ne()+_,k=h+m;s&&s.abort(),l=!0,q(()=>J(t,!0,"start")),s=Re(v=>{if(l){if(v>=k)return u(1,0),J(t,!0,"end"),f(),l=!1;if(v>=h){const I=a((v-h)/m);u(I,1-I)}}return l})}let g=!1;return{start(){g||(g=!0,he(t),Z(r)?(r=r(i),Ye().then(d)):d())},invalidate(){g=!1},end(){l&&(f(),l=!1)}}}function $t(t,e,n){const i={direction:"out"};let r=e(t,n,i),l=!0,o;const s=G;s.r+=1;function c(){const{delay:f=0,duration:d=300,easing:g=Ce,tick:_=C,css:m}=r||Ge;m&&(o=_e(t,1,0,d,f,g,m));const a=Ne()+f,u=a+d;q(()=>J(t,!1,"start")),Re(p=>{if(l){if(p>=u)return _(0,1),J(t,!1,"end"),--s.r||K(s.c),!1;if(p>=a){const h=g((p-a)/d);_(1-h,h)}}return l})}return Z(r)?Ye().then(()=>{r=r(i),c()}):c(),{end(f){f&&r.tick&&r.tick(1,0),l&&(o&&he(t,o),l=!1)}}}function ae(t,e,n,i){const r={direction:"both"};let l=e(t,n,r),o=i?0:1,s=null,c=null,f=null;function d(){f&&he(t,f)}function g(m,a){const u=m.b-o;return a*=Math.abs(u),{a:o,b:m.b,d:u,duration:a,start:m.start,end:m.start+a,group:m.group}}function _(m){const{delay:a=0,duration:u=300,easing:p=Ce,tick:h=C,css:k}=l||Ge,v={start:Ne()+a,b:m};m||(v.group=G,G.r+=1),s||c?c=v:(k&&(d(),f=_e(t,o,m,u,a,p,k)),m&&h(0,1),s=g(v,u),q(()=>J(t,m,"start")),Re(I=>{if(c&&I>c.start&&(s=g(c,u),c=null,J(t,s.b,"start"),k&&(d(),f=_e(t,o,s.b,s.duration,0,p,l.css))),s){if(I>=s.end)h(o=s.b,1-o),J(t,s.b,"end"),c||(s.b?d():--s.group.r||K(s.group.c)),s=null;else if(I>=s.start){const A=I-s.start;o=s.a+s.d*p(A/s.duration),h(o,1-o)}}return!!(s||c)}))}return{run(m){Z(l)?Ye().then(()=>{l=l(r),_(m)}):_(m)},end(){d(),s=c=null}}}function Tt(t,e){N(t,1,1,()=>{e.delete(t.key)})}function We(t,e){t.f(),Tt(t,e)}function Fe(t,e,n,i,r,l,o,s,c,f,d,g){let _=t.length,m=l.length,a=_;const u={};for(;a--;)u[t[a].key]=a;const p=[],h=new Map,k=new Map,v=[];for(a=m;a--;){const y=g(r,l,a),T=n(y);let j=o.get(T);j?i&&v.push(()=>j.p(y,e)):(j=f(T,y),j.c()),h.set(T,p[a]=j),T in u&&k.set(T,Math.abs(a-u[T]))}const I=new Set,A=new Set;function O(y){E(y,1),y.m(s,d),o.set(y.key,y),d=y.first,m--}for(;_&&m;){const y=p[m-1],T=t[_-1],j=y.key,be=T.key;y===T?(d=y.first,_--,m--):h.has(be)?!o.has(j)||I.has(j)?O(y):A.has(be)?_--:k.get(j)>k.get(be)?(A.add(j),O(y)):(I.add(be),_--):(c(T,o),_--)}for(;_--;){const y=t[_];h.has(y.key)||c(y,o)}for(;m;)O(p[m-1]);return K(v),p}function Qt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function P(t){t&&t.c()}function F(t,e,n,i){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),i||q(()=>{const o=t.$$.on_mount.map(dt).filter(Z);t.$$.on_destroy?t.$$.on_destroy.push(...o):K(o),t.$$.on_mount=[]}),l.forEach(q)}function L(t,e){const n=t.$$;n.fragment!==null&&(Ut(n.after_update),K(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Xt(t,e){t.$$.dirty[0]===-1&&(re.push(t),Ht(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(t,e,n,i,r,l,o,s=[-1]){const c=ge;de(t);const f=t.$$={fragment:null,ctx:[],props:l,update:C,not_equal:r,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:xe(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};o&&o(f.root);let d=!1;if(f.ctx=n?n(t,e.props||{},(g,_,...m)=>{const a=m.length?m[0]:_;return f.ctx&&r(f.ctx[g],f.ctx[g]=a)&&(!f.skip_bound&&f.bound[g]&&f.bound[g](a),d&&Xt(t,g)),_}):[],f.update(),d=!0,K(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const g=Kt(e.target);f.fragment&&f.fragment.l(g),g.forEach(b)}else f.fragment&&f.fragment.c();e.intro&&E(t.$$.fragment),F(t,e.target,e.anchor,e.customElement),vt()}de(c)}class W{$destroy(){L(this,1),this.$destroy=C}$on(e,n){if(!Z(n))return C;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Lt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const te=new Promise((t,e)=>{if(window!=null&&window.Dexie){const n=new window.Dexie("helloworldtodos",{});n.version(2).stores({tags:"&key",todos:"++id,*tags"}),t(n)}else e(new Error("Dexie is not loaded in window"))});class B extends Error{}Y(B,"EMPTY_TAG_KEY","the given value resulted in an empty tag-key"),Y(B,"NO_TAG_FOR_KEY","a tag for the given Key or Value does not exist in the Database"),Y(B,"INVALID_CONSTRUCT","construct must be provided with either 'key' or 'value'");class Ot{constructor(e){Y(this,"key");Y(this,"value");if(e.value&&e.key)this.value=e.value,this.key=ve(e.key);else if(e.key)this.value=e.key,this.key=ve(e.key);else if(e.value)this.value=e.value,this.key=ve(e.value);else throw new B(B.INVALID_CONSTRUCT);if(this.key=="")throw new B(B.EMPTY_TAG_KEY)}async drop(){const e=await te;await e.tags(this.key).first()&&await e.tags.delete(this.key),await e.todos.where("tags").equals(this.key).each(i=>(i.tags=i.tags.filter(r=>r!=this.key),e.todos.put(i))),Ee.refresh()}insert(){return St().then(e=>e.put(this)).then(()=>Ee.refresh())}}function Et(t){return te.then(e=>e.tags.where("key").equals(t).first()).then(e=>{if(e)return e;throw new B(B.NO_TAG_FOR_KEY)})}function Zt(t){return Et(ve(t))}class en{constructor(){Y(this,"subs",new Set)}subscribe(e){return console.log("new sub",e),this.subs.add(e),e([]),this._dat().then(e),()=>{console.log("unsub",e),this.subs.delete(e)}}async refresh(){const e=await this._dat();this.subs.forEach(n=>n(e))}_dat(){return St().then(e=>e.toArray()).then(e=>e.map(n=>new Ot(n)))}}const Ee=new en,Se={tagstore:Ee,findByKey:Et,findByValue:Zt};async function St(){return(await te).tags}function ve(t){return t.trim().toLowerCase()}function Je(t,e,n){const i=t.slice();return i[1]=e[n],i}function Ue(t){let e,n;return{c(){e=S("option"),e.__value=n=t[1].value,e.value=e.__value},m(i,r){w(i,e,r)},p(i,r){r&1&&n!==(n=i[1].value)&&(e.__value=n,e.value=e.__value)},d(i){i&&b(e)}}}function tn(t){let e,n=t[0],i=[];for(let r=0;r<n.length;r+=1)i[r]=Ue(Je(t,n,r));return{c(){e=S("datalist");for(let r=0;r<i.length;r+=1)i[r].c();$(e,"id","available_tags")},m(r,l){w(r,e,l);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,[l]){if(l&1){n=r[0];let o;for(o=0;o<n.length;o+=1){const s=Je(r,n,o);i[o]?i[o].p(s,l):(i[o]=Ue(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:C,o:C,d(r){r&&b(e),qe(i,r)}}}function nn(t,e,n){let i;return pe(t,Ee,r=>n(0,i=r)),[i]}class rn extends W{constructor(e){super(),H(this,e,nn,tn,z,{})}}const ie=[];function Ct(t,e=C){let n;const i=new Set;function r(s){if(z(t,s)&&(t=s,n)){const c=!ie.length;for(const f of i)f[1](),ie.push(f,t);if(c){for(let f=0;f<ie.length;f+=2)ie[f][0](ie[f+1]);ie.length=0}}}function l(s){r(s(t))}function o(s,c=C){const f=[s,c];return i.add(f),i.size===1&&(n=e(r)||C),s(t),()=>{i.delete(f),i.size===0&&n&&(n(),n=null)}}return{set:r,update:l,subscribe:o}}function on(t){return typeof t=="object"}function Le(t){return t instanceof Array}function ze(t){const e=t-1;return e*e*e+1}function ln(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Q(t,{delay:e=0,duration:n=400,easing:i=ze,axis:r="y"}={}){const l=getComputedStyle(t),o=+l.opacity,s=r==="y"?"height":"width",c=parseFloat(l[s]),f=r==="y"?["top","bottom"]:["left","right"],d=f.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),g=parseFloat(l[`padding${d[0]}`]),_=parseFloat(l[`padding${d[1]}`]),m=parseFloat(l[`margin${d[0]}`]),a=parseFloat(l[`margin${d[1]}`]),u=parseFloat(l[`border${d[0]}Width`]),p=parseFloat(l[`border${d[1]}Width`]);return{delay:e,duration:n,easing:i,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*o};${s}: ${h*c}px;padding-${f[0]}: ${h*g}px;padding-${f[1]}: ${h*_}px;margin-${f[0]}: ${h*m}px;margin-${f[1]}: ${h*a}px;border-${f[0]}-width: ${h*u}px;border-${f[1]}-width: ${h*p}px;`}}function sn(t){var{fallback:e}=t,n=ln(t,["fallback"]);const i=new Map,r=new Map;function l(s,c,f){const{delay:d=0,duration:g=y=>Math.sqrt(y)*30,easing:_=ze}=Ve(Ve({},n),f),m=s.getBoundingClientRect(),a=c.getBoundingClientRect(),u=m.left-a.left,p=m.top-a.top,h=m.width/a.width,k=m.height/a.height,v=Math.sqrt(u*u+p*p),I=getComputedStyle(c),A=I.transform==="none"?"":I.transform,O=+I.opacity;return{delay:d,duration:Z(g)?g(v):g,easing:_,css:(y,T)=>`
				opacity: ${y*O};
				transform-origin: top left;
				transform: ${A} translate(${T*u}px,${T*p}px) scale(${y+(1-y)*h}, ${y+(1-y)*k});
			`}}function o(s,c,f){return(d,g)=>(s.set(g.key,d),()=>{if(c.has(g.key)){const _=c.get(g.key);return c.delete(g.key),l(_,d,g)}return s.delete(g.key),e&&e(d,g,f)})}return[o(r,i,!1),o(i,r,!0)]}function Qe(t){let e,n;function i(s,c){return s[1]?fn:cn}let r=i(t),l=r(t),o=!t[0]&&Xe(t);return{c(){e=S("span"),l.c(),n=M(),o&&o.c(),$(e,"class","tag")},m(s,c){w(s,e,c),l.m(e,null),R(e,n),o&&o.m(e,null)},p(s,c){r===(r=i(s))&&l?l.p(s,c):(l.d(1),l=r(s),l&&(l.c(),l.m(e,n))),s[0]?o&&(o.d(1),o=null):o?o.p(s,c):(o=Xe(s),o.c(),o.m(e,null))},d(s){s&&b(e),l.d(),o&&o.d()}}}function cn(t){let e,n=t[2].value+"",i,r,l;return{c(){e=S("a"),i=ee(n),$(e,"href","#")},m(o,s){w(o,e,s),R(e,i),r||(l=D(e,"click",U(t[7])),r=!0)},p(o,s){s&4&&n!==(n=o[2].value+"")&&Ae(i,n)},d(o){o&&b(e),r=!1,l()}}}function fn(t){let e=t[2].value+"",n;return{c(){n=ee(e)},m(i,r){w(i,n,r)},p(i,r){r&4&&e!==(e=i[2].value+"")&&Ae(n,e)},d(i){i&&b(n)}}}function Xe(t){let e,n,i;return{c(){e=S("a"),e.textContent=" ",$(e,"href","#"),$(e,"class","fa fa-times")},m(r,l){w(r,e,l),n||(i=D(e,"click",U(t[8])),n=!0)},p:C,d(r){r&&b(e),n=!1,i()}}}function an(t){let e,n=t[2]&&Qe(t);return{c(){n&&n.c(),e=me()},m(i,r){n&&n.m(i,r),w(i,e,r)},p(i,[r]){i[2]?n?n.p(i,r):(n=Qe(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:C,o:C,d(i){n&&n.d(i),i&&b(e)}}}function un(t,e,n){let{tag:i=void 0}=e,{value:r=""}=e,{key:l=""}=e,{noremove:o=!1}=e,{noclick:s=!1}=e,c;const f=kt(),d=()=>f("click",c),g=()=>f("remove",c);return t.$$set=_=>{"tag"in _&&n(4,i=_.tag),"value"in _&&n(5,r=_.value),"key"in _&&n(6,l=_.key),"noremove"in _&&n(0,o=_.noremove),"noclick"in _&&n(1,s=_.noclick)},t.$$.update=()=>{if(t.$$.dirty&112){if(i)n(2,c=i);else if(l)try{Se.findByKey(l).then(_=>n(2,c=_))}catch(_){console.error(_),n(2,c=void 0)}else if(r)try{Se.findByValue(r).then(_=>n(2,c=_))}catch(_){console.error(_),n(2,c=void 0)}}},[o,s,c,f,i,r,l,d,g]}class Nt extends W{constructor(e){super(),H(this,e,un,an,z,{tag:4,value:5,key:6,noremove:0,noclick:1})}}class dn{constructor(){Y(this,"subs",new Set);Y(this,"subscribe",e=>(e([]),(async()=>e(await this._dat()||[]))(),this.subs.add(e),()=>{this.subs.delete(e)}));Y(this,"_dat",()=>te.then(e=>we.length?e.todos.where("tags").anyOf(we).distinct().filter(n=>we.reduce((r,l,o)=>r&&n.tags.indexOf(l)!=-1,!0)).toArray():e.todos.toArray()))}async refresh(){const e=await this._dat()||[];this.subs.forEach(n=>n(e))}}function _n(t){return on(t)&&typeof t.description=="string"&&typeof t.done=="boolean"}const ye=new dn;let we=[];async function hn(t,e=!0){await(await te).table("todos").put(t),e&&await ye.refresh()}async function gn(t,e=!0){await(await te).table("todos").delete(t.id),e&&await ye.refresh()}async function pn(t,e=!0){we=t,e&&await ye.refresh()}const oe={todos:ye,set:hn,remove:gn,filter:pn};if(localStorage){const t="rawTodos";let e;try{e=JSON.parse(localStorage.getItem(t))}catch(n){localStorage.removeItem(t),console.error("Error while initializing Todos: ",n)}Le(e)&&(e=e.filter(_n),e.length&&te.then(n=>n.table("todos").bulkPut(e)).then(()=>{localStorage.removeItem(t)}))}function Ze(t,e,n){const i=t.slice();return i[3]=e[n],i}function et(t,e){let n,i=e[3].msg+"",r,l,o,s,c;return{key:t,first:null,c(){n=S("article"),r=ee(i),l=M(),$(n,"class",o=He(e[3].cssClass)+" svelte-lwkk25"),this.first=n},m(f,d){w(f,n,d),R(n,r),R(n,l),c=!0},p(f,d){e=f,(!c||d&1)&&i!==(i=e[3].msg+"")&&Ae(r,i),(!c||d&1&&o!==(o=He(e[3].cssClass)+" svelte-lwkk25"))&&$(n,"class",o)},i(f){c||(q(()=>{s||(s=ae(n,Q,{duration:250},!0)),s.run(1)}),c=!0)},o(f){s||(s=ae(n,Q,{duration:250},!1)),s.run(0),c=!1},d(f){f&&b(n),f&&s&&s.end()}}}function mn(t){let e,n=[],i=new Map,r,l=t[0];const o=s=>s[3].id;for(let s=0;s<l.length;s+=1){let c=Ze(t,l,s),f=o(c);i.set(f,n[s]=et(f,c))}return{c(){e=S("div");for(let s=0;s<n.length;s+=1)n[s].c();$(e,"class","toastcontainer svelte-lwkk25")},m(s,c){w(s,e,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);r=!0},p(s,[c]){c&1&&(l=s[0],V(),n=Fe(n,c,o,1,s,l,i,e,Tt,et,null,Ze),x())},i(s){if(!r){for(let c=0;c<l.length;c+=1)E(n[c]);r=!0}},o(s){for(let c=0;c<n.length;c+=1)N(n[c]);r=!1},d(s){s&&b(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}let yn=1;const Pe=Ct([]);function le(t,e,n=4){Pe.update(i=>(i.push({id:yn++,msg:t,cssClass:e,timeout:n*10}),i))}function bn(t,e,n){let i;pe(t,Pe,o=>n(0,i=o));let r;function l(){!r&&i.length&&(r=window.setTimeout(()=>{i.forEach(o=>o.timeout--),_t(Pe,i=i.filter(o=>o.timeout>0),i),r=void 0,l()},100))}return t.$$.update=()=>{t.$$.dirty&1&&i.length&&l()},[i]}class kn extends W{constructor(e){super(),H(this,e,bn,mn,z,{})}}function tt(t){let e,n,i,r,l,o,s,c;return{c(){e=S("form"),n=S("input"),i=M(),r=S("button"),$(n,"type","text"),$(n,"list","available_tags"),$(n,"autocomplete",""),$(r,"type","submit"),$(r,"class","fa fa-plus-circle svelte-1jqn6dg"),$(e,"class","taginput svelte-1jqn6dg"),fe(e,"open",t[1])},m(f,d){w(f,e,d),R(e,n),$e(n,t[0]),R(e,i),R(e,r),o=!0,s||(c=[D(n,"input",t[4]),D(e,"submit",U(t[2]))],s=!0)},p(f,d){d&1&&n.value!==f[0]&&$e(n,f[0]),(!o||d&2)&&fe(e,"open",f[1])},i(f){o||(q(()=>{l||(l=ae(e,Q,{},!0)),l.run(1)}),o=!0)},o(f){l||(l=ae(e,Q,{},!1)),l.run(0),o=!1},d(f){f&&b(e),f&&l&&l.end(),s=!1,K(c)}}}function vn(t){let e,n,i=t[1]&&tt(t);return{c(){i&&i.c(),e=me()},m(r,l){i&&i.m(r,l),w(r,e,l),n=!0},p(r,[l]){r[1]?i?(i.p(r,l),l&2&&E(i,1)):(i=tt(r),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(V(),N(i,1,1,()=>{i=null}),x())},i(r){n||(E(i),n=!0)},o(r){N(i),n=!1},d(r){i&&i.d(r),r&&b(e)}}}function wn(t,e,n){const i=kt();let{visible:r=!0}=e,{value:l=""}=e,{noautocreate:o=!1}=e;const s=async()=>{let f;try{f=await Se.findByValue(l)}catch(d){if(d instanceof B&&d.message==B.NO_TAG_FOR_KEY)try{if(o){le("tag is unknown","alert",2);return}else f=new Ot({value:l}),await f.insert()}catch(g){g instanceof B&&g.message==B.EMPTY_TAG_KEY?le("can't submit an empty Tag","alert",2):(console.error(g),le("ERROR: see console","alert",2));return}else{console.error(d),le("ERROR: see console","alert",2);return}}i("submit",f)};function c(){l=this.value,n(0,l)}return t.$$set=f=>{"visible"in f&&n(1,r=f.visible),"value"in f&&n(0,l=f.value),"noautocreate"in f&&n(3,o=f.noautocreate)},[l,r,s,o,c]}class Rt extends W{constructor(e){super(),H(this,e,wn,vn,z,{visible:1,value:0,noautocreate:3})}}function nt(t,e,n){const i=t.slice();return i[8]=e[n],i}function it(t){let e,n,i,r,l,o,s,c;function f(a){t[6](a)}let d={};t[1]!==void 0&&(d.value=t[1]),e=new Rt({props:d}),Ie.push(()=>Qt(e,"value",f)),e.$on("submit",t[3]);const g=[Tn,$n],_=[];function m(a,u){return a[0].length?0:1}return l=m(t),o=_[l]=g[l](t),{c(){P(e.$$.fragment),i=M(),r=S("section"),o.c(),$(r,"class","taglist svelte-gr44lj"),fe(r,"open",t[2])},m(a,u){F(e,a,u),w(a,i,u),w(a,r,u),_[l].m(r,null),c=!0},p(a,u){const p={};!n&&u&2&&(n=!0,p.value=a[1],Wt(()=>n=!1)),e.$set(p);let h=l;l=m(a),l===h?_[l].p(a,u):(V(),N(_[h],1,1,()=>{_[h]=null}),x(),o=_[l],o?o.p(a,u):(o=_[l]=g[l](a),o.c()),E(o,1),o.m(r,null)),(!c||u&4)&&fe(r,"open",a[2])},i(a){c||(E(e.$$.fragment,a),E(o),a&&q(()=>{s||(s=ae(r,Q,{},!0)),s.run(1)}),c=!0)},o(a){N(e.$$.fragment,a),N(o),a&&(s||(s=ae(r,Q,{},!1)),s.run(0)),c=!1},d(a){L(e,a),a&&b(i),a&&b(r),_[l].d(),a&&s&&s.end()}}}function $n(t){let e;return{c(){e=ee("No Tags yet")},m(n,i){w(n,e,i)},p:C,i:C,o:C,d(n){n&&b(e)}}}function Tn(t){let e,n,i=t[0],r=[];for(let o=0;o<i.length;o+=1)r[o]=rt(nt(t,i,o));const l=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=me()},m(o,s){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(o,s);w(o,e,s),n=!0},p(o,s){if(s&17){i=o[0];let c;for(c=0;c<i.length;c+=1){const f=nt(o,i,c);r[c]?(r[c].p(f,s),E(r[c],1)):(r[c]=rt(f),r[c].c(),E(r[c],1),r[c].m(e.parentNode,e))}for(V(),c=i.length;c<r.length;c+=1)l(c);x()}},i(o){if(!n){for(let s=0;s<i.length;s+=1)E(r[s]);n=!0}},o(o){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)N(r[s]);n=!1},d(o){qe(r,o),o&&b(e)}}}function rt(t){let e,n;return e=new Nt({props:{noclick:!0,key:t[8]}}),e.$on("remove",t[7]),{c(){P(e.$$.fragment)},m(i,r){F(e,i,r),n=!0},p(i,r){const l={};r&1&&(l.key=i[8]),e.$set(l)},i(i){n||(E(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){L(e,i)}}}function On(t){let e,n,i,r,l,o,s=t[2]&&it(t);return{c(){e=S("a"),e.textContent="Tags",n=M(),s&&s.c(),i=me(),$(e,"role","button"),$(e,"href","#"),$(e,"class","svelte-gr44lj")},m(c,f){w(c,e,f),w(c,n,f),s&&s.m(c,f),w(c,i,f),r=!0,l||(o=D(e,"click",U(t[5])),l=!0)},p(c,[f]){c[2]?s?(s.p(c,f),f&4&&E(s,1)):(s=it(c),s.c(),E(s,1),s.m(i.parentNode,i)):s&&(V(),N(s,1,1,()=>{s=null}),x())},i(c){r||(E(s),r=!0)},o(c){N(s),r=!1},d(c){c&&b(e),c&&b(n),s&&s.d(c),c&&b(i),l=!1,o()}}}const X=Ct([]);function At(t){X.update(e=>(e.indexOf(t.key)==-1&&e.push(t.key),e))}try{let t=localStorage.getItem("tagfilter"),e=[];if(t&&(t=JSON.parse(t)),Le(t)){X.set(t);const n=[];(async()=>{let i=await Promise.all(t.map(r=>Se.findByValue(r).catch(l=>{console.warn(`tag '${r}' does not exist`),n.push(r)})));n.forEach(r=>X.update(l=>e=l.filter(o=>o!=r))),Le(i)&&(i=i.filter(r=>typeof r<"u"))})()}}catch{}X.subscribe(t=>{localStorage.setItem("tagfilter",JSON.stringify(t)),oe.filter(t)});function En(t,e,n){let i,r,l=C;pe(t,X,_=>n(0,r=_)),t.$$.on_destroy.push(()=>l());let o="";const s=async _=>{let m=_.detail;At(m),n(1,o="")},c=async _=>{_t(X,r=r.filter(m=>m!=_.key),r)},f=()=>n(2,i=!i);function d(_){o=_,n(1,o)}const g=_=>c(_.detail);return t.$$.update=()=>{t.$$.dirty&1&&n(2,i=r.length>0)},[r,o,i,s,c,f,d,g]}class Sn extends W{constructor(e){super(),H(this,e,En,On,z,{})}}function Cn(t){let e,n,i,r,l,o,s;return{c(){e=S("div"),n=S("form"),i=S("input"),r=M(),l=S("button"),$(i,"tabindex","0"),$(i,"type","text"),$(l,"type","submit"),$(l,"class","fa fa-circle-plus svelte-1telry2"),$(n,"class","svelte-1telry2")},m(c,f){w(c,e,f),R(e,n),R(n,i),$e(i,t[0].description),R(n,r),R(n,l),o||(s=[D(i,"input",t[3]),D(n,"submit",U(t[1]))],o=!0)},p(c,[f]){f&1&&i.value!==c[0].description&&$e(i,c[0].description)},i:C,o:C,d(c){c&&b(e),o=!1,K(s)}}}function Nn(t,e,n){let i;pe(t,X,s=>n(2,i=s));let r={description:"",done:!1,tags:[]};const l=()=>{r.description.trim()==""?le("noting to add","alert",2):(n(0,r.description=r.description.trim(),r),oe.set(r),n(0,r={description:"",done:!1,tags:r.tags}))};function o(){r.description=this.value,n(0,r),n(2,i)}return t.$$.update=()=>{t.$$.dirty&4&&n(0,r.tags=[...i],r)},[r,l,i,o]}class Rn extends W{constructor(e){super(),H(this,e,Nn,Cn,z,{})}}function Mt(t,{from:e,to:n},i={}){const r=getComputedStyle(t),l=r.transform==="none"?"":r.transform,[o,s]=r.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*o/n.width-(n.left+o),f=e.top+e.height*s/n.height-(n.top+s),{delay:d=0,duration:g=m=>Math.sqrt(m)*120,easing:_=ze}=i;return{delay:d,duration:Z(g)?g(Math.sqrt(c*c+f*f)):g,easing:_,css:(m,a)=>{const u=a*c,p=a*f,h=m+a*e.width/n.width,k=m+a*e.height/n.height;return`transform: ${l} translate(${u}px, ${p}px) scale(${h}, ${k});`}}}function ot(t,e,n){const i=t.slice();return i[12]=e[n],i}function lt(t){let e,n,i;return n=new Nt({props:{key:t[12],noremove:t[0].done}}),n.$on("click",t[10]),n.$on("remove",t[5]),{c(){e=S("li"),P(n.$$.fragment),$(e,"class","svelte-1timjgw")},m(r,l){w(r,e,l),F(n,e,null),i=!0},p(r,l){const o={};l&1&&(o.key=r[12]),l&1&&(o.noremove=r[0].done),n.$set(o)},i(r){i||(E(n.$$.fragment,r),i=!0)},o(r){N(n.$$.fragment,r),i=!1},d(r){r&&b(e),L(n)}}}function st(t){let e,n,i;return n=new Rt({}),n.$on("submit",t[6]),{c(){e=S("div"),P(n.$$.fragment),$(e,"class","taginput svelte-1timjgw")},m(r,l){w(r,e,l),F(n,e,null),i=!0},p:C,i(r){i||(E(n.$$.fragment,r),i=!0)},o(r){N(n.$$.fragment,r),i=!1},d(r){r&&b(e),L(n)}}}function An(t){let e,n,i,r,l,o=t[0].description+"",s,c,f,d,g,_,m,a,u,p,h,k=t[0].tags,v=[];for(let O=0;O<k.length;O+=1)v[O]=lt(ot(t,k,O));const I=O=>N(v[O],1,1,()=>{v[O]=null});let A=t[1]&&st(t);return{c(){e=S("article"),n=S("span"),i=S("input"),r=M(),l=S("span"),s=ee(o),c=M(),f=S("button"),d=M(),g=S("ul");for(let O=0;O<v.length;O+=1)v[O].c();_=M(),m=S("button"),a=M(),A&&A.c(),$(i,"type","checkbox"),$(l,"class","txt svelte-1timjgw"),$(f,"class","fa fa-trash-can"),$(f,"title","delete"),$(g,"class","svelte-1timjgw"),$(m,"class","fa fa-tag"),$(m,"title","new Tag"),$(e,"class","svelte-1timjgw"),fe(e,"done",t[0].done)},m(O,y){w(O,e,y),R(e,n),R(n,i),i.checked=t[0].done,R(e,r),R(e,l),R(l,s),R(e,c),R(e,f),R(e,d),R(e,g);for(let T=0;T<v.length;T+=1)v[T]&&v[T].m(g,null);R(e,_),R(e,m),R(e,a),A&&A.m(e,null),u=!0,p||(h=[D(i,"change",t[7]),D(i,"click",t[8]),D(f,"click",U(t[9])),D(m,"click",U(t[11]))],p=!0)},p(O,[y]){if(y&1&&(i.checked=O[0].done),(!u||y&1)&&o!==(o=O[0].description+"")&&Ae(s,o),y&49){k=O[0].tags;let T;for(T=0;T<k.length;T+=1){const j=ot(O,k,T);v[T]?(v[T].p(j,y),E(v[T],1)):(v[T]=lt(j),v[T].c(),E(v[T],1),v[T].m(g,null))}for(V(),T=k.length;T<v.length;T+=1)I(T);x()}O[1]?A?(A.p(O,y),y&2&&E(A,1)):(A=st(O),A.c(),E(A,1),A.m(e,null)):A&&(V(),N(A,1,1,()=>{A=null}),x()),(!u||y&1)&&fe(e,"done",O[0].done)},i(O){if(!u){for(let y=0;y<k.length;y+=1)E(v[y]);E(A),u=!0}},o(O){v=v.filter(Boolean);for(let y=0;y<v.length;y+=1)N(v[y]);N(A),u=!1},d(O){O&&b(e),qe(v,O),A&&A.d(),p=!1,K(h)}}}function Mn(t,e,n){let{todo:i}=e,r=!1;const l=u=>{confirm("remove todo permanently ?")&&oe.remove(u)},o=async u=>{u.done=!u.done,oe.set(u)},s=async u=>{try{At(u)}catch{le("cant add tag (See Console)","alert",2)}},c=async u=>{if(confirm("remove Tag?")){const p=u.detail;n(0,i.tags=i.tags.filter(h=>h!=p.key),i),oe.set(i)}},f=async u=>{const p=u.detail;i.tags.indexOf(p.key)==-1&&(i.tags.push(p.key),oe.set(i)),n(1,r=!1)};function d(){i.done=this.checked,n(0,i)}const g=()=>o(i),_=()=>l(i),m=u=>s(u.detail),a=()=>n(1,r=!r);return t.$$set=u=>{"todo"in u&&n(0,i=u.todo)},[i,r,l,o,s,c,f,d,g,_,m,a]}class It extends W{constructor(e){super(),H(this,e,Mn,An,z,{todo:0})}}function ct(t,e,n){const i=t.slice();return i[6]=e[n],i}function ft(t,e,n){const i=t.slice();return i[6]=e[n],i}function at(t,e){let n,i,r,l,o,s=C,c;return i=new It({props:{todo:e[6]}}),{key:t,first:null,c(){n=S("div"),P(i.$$.fragment),this.first=n},m(f,d){w(f,n,d),F(i,n,null),c=!0},p(f,d){e=f;const g={};d&2&&(g.todo=e[6]),i.$set(g)},r(){o=n.getBoundingClientRect()},f(){bt(n),s(),Ke(n,o)},a(){s(),s=yt(n,o,Mt,{duration:jt})},i(f){c||(E(i.$$.fragment,f),q(()=>{l&&l.end(1),r=wt(n,e[3],{key:e[6].id}),r.start()}),c=!0)},o(f){N(i.$$.fragment,f),r&&r.invalidate(),l=$t(n,e[2],{key:e[6].id}),c=!1},d(f){f&&b(n),L(i),f&&l&&l.end()}}}function ut(t,e){let n,i,r,l,o,s,c=C,f;return i=new It({props:{todo:e[6]}}),{key:t,first:null,c(){n=S("div"),P(i.$$.fragment),r=M(),this.first=n},m(d,g){w(d,n,g),F(i,n,null),R(n,r),f=!0},p(d,g){e=d;const _={};g&1&&(_.todo=e[6]),i.$set(_)},r(){s=n.getBoundingClientRect()},f(){bt(n),c(),Ke(n,s)},a(){c(),c=yt(n,s,Mt,{duration:jt})},i(d){f||(E(i.$$.fragment,d),q(()=>{o&&o.end(1),l=wt(n,e[3],{key:e[6].id}),l.start()}),f=!0)},o(d){N(i.$$.fragment,d),l&&l.invalidate(),o=$t(n,e[2],{key:e[6].id}),f=!1},d(d){d&&b(n),L(i),d&&o&&o.end()}}}function In(t){let e=[],n=new Map,i,r,l,o=[],s=new Map,c,f,d=t[1];const g=a=>a[6].id;for(let a=0;a<d.length;a+=1){let u=ft(t,d,a),p=g(u);n.set(p,e[a]=at(p,u))}let _=t[0];const m=a=>a[6].id;for(let a=0;a<_.length;a+=1){let u=ct(t,_,a),p=m(u);s.set(p,o[a]=ut(p,u))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();i=M(),r=S("h3"),r.textContent="Done:",l=M();for(let a=0;a<o.length;a+=1)o[a].c();c=me()},m(a,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(a,u);w(a,i,u),w(a,r,u),w(a,l,u);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(a,u);w(a,c,u),f=!0},p(a,[u]){if(u&2){d=a[1],V();for(let p=0;p<e.length;p+=1)e[p].r();e=Fe(e,u,g,1,a,d,n,i.parentNode,We,at,i,ft);for(let p=0;p<e.length;p+=1)e[p].a();x()}if(u&1){_=a[0],V();for(let p=0;p<o.length;p+=1)o[p].r();o=Fe(o,u,m,1,a,_,s,c.parentNode,We,ut,c,ct);for(let p=0;p<o.length;p+=1)o[p].a();x()}},i(a){if(!f){for(let u=0;u<d.length;u+=1)E(e[u]);for(let u=0;u<_.length;u+=1)E(o[u]);f=!0}},o(a){for(let u=0;u<e.length;u+=1)N(e[u]);for(let u=0;u<o.length;u+=1)N(o[u]);f=!1},d(a){for(let u=0;u<e.length;u+=1)e[u].d(a);a&&b(i),a&&b(r),a&&b(l);for(let u=0;u<o.length;u+=1)o[u].d(a);a&&b(c)}}}const jt=250;function jn(t,e,n){let i,r,l,o;pe(t,ye,f=>n(5,o=f));const[s,c]=sn({fallback:Q});return t.$$.update=()=>{t.$$.dirty&32&&n(4,i=[...o]),t.$$.dirty&16&&n(1,r=i.filter(f=>!f.done)),t.$$.dirty&16&&n(0,l=i.filter(f=>f.done))},[l,r,s,c,i,o]}class Bn extends W{constructor(e){super(),H(this,e,jn,In,z,{})}}function Fn(t){let e,n,i,r,l,o,s,c,f,d,g,_,m,a,u,p;return l=new kn({}),s=new Sn({}),g=new Rn({}),m=new Bn({}),u=new rn({}),{c(){e=S("base"),n=M(),i=S("nav"),i.innerHTML=`<ul><li><strong>HelloWorld Todo&#39;s</strong></li></ul> 
    <ul><li><a href="https://github.com/Rocco-Gossmann/SvelteHelloWorldTodos" target="_blank">GitHub</a></li></ul>`,r=M(),P(l.$$.fragment),o=M(),P(s.$$.fragment),c=M(),f=S("h1"),f.textContent="Todos",d=M(),P(g.$$.fragment),_=M(),P(m.$$.fragment),a=M(),P(u.$$.fragment),$(e,"href","/SvelteHelloWorldTodos"),$(f,"class","text-center")},m(h,k){R(document.head,e),w(h,n,k),w(h,i,k),w(h,r,k),F(l,h,k),w(h,o,k),F(s,h,k),w(h,c,k),w(h,f,k),w(h,d,k),F(g,h,k),w(h,_,k),F(m,h,k),w(h,a,k),F(u,h,k),p=!0},p:C,i(h){p||(E(l.$$.fragment,h),E(s.$$.fragment,h),E(g.$$.fragment,h),E(m.$$.fragment,h),E(u.$$.fragment,h),p=!0)},o(h){N(l.$$.fragment,h),N(s.$$.fragment,h),N(g.$$.fragment,h),N(m.$$.fragment,h),N(u.$$.fragment,h),p=!1},d(h){b(e),h&&b(n),h&&b(i),h&&b(r),L(l,h),h&&b(o),L(s,h),h&&b(c),h&&b(f),h&&b(d),L(g,h),h&&b(_),L(m,h),h&&b(a),L(u,h)}}}class Ln extends W{constructor(e){super(),H(this,e,null,Fn,z,{})}}new Ln({target:document.getElementById("app")});
