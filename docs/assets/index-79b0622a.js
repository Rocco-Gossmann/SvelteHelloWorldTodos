var ma=Object.defineProperty;var ga=(a,u,l)=>u in a?ma(a,u,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[u]=l;var _a=(a,u)=>()=>(u||a((u={exports:{}}).exports,u),u.exports);var hn=(a,u,l)=>(ga(a,typeof u!="symbol"?u+"":u,l),l);var iu=_a((Yi,Sr)=>{(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))h(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&h(b)}).observe(document,{childList:!0,subtree:!0});function l(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function h(d){if(d.ep)return;d.ep=!0;const g=l(d);fetch(d.href,g)}})();function ce(){}const _n=a=>a;function wi(a,u){for(const l in u)a[l]=u[l];return a}function Bi(a){return a()}function Ei(){return Object.create(null)}function ke(a){a.forEach(Bi)}function nt(a){return typeof a=="function"}function Nt(a,u){return a!=a?u==u:a!==u||a&&typeof a=="object"||typeof a=="function"}function ba(a){return Object.keys(a).length===0}function wa(a,...u){if(a==null)return ce;const l=a.subscribe(...u);return l.unsubscribe?()=>l.unsubscribe():l}function Mi(a,u,l){a.$$.on_destroy.push(wa(u,l))}function xi(a){return a??""}function Ea(a,u,l){return a.set(l),u}const Fi=typeof window<"u";let bn=Fi?()=>window.performance.now():()=>Date.now(),Ar=Fi?a=>requestAnimationFrame(a):ce;const pt=new Set;function $i(a){pt.forEach(u=>{u.c(a)||(pt.delete(u),u.f())}),pt.size!==0&&Ar($i)}function wn(a){let u;return pt.size===0&&Ar($i),{promise:new Promise(l=>{pt.add(u={c:a,f:l})}),abort(){pt.delete(u)}}}function ie(a,u){a.appendChild(u)}function Ni(a){if(!a)return document;const u=a.getRootNode?a.getRootNode():a.ownerDocument;return u&&u.host?u:a.ownerDocument}function xa(a){const u=ue("style");return ka(Ni(a),u),u.sheet}function ka(a,u){return ie(a.head||a,u),u.sheet}function pe(a,u,l){a.insertBefore(u,l||null)}function le(a){a.parentNode&&a.parentNode.removeChild(a)}function ue(a){return document.createElement(a)}function jt(a){return document.createTextNode(a)}function me(){return jt(" ")}function Sa(){return jt("")}function We(a,u,l,h){return a.addEventListener(u,l,h),()=>a.removeEventListener(u,l,h)}function Cr(a){return function(u){return u.preventDefault(),a.call(this,u)}}function fe(a,u,l){l==null?a.removeAttribute(u):a.getAttribute(u)!==l&&a.setAttribute(u,l)}function Aa(a){return Array.from(a.childNodes)}function Tr(a,u){u=""+u,a.wholeText!==u&&(a.data=u)}function ki(a,u){a.value=u??""}function yn(a,u,l){a.classList[l?"add":"remove"](u)}function Ca(a,u,{bubbles:l=!1,cancelable:h=!1}={}){const d=document.createEvent("CustomEvent");return d.initCustomEvent(a,l,h,u),d}const mn=new Map;let gn=0;function Ta(a){let u=5381,l=a.length;for(;l--;)u=(u<<5)-u^a.charCodeAt(l);return u>>>0}function Ka(a,u){const l={stylesheet:xa(u),rules:{}};return mn.set(a,l),l}function Mt(a,u,l,h,d,g,b,m=0){const x=16.666/h;let S=`{
`;for(let T=0;T<=1;T+=x){const z=u+(l-u)*g(T);S+=T*100+`%{${b(z,1-z)}}
`}const $=S+`100% {${b(l,1-l)}}
}`,F=`__svelte_${Ta($)}_${m}`,j=Ni(a),{stylesheet:C,rules:E}=mn.get(j)||Ka(j,a);E[F]||(E[F]=!0,C.insertRule(`@keyframes ${F} ${$}`,C.cssRules.length));const O=a.style.animation||"";return a.style.animation=`${O?`${O}, `:""}${F} ${h}ms linear ${d}ms 1 both`,gn+=1,F}function Ft(a,u){const l=(a.style.animation||"").split(", "),h=l.filter(u?g=>g.indexOf(u)<0:g=>g.indexOf("__svelte")===-1),d=l.length-h.length;d&&(a.style.animation=h.join(", "),gn-=d,gn||Da())}function Da(){Ar(()=>{gn||(mn.forEach(a=>{const{ownerNode:u}=a.stylesheet;u&&le(u)}),mn.clear())})}function ji(a,u,l,h){if(!u)return ce;const d=a.getBoundingClientRect();if(u.left===d.left&&u.right===d.right&&u.top===d.top&&u.bottom===d.bottom)return ce;const{delay:g=0,duration:b=300,easing:m=_n,start:x=bn()+g,end:S=x+b,tick:$=ce,css:F}=l(a,{from:u,to:d},h);let j=!0,C=!1,E;function O(){F&&(E=Mt(a,0,1,b,g,m,F)),g||(C=!0)}function T(){F&&Ft(a,E),j=!1}return wn(z=>{if(!C&&z>=x&&(C=!0),C&&z>=S&&($(1,0),T()),!j)return!1;if(C){const q=z-x,re=0+1*m(q/b);$(re,1-re)}return!0}),O(),$(0,1),T}function Li(a){const u=getComputedStyle(a);if(u.position!=="absolute"&&u.position!=="fixed"){const{width:l,height:h}=u,d=a.getBoundingClientRect();a.style.position="absolute",a.style.width=l,a.style.height=h,Kr(a,d)}}function Kr(a,u){const l=a.getBoundingClientRect();if(u.left!==l.left||u.top!==l.top){const h=getComputedStyle(a),d=h.transform==="none"?"":h.transform;a.style.transform=`${d} translate(${u.left-l.left}px, ${u.top-l.top}px)`}}let Dr;function Bt(a){Dr=a}const dt=[],Si=[];let vt=[];const Ai=[],Ra=Promise.resolve();let gr=!1;function Oa(){gr||(gr=!0,Ra.then(zi))}function Be(a){vt.push(a)}const yr=new Set;let ft=0;function zi(){if(ft!==0)return;const a=Dr;do{try{for(;ft<dt.length;){const u=dt[ft];ft++,Bt(u),Pa(u.$$)}}catch(u){throw dt.length=0,ft=0,u}for(Bt(null),dt.length=0,ft=0;Si.length;)Si.pop()();for(let u=0;u<vt.length;u+=1){const l=vt[u];yr.has(l)||(yr.add(l),l())}vt.length=0}while(dt.length);for(;Ai.length;)Ai.pop()();gr=!1,yr.clear(),Bt(a)}function Pa(a){if(a.fragment!==null){a.update(),ke(a.before_update);const u=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,u),a.after_update.forEach(Be)}}function Ia(a){const u=[],l=[];vt.forEach(h=>a.indexOf(h)===-1?u.push(h):l.push(h)),l.forEach(h=>h()),vt=u}let It;function Rr(){return It||(It=Promise.resolve(),It.then(()=>{It=null})),It}function et(a,u,l){a.dispatchEvent(Ca(`${u?"intro":"outro"}${l}`))}const dn=new Set;let De;function _r(){De={r:0,c:[],p:De}}function br(){De.r||ke(De.c),De=De.p}function He(a,u){a&&a.i&&(dn.delete(a),a.i(u))}function tt(a,u,l,h){if(a&&a.o){if(dn.has(a))return;dn.add(a),De.c.push(()=>{dn.delete(a),h&&(l&&a.d(1),h())}),a.o(u)}else h&&h()}const Or={duration:0};function Vi(a,u,l){const h={direction:"in"};let d=u(a,l,h),g=!1,b,m,x=0;function S(){b&&Ft(a,b)}function $(){const{delay:j=0,duration:C=300,easing:E=_n,tick:O=ce,css:T}=d||Or;T&&(b=Mt(a,0,1,C,j,E,T,x++)),O(0,1);const z=bn()+j,q=z+C;m&&m.abort(),g=!0,Be(()=>et(a,!0,"start")),m=wn(re=>{if(g){if(re>=q)return O(1,0),et(a,!0,"end"),S(),g=!1;if(re>=z){const oe=E((re-z)/C);O(oe,1-oe)}}return g})}let F=!1;return{start(){F||(F=!0,Ft(a),nt(d)?(d=d(h),Rr().then($)):$())},invalidate(){F=!1},end(){g&&(S(),g=!1)}}}function Wi(a,u,l){const h={direction:"out"};let d=u(a,l,h),g=!0,b;const m=De;m.r+=1;function x(){const{delay:S=0,duration:$=300,easing:F=_n,tick:j=ce,css:C}=d||Or;C&&(b=Mt(a,1,0,$,S,F,C));const E=bn()+S,O=E+$;Be(()=>et(a,!1,"start")),wn(T=>{if(g){if(T>=O)return j(0,1),et(a,!1,"end"),--m.r||ke(m.c),!1;if(T>=E){const z=F((T-E)/$);j(1-z,z)}}return g})}return nt(d)?Rr().then(()=>{d=d(h),x()}):x(),{end(S){S&&d.tick&&d.tick(1,0),g&&(b&&Ft(a,b),g=!1)}}}function Ci(a,u,l,h){const d={direction:"both"};let g=u(a,l,d),b=h?0:1,m=null,x=null,S=null;function $(){S&&Ft(a,S)}function F(C,E){const O=C.b-b;return E*=Math.abs(O),{a:b,b:C.b,d:O,duration:E,start:C.start,end:C.start+E,group:C.group}}function j(C){const{delay:E=0,duration:O=300,easing:T=_n,tick:z=ce,css:q}=g||Or,re={start:bn()+E,b:C};C||(re.group=De,De.r+=1),m||x?x=re:(q&&($(),S=Mt(a,b,C,O,E,T,q)),C&&z(0,1),m=F(re,O),Be(()=>et(a,C,"start")),wn(oe=>{if(x&&oe>x.start&&(m=F(x,O),x=null,et(a,m.b,"start"),q&&($(),S=Mt(a,b,m.b,m.duration,0,T,g.css))),m){if(oe>=m.end)z(b=m.b,1-b),et(a,m.b,"end"),x||(m.b?$():--m.group.r||ke(m.group.c)),m=null;else if(oe>=m.start){const ae=oe-m.start;b=m.a+m.d*T(ae/m.duration),z(b,1-b)}}return!!(m||x)}))}return{run(C){nt(g)?Rr().then(()=>{g=g(d),j(C)}):j(C)},end(){$(),m=x=null}}}function Hi(a,u){tt(a,1,1,()=>{u.delete(a.key)})}function Ti(a,u){a.f(),Hi(a,u)}function wr(a,u,l,h,d,g,b,m,x,S,$,F){let j=a.length,C=g.length,E=j;const O={};for(;E--;)O[a[E].key]=E;const T=[],z=new Map,q=new Map,re=[];for(E=C;E--;){const Y=F(d,g,E),ve=l(Y);let ge=b.get(ve);ge?h&&re.push(()=>ge.p(Y,u)):(ge=S(ve,Y),ge.c()),z.set(ve,T[E]=ge),ve in O&&q.set(ve,Math.abs(E-O[ve]))}const oe=new Set,ae=new Set;function X(Y){He(Y,1),Y.m(m,$),b.set(Y.key,Y),$=Y.first,C--}for(;j&&C;){const Y=T[C-1],ve=a[j-1],ge=Y.key,rt=ve.key;Y===ve?($=Y.first,j--,C--):z.has(rt)?!b.has(ge)||oe.has(ge)?X(Y):ae.has(rt)?j--:q.get(ge)>q.get(rt)?(ae.add(ge),X(Y)):(oe.add(rt),j--):(x(ve,b),j--)}for(;j--;){const Y=a[j];z.has(Y.key)||x(Y,b)}for(;C;)X(T[C-1]);return ke(re),T}function mr(a){a&&a.c()}function pn(a,u,l,h){const{fragment:d,after_update:g}=a.$$;d&&d.m(u,l),h||Be(()=>{const b=a.$$.on_mount.map(Bi).filter(nt);a.$$.on_destroy?a.$$.on_destroy.push(...b):ke(b),a.$$.on_mount=[]}),g.forEach(Be)}function vn(a,u){const l=a.$$;l.fragment!==null&&(Ia(l.after_update),ke(l.on_destroy),l.fragment&&l.fragment.d(u),l.on_destroy=l.fragment=null,l.ctx=[])}function Ba(a,u){a.$$.dirty[0]===-1&&(dt.push(a),Oa(),a.$$.dirty.fill(0)),a.$$.dirty[u/31|0]|=1<<u%31}function En(a,u,l,h,d,g,b,m=[-1]){const x=Dr;Bt(a);const S=a.$$={fragment:null,ctx:[],props:g,update:ce,not_equal:d,bound:Ei(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u.context||(x?x.$$.context:[])),callbacks:Ei(),dirty:m,skip_bound:!1,root:u.target||x.$$.root};b&&b(S.root);let $=!1;if(S.ctx=l?l(a,u.props||{},(F,j,...C)=>{const E=C.length?C[0]:j;return S.ctx&&d(S.ctx[F],S.ctx[F]=E)&&(!S.skip_bound&&S.bound[F]&&S.bound[F](E),$&&Ba(a,F)),j}):[],S.update(),$=!0,ke(S.before_update),S.fragment=h?h(S.ctx):!1,u.target){if(u.hydrate){const F=Aa(u.target);S.fragment&&S.fragment.l(F),F.forEach(le)}else S.fragment&&S.fragment.c();u.intro&&He(a.$$.fragment),pn(a,u.target,u.anchor,u.customElement),zi()}Bt(x)}class xn{$destroy(){vn(this,1),this.$destroy=ce}$on(u,l){if(!nt(l))return ce;const h=this.$$.callbacks[u]||(this.$$.callbacks[u]=[]);return h.push(l),()=>{const d=h.indexOf(l);d!==-1&&h.splice(d,1)}}$set(u){this.$$set&&!ba(u)&&(this.$$.skip_bound=!0,this.$$set(u),this.$$.skip_bound=!1)}}(function(a,u){typeof Yi=="object"&&typeof Sr<"u"?Sr.exports=u():typeof define=="function"&&define.amd?define(u):(a=typeof globalThis<"u"?globalThis:a||self,a.Dexie=u())})(globalThis,function(){/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var a=function(){return a=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)};function u(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,h=Object.keys,d=Array.isArray;typeof Promise<"u"&&!l.Promise&&(l.Promise=Promise);function g(t,e){return typeof e!="object"||h(e).forEach(function(n){t[n]=e[n]}),t}var b=Object.getPrototypeOf,m={}.hasOwnProperty;function x(t,e){return m.call(t,e)}function S(t,e){typeof e=="function"&&(e=e(b(t))),(typeof Reflect>"u"?h:Reflect.ownKeys)(e).forEach(function(n){F(t,n,e[n])})}var $=Object.defineProperty;function F(t,e,n,r){$(t,e,g(n&&x(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function j(t){return{from:function(e){return t.prototype=Object.create(e.prototype),F(t.prototype,"constructor",t),{extend:S.bind(null,t.prototype)}}}}var C=Object.getOwnPropertyDescriptor;function E(t,e){var n=C(t,e),r;return n||(r=b(t))&&E(r,e)}var O=[].slice;function T(t,e,n){return O.call(t,e,n)}function z(t,e){return e(t)}function q(t){if(!t)throw new Error("Assertion Failed")}function re(t){l.setImmediate?setImmediate(t):setTimeout(t,0)}function oe(t,e){return t.reduce(function(n,r,i){var o=e(r,i);return o&&(n[o[0]]=o[1]),n},{})}function ae(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function X(t,e){if(x(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var o=X(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(s!==-1){var c=t[e.substr(0,s)];return c===void 0?void 0:X(c,e.substr(s+1))}}function Y(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){q(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Y(t,e[r],n[r])}else{var o=e.indexOf(".");if(o!==-1){var s=e.substr(0,o),c=e.substr(o+1);if(c==="")n===void 0?d(t)&&!isNaN(parseInt(s))?t.splice(s,1):delete t[s]:t[s]=n;else{var f=t[s];(!f||!x(t,s))&&(f=t[s]={}),Y(f,c,n)}}else n===void 0?d(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function ve(t,e){typeof e=="string"?Y(t,e,void 0):"length"in e&&[].map.call(e,function(n){Y(t,n,void 0)})}function ge(t){var e={};for(var n in t)x(t,n)&&(e[n]=t[n]);return e}var rt=[].concat;function Ir(t){return rt.apply([],t)}var Br="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ir([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return l[t]}),Gi=Br.map(function(t){return l[t]});oe(Br,function(t){return[t,!0]});var Me=null;function yt(t){Me=typeof WeakMap<"u"&&new WeakMap;var e=Sn(t);return Me=null,e}function Sn(t){if(!t||typeof t!="object")return t;var e=Me&&Me.get(t);if(e)return e;if(d(t)){e=[],Me&&Me.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Sn(t[n]))}else if(Gi.indexOf(t.constructor)>=0)e=t;else{var i=b(t);e=i===Object.prototype?{}:Object.create(i),Me&&Me.set(t,e);for(var o in t)x(t,o)&&(e[o]=Sn(t[o]))}return e}var Qi={}.toString;function An(t){return Qi.call(t).slice(8,-1)}var Cn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Xi=typeof Cn=="symbol"?function(t){var e;return t!=null&&(e=t[Cn])&&e.apply(t)}:function(){return null},it={};function Re(t){var e,n,r,i;if(arguments.length===1){if(d(t))return t.slice();if(this===it&&typeof t=="string")return[t];if(i=Xi(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var Tn=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Se=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mr(t,e){Se=t,Fr=e}var Fr=function(){return!0},qi=!new Error("").stack;function Ue(){if(qi)try{throw Ue.arguments,new Error}catch(t){return t}return new Error}function Kn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Fr).map(function(r){return`
`+r}).join("")):""}var Ji=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],$r=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Dn=Ji.concat($r),Zi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ot(t,e){this._e=Ue(),this.name=t,this.message=e}j(ot).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Kn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Nr(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Lt(t,e,n,r){this._e=Ue(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Nr(t,e)}j(Lt).from(ot);function mt(t,e){this._e=Ue(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=Nr(t,e)}j(mt).from(ot);var Rn=Dn.reduce(function(t,e){return t[e]=e+"Error",t},{}),eo=ot,H=Dn.reduce(function(t,e){var n=e+"Error";function r(i,o){this._e=Ue(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Zi[e]||n,this.inner=null)}return j(r).from(eo),t[e]=r,t},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var jr=$r.reduce(function(t,e){return t[e+"Error"]=H[e],t},{});function to(t,e){if(!t||t instanceof ot||t instanceof TypeError||t instanceof SyntaxError||!t.name||!jr[t.name])return t;var n=new jr[t.name](e||t.message,t);return"stack"in t&&F(n,"stack",{get:function(){return this.inner.stack}}),n}var zt=Dn.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=H[e]),t},{});zt.ModifyError=Lt,zt.DexieError=ot,zt.BulkError=mt;function ee(){}function gt(t){return t}function no(t,e){return t==null||t===gt?e:function(n){return e(t(n))}}function Ye(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ro(t,e){return t===ee?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ye(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ye(i,this.onerror):i),o!==void 0?o:n}}function io(t,e){return t===ee?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ye(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ye(r,this.onerror):r)}}function oo(t,e){return t===ee?e:function(n){var r=t.apply(this,arguments);g(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ye(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Ye(o,this.onerror):o),r===void 0?s===void 0?void 0:s:g(r,s)}}function ao(t,e){return t===ee?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function On(t,e){return t===ee?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}var _t={},uo=100,so=20,Lr=100,Pn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,b(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,b(e),t]}(),In=Pn[0],Vt=Pn[1],Bn=Pn[2],zr=Vt&&Vt.then,Wt=In&&In.constructor,Mn=!!Bn,Fn=!1,lo=Bn?function(){Bn.then(Gt)}:l.setImmediate?setImmediate.bind(null,Gt):l.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Gt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Gt,0)},bt=function(t,e){wt.push([t,e]),Ht&&(lo(),Ht=!1)},$n=!0,Ht=!0,Ge=[],Ut=[],Nn=null,jn=gt,at={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Jr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{Jr(t[0],t[1])}catch{}})}},V=at,wt=[],Qe=0,Yt=[];function L(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee,this._lib=!1;var e=this._PSD=V;if(Se&&(this._stackHolder=Ue(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==_t)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&zn(this,this._value);return}this._state=null,this._value=null,++e.ref,Wr(this,t)}var Ln={get:function(){var t=V,e=qt;function n(r,i){var o=this,s=!t.global&&(t!==V||e!==qt),c=s&&!Oe(),f=new L(function(p,y){Vn(o,new Vr(Zt(r,t,s,c),Zt(i,t,s,c),p,y,t))});return Se&&Yr(f,this),f}return n.prototype=_t,n},set:function(t){F(this,"then",t&&t.prototype===_t?Ln:{get:function(){return t},set:Ln.set})}};S(L.prototype,{then:Ln,_then:function(t,e){Vn(this,new Vr(null,null,t,e,V))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):Qt(r)}):this.then(null,function(r){return r&&r.name===e?n(r):Qt(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),Qt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{Fn=!0;var t=Ur(this,[],so),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Fn=!1}}},timeout:function(t,e){var n=this;return t<1/0?new L(function(r,i){var o=setTimeout(function(){return i(new H.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&F(L.prototype,Symbol.toStringTag,"Dexie.Promise"),at.env=Gr();function Vr(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}S(L,{all:function(){var t=Re.apply(null,arguments).map(Jt);return new L(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,o){return L.resolve(i).then(function(s){t[o]=s,--r||e(t)},n)})})},resolve:function(t){if(t instanceof L)return t;if(t&&typeof t.then=="function")return new L(function(n,r){t.then(n,r)});var e=new L(_t,!0,t);return Yr(e,Nn),e},reject:Qt,race:function(){var t=Re.apply(null,arguments).map(Jt);return new L(function(e,n){t.map(function(r){return L.resolve(r).then(e,n)})})},PSD:{get:function(){return V},set:function(t){return V=t}},totalEchoes:{get:function(){return qt}},newPSD:Fe,usePSD:st,scheduler:{get:function(){return bt},set:function(t){bt=t}},rejectionMapper:{get:function(){return jn},set:function(t){jn=t}},follow:function(t,e){return new L(function(n,r){return Fe(function(i,o){var s=V;s.unhandleds=[],s.onunhandled=o,s.finalize=Ye(function(){var c=this;fo(function(){c.unhandleds.length===0?i():o(c.unhandleds[0])})},s.finalize),t()},e,n,r)})}}),Wt&&(Wt.allSettled&&F(L,"allSettled",function(){var t=Re.apply(null,arguments).map(Jt);return new L(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,o){return L.resolve(i).then(function(s){return r[o]={status:"fulfilled",value:s}},function(s){return r[o]={status:"rejected",reason:s}}).then(function(){return--n||e(r)})})})}),Wt.any&&typeof AggregateError<"u"&&F(L,"any",function(){var t=Re.apply(null,arguments).map(Jt);return new L(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(o,s){return L.resolve(o).then(function(c){return e(c)},function(c){i[s]=c,--r||n(new AggregateError(i))})})})}));function Wr(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Et();n&&typeof n.then=="function"?Wr(t,function(i,o){n instanceof L?n._then(i,o):n.then(i,o)}):(t._state=!0,t._value=n,Hr(t)),r&&xt()}},zn.bind(null,t))}catch(n){zn(t,n)}}function zn(t,e){if(Ut.push(e),t._state===null){var n=t._lib&&Et();e=jn(e),t._state=!1,t._value=e,Se&&e!==null&&typeof e=="object"&&!e._promise&&ae(function(){var r=E(e,"stack");e._promise=t,F(e,"stack",{get:function(){return Fn?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),ho(t),Hr(t),n&&xt()}}function Hr(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Vn(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Qe===0&&(++Qe,bt(function(){--Qe===0&&Wn()},[]))}function Vn(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Qe,bt(co,[n,t,e])}function co(t,e,n){try{Nn=e;var r,i=e._value;e._state?r=t(i):(Ut.length&&(Ut=[]),r=t(i),Ut.indexOf(i)===-1&&po(e)),n.resolve(r)}catch(o){n.reject(o)}finally{Nn=null,--Qe===0&&Wn(),--n.psd.ref||n.psd.finalize()}}function Ur(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,o,s;i!=null?(o=i.name||"Error",s=i.message||i,r=Kn(i,0)):(o=i,s=""),e.push(o+(s?": "+s:"")+r)}return Se&&(r=Kn(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&Ur(t._prev,e,n)),e}function Yr(t,e){var n=e?e._numPrev+1:0;n<uo&&(t._prev=e,t._numPrev=n)}function Gt(){Et()&&xt()}function Et(){var t=$n;return $n=!1,Ht=!1,t}function xt(){var t,e,n;do for(;wt.length>0;)for(t=wt,wt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(wt.length>0);$n=!0,Ht=!0}function Wn(){var t=Ge;Ge=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=Yt.slice(0),n=e.length;n;)e[--n]()}function fo(t){function e(){t(),Yt.splice(Yt.indexOf(e),1)}Yt.push(e),++Qe,bt(function(){--Qe===0&&Wn()},[])}function ho(t){Ge.some(function(e){return e._value===t._value})||Ge.push(t)}function po(t){for(var e=Ge.length;e;)if(Ge[--e]._value===t._value){Ge.splice(e,1);return}}function Qt(t){return new L(_t,!1,t)}function ne(t,e){var n=V;return function(){var r=Et(),i=V;try{return $e(n,!0),t.apply(this,arguments)}catch(o){e&&e(o)}finally{$e(i,!1),r&&xt()}}}var he={awaits:0,echoes:0,id:0},vo=0,Xt=[],Hn=0,qt=0,yo=0;function Fe(t,e,n,r){var i=V,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++yo;var s=at.env;o.env=Mn?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject,nthen:Xr(s.nthen,o),gthen:Xr(s.gthen,o)}:{},e&&g(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=st(o,t,n,r);return o.ref===0&&o.finalize(),c}function ut(){return he.id||(he.id=++vo),++he.awaits,he.echoes+=Lr,he.id}function Oe(){return he.awaits?(--he.awaits===0&&(he.id=0),he.echoes=he.awaits*Lr,!0):!1}(""+zr).indexOf("[native code]")===-1&&(ut=Oe=ee);function Jt(t){return he.echoes&&t&&t.constructor===Wt?(ut(),t.then(function(e){return Oe(),e},function(e){return Oe(),se(e)})):t}function mo(t){++qt,(!he.echoes||--he.echoes===0)&&(he.echoes=he.id=0),Xt.push(V),$e(t,!0)}function go(){var t=Xt[Xt.length-1];Xt.pop(),$e(t,!1)}function $e(t,e){var n=V;if((e?he.echoes&&(!Hn++||t!==V):Hn&&(!--Hn||t!==V))&&Qr(e?mo.bind(null,t):go),t!==V&&(V=t,n===at&&(at.env=Gr()),Mn)){var r=at.env.Promise,i=t.env;Vt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(l,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Gr(){var t=l.Promise;return Mn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Vt.then,gthen:t.prototype.then}:{}}function st(t,e,n,r,i){var o=V;try{return $e(t,!0),e(n,r,i)}finally{$e(o,!1)}}function Qr(t){zr.call(In,t)}function Zt(t,e,n,r){return typeof t!="function"?t:function(){var i=V;n&&ut(),$e(e,!0);try{return t.apply(this,arguments)}finally{$e(i,!1),r&&Qr(Oe)}}}function Xr(t,e){return function(n,r){return t.call(this,Zt(n,e),Zt(r,e))}}var qr="unhandledrejection";function Jr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(l.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(qr,!0,!0),g(r,i)):l.CustomEvent&&(r=new CustomEvent(qr,{detail:i}),g(r,i)),r&&l.dispatchEvent&&(dispatchEvent(r),!l.PromiseRejectionEvent&&l.onunhandledrejection))try{l.onunhandledrejection(r)}catch{}Se&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var se=L.reject;function Un(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!V.letThrough&&!t._vip){if(t._state.openComplete)return se(new H.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return se(new H.DatabaseClosed);t.open().catch(ee)}return t._state.dbReadyPromise.then(function(){return Un(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===Rn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Un(t,e,n,r)})):se(o)}return i._promise(e,function(o,s){return Fe(function(){return V.trans=i,r(o,s,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var Zr="3.2.3",Xe=String.fromCharCode(65535),Yn=-1/0,Pe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ei="String expected.",kt=[],en=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),_o=en,bo=en,ti=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},tn="__dbnames",Gn="readonly",Qn="readwrite";function qe(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var ni={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function nn(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=yt(e),delete e[t]),e}:function(e){return e}}var wo=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||V.trans,o=this.name;function s(f,p,y){if(!y.schema[o])throw new H.NotFound("Table "+o+" not part of transaction");return n(y.idbtrans,y)}var c=Et();try{return i&&i.db===this.db?i===V.trans?i._promise(e,s,r):Fe(function(){return i._promise(e,s,r)},{trans:i,transless:V.transless||V}):Un(this.db,e,[this.name],s)}finally{c&&xt()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(d(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=h(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(y){return y.compound&&n.every(function(v){return y.keyPath.indexOf(v)>=0})&&y.keyPath.every(function(v){return n.indexOf(v)>=0})})[0];if(r&&this.db._maxKey!==Xe)return this.where(r.name).equals(r.keyPath.map(function(y){return e[y]}));!r&&Se&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function s(y,v){try{return o.cmp(y,v)===0}catch{return!1}}var c=n.reduce(function(y,v){var w=y[0],P=y[1],k=i[v],_=e[v];return[w||k,w||!k?qe(P,k&&k.multi?function(K){var I=X(K,v);return d(I)&&I.some(function(B){return s(_,B)})}:function(K){return s(_,X(K,v))}):P]},[null,null]),f=c[0],p=c[1];return f?this.where(f.name).equals(e[f.keyPath]).filter(p):r?this.filter(p):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,d(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var o in r)if(x(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){g(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,o=i.auto,s=i.keyPath,c=e;return s&&o&&(c=nn(s)(e)),this._trans("readwrite",function(f){return r.core.mutate({trans:f,type:"add",keys:n!=null?[n]:null,values:[c]})}).then(function(f){return f.numFailures?L.reject(f.failures[0]):f.lastResult}).then(function(f){if(s)try{Y(e,s,f)}catch{}return f})},t.prototype.update=function(e,n){if(typeof e=="object"&&!d(e)){var r=X(e,this.schema.primKey.keyPath);if(r===void 0)return se(new H.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?h(n).forEach(function(i){Y(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,o=i.auto,s=i.keyPath,c=e;return s&&o&&(c=nn(s)(e)),this._trans("readwrite",function(f){return r.core.mutate({trans:f,type:"put",values:[c],keys:n!=null?[n]:null})}).then(function(f){return f.numFailures?L.reject(f.failures[0]):f.lastResult}).then(function(f){if(s)try{Y(e,s,f)}catch{}return f})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?L.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:ni})}).then(function(n){return n.numFailures?L.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var s=r?r.allKeys:void 0;return this._trans("readwrite",function(c){var f=i.schema.primKey,p=f.auto,y=f.keyPath;if(y&&o)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,w=y&&p?e.map(nn(y)):e;return i.core.mutate({trans:c,type:"add",keys:o,values:w,wantResults:s}).then(function(P){var k=P.numFailures,_=P.results,K=P.lastResult,I=P.failures,B=s?_:K;if(k===0)return B;throw new mt(i.name+".bulkAdd(): "+k+" of "+v+" operations failed",I)})})},t.prototype.bulkPut=function(e,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var s=r?r.allKeys:void 0;return this._trans("readwrite",function(c){var f=i.schema.primKey,p=f.auto,y=f.keyPath;if(y&&o)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var v=e.length,w=y&&p?e.map(nn(y)):e;return i.core.mutate({trans:c,type:"put",keys:o,values:w,wantResults:s}).then(function(P){var k=P.numFailures,_=P.results,K=P.lastResult,I=P.failures,B=s?_:K;if(k===0)return B;throw new mt(i.name+".bulkPut(): "+k+" of "+v+" operations failed",I)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var o=i.numFailures,s=i.lastResult,c=i.failures;if(o===0)return s;throw new mt(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",c)})},t}();function St(t){var e={},n=function(c,f){if(f){for(var p=arguments.length,y=new Array(p-1);--p;)y[p-1]=arguments[p];return e[c].subscribe.apply(null,y),t}else if(typeof c=="string")return e[c]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(c,f,p){if(typeof c=="object")return s(c);f||(f=ao),p||(p=ee);var y={subscribers:[],fire:p,subscribe:function(v){y.subscribers.indexOf(v)===-1&&(y.subscribers.push(v),y.fire=f(y.fire,v))},unsubscribe:function(v){y.subscribers=y.subscribers.filter(function(w){return w!==v}),y.fire=y.subscribers.reduce(f,p)}};return e[c]=n[c]=y,y}function s(c){h(c).forEach(function(f){var p=c[f];if(d(p))o(f,c[f][0],c[f][1]);else if(p==="asap")var y=o(f,gt,function(){for(var w=arguments.length,P=new Array(w);w--;)P[w]=arguments[w];y.subscribers.forEach(function(k){re(function(){k.apply(null,P)})})});else throw new H.InvalidArgument("Invalid event config")})}}function At(t,e){return j(e).from({prototype:t}),e}function Eo(t){return At(wo.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:St(null,{creating:[ro,ee],reading:[no,gt],updating:[oo,ee],deleting:[io,ee]})})}function lt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Xn(t,e){t.filter=qe(t.filter,e)}function qn(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return qe(r(),e())}:e,t.justLimit=n&&!r}function xo(t,e){t.isMatch=qe(t.isMatch,e)}function rn(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new H.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function ri(t,e,n){var r=rn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function on(t,e,n,r){var i=t.replayFilter?qe(t.filter,t.replayFilter()):t.filter;if(t.or){var o={},s=function(c,f,p){if(!i||i(f,p,function(w){return f.stop(w)},function(w){return f.fail(w)})){var y=f.primaryKey,v=""+y;v==="[object ArrayBuffer]"&&(v=""+new Uint8Array(y)),x(o,v)||(o[v]=!0,e(c,f,p))}};return Promise.all([t.or._iterate(s,n),ii(ri(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}else return ii(ri(t,r,n),qe(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function ii(t,e,n,r){var i=r?function(s,c,f){return n(r(s),c,f)}:n,o=ne(i);return t.then(function(s){if(s)return s.start(function(){var c=function(){return s.continue()};(!e||e(s,function(f){return c=f},function(f){s.stop(f),c=ee},function(f){s.fail(f),c=ee}))&&o(s.value,s,function(f){return c=f}),c()})})}function ye(t,e){try{var n=oi(t),r=oi(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return So(ai(t),ai(e));case"Array":return ko(t,e)}}catch{}return NaN}function ko(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,o=0;o<i;++o){var s=ye(t[o],e[o]);if(s!==0)return s}return n===r?0:n<r?-1:1}function So(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,o=0;o<i;++o)if(t[o]!==e[o])return t[o]<e[o]?-1:1;return n===r?0:n<r?-1:1}function oi(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=An(t);return n==="ArrayBuffer"?"binary":n}function ai(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Ao=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,se.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,se.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=qe(n.algorithm,e)},t.prototype._iterate=function(e,n){return on(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&g(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return on(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(lt(i,!0))return o.count({trans:r,query:{index:rn(i,o.schema),range:i.range}}).then(function(c){return Math.min(c,i.limit)});var s=0;return on(i,function(){return++s,!1},r,o).then(function(){return s})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],o=r.length-1;function s(p,y){return y?s(p[r[y]],y-1):p[i]}var c=this._ctx.dir==="next"?1:-1;function f(p,y){var v=s(p,o),w=s(y,o);return v<w?-c:v>w?c:0}return this.toArray(function(p){return p.sort(f)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&lt(i,!0)&&i.limit>0){var o=i.valueMapper,s=rn(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:s,range:i.range}}).then(function(f){var p=f.result;return o?p.map(o):p})}else{var c=[];return on(i,function(f){return c.push(f)},r,i.table.core).then(function(){return c})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,lt(n)?qn(n,function(){var r=e;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):qn(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),qn(this._ctx,function(){var n=e;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},t.prototype.until=function(e,n){return Xn(this._ctx,function(r,i,o){return e(r.value)?(i(o),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Xn(this._ctx,function(n){return e(n.value)}),xo(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&lt(n,!0)&&n.limit>0)return this._read(function(i){var o=rn(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Xn(this._ctx,function(i){var o=i.primaryKey.toString(),s=x(r,o);return r[o]=!0,!s}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof e=="function")o=e;else{var s=h(e),c=s.length;o=function(I){for(var B=!1,D=0;D<c;++D){var R=s[D],A=e[R];X(I,R)!==A&&(Y(I,R,A),B=!0)}return B}}var f=r.table.core,p=f.schema.primaryKey,y=p.outbound,v=p.extractKey,w=n.db._options.modifyChunkSize||200,P=[],k=0,_=[],K=function(I,B){var D=B.failures,R=B.numFailures;k+=I-R;for(var A=0,M=h(D);A<M.length;A++){var W=M[A];P.push(D[W])}};return n.clone().primaryKeys().then(function(I){var B=function(D){var R=Math.min(w,I.length-D);return f.getMany({trans:i,keys:I.slice(D,D+R),cache:"immutable"}).then(function(A){for(var M=[],W=[],N=y?[]:null,U=[],G=0;G<R;++G){var Z=A[G],te={value:yt(Z),primKey:I[D+G]};o.call(te,te.value,te)!==!1&&(te.value==null?U.push(I[D+G]):!y&&ye(v(Z),v(te.value))!==0?(U.push(I[D+G]),M.push(te.value)):(W.push(te.value),y&&N.push(I[D+G])))}var J=lt(r)&&r.limit===1/0&&(typeof e!="function"||e===Jn)&&{index:r.index,range:r.range};return Promise.resolve(M.length>0&&f.mutate({trans:i,type:"add",values:M}).then(function(de){for(var Q in de.failures)U.splice(parseInt(Q),1);K(M.length,de)})).then(function(){return(W.length>0||J&&typeof e=="object")&&f.mutate({trans:i,type:"put",keys:N,values:W,criteria:J,changeSpec:typeof e!="function"&&e}).then(function(de){return K(W.length,de)})}).then(function(){return(U.length>0||J&&e===Jn)&&f.mutate({trans:i,type:"delete",keys:U,criteria:J}).then(function(de){return K(U.length,de)})}).then(function(){return I.length>D+R&&B(D+w)})})};return B(0).then(function(){if(P.length>0)throw new Lt("Error modifying one or more objects",P,k,_);return I.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return lt(e)&&(e.isPrimKey&&!bo||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,o=n;return e.table.core.count({trans:r,query:{index:i,range:o}}).then(function(s){return e.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(c){var f=c.failures;c.lastResult,c.results;var p=c.numFailures;if(p)throw new Lt("Could not delete some values",Object.keys(f).map(function(y){return f[y]}),s-p);return s-p})})}):this.modify(Jn)},t}(),Jn=function(t,e){return e.value=null};function Co(t){return At(Ao.prototype,function(n,r){this.db=t;var i=ni,o=null;if(r)try{i=r()}catch(p){o=p}var s=n._ctx,c=s.table,f=c.hook.reading.fire;this._ctx={table:c,index:s.index,isPrimKey:!s.index||c.schema.primKey.keyPath&&s.index===c.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:s.or,valueMapper:f!==gt?f:null}})}function To(t,e){return t<e?-1:t===e?0:1}function Ko(t,e){return t>e?-1:t===e?0:1}function _e(t,e,n){var r=t instanceof si?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function ct(t){return new t.Collection(t,function(){return ui("")}).limit(0)}function Do(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Ro(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function Oo(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),c=-1,f=0;f<s;++f){var p=e[f];if(p!==r[f])return i(t[f],n[f])<0?t.substr(0,f)+n[f]+n.substr(f+1):i(t[f],r[f])<0?t.substr(0,f)+r[f]+n.substr(f+1):c>=0?t.substr(0,c)+e[c]+n.substr(c+1):null;i(t[f],p)<0&&(c=f)}return s<r.length&&o==="next"?t+n.substr(t.length):s<t.length&&o==="prev"?t.substr(0,n.length):c<0?null:t.substr(0,c)+r[c]+n.substr(c+1)}function an(t,e,n,r){var i,o,s,c,f,p,y,v=n.length;if(!n.every(function(_){return typeof _=="string"}))return _e(t,ei);function w(_){i=Do(_),o=Ro(_),s=_==="next"?To:Ko;var K=n.map(function(I){return{lower:o(I),upper:i(I)}}).sort(function(I,B){return s(I.lower,B.lower)});c=K.map(function(I){return I.upper}),f=K.map(function(I){return I.lower}),p=_,y=_==="next"?"":r}w("next");var P=new t.Collection(t,function(){return Ne(c[0],f[v-1]+r)});P._ondirectionchange=function(_){w(_)};var k=0;return P._addAlgorithm(function(_,K,I){var B=_.key;if(typeof B!="string")return!1;var D=o(B);if(e(D,f,k))return!0;for(var R=null,A=k;A<v;++A){var M=Oo(B,D,c[A],f[A],s,p);M===null&&R===null?k=A+1:(R===null||s(R,M)>0)&&(R=M)}return K(R!==null?function(){_.continue(R+y)}:I),!1}),P}function Ne(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function ui(t){return{type:1,lower:t,upper:t}}var si=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?ct(this):new this.Collection(this,function(){return Ne(e,n,!r,!i)})}catch{return _e(this,Pe)}},t.prototype.equals=function(e){return e==null?_e(this,Pe):new this.Collection(this,function(){return ui(e)})},t.prototype.above=function(e){return e==null?_e(this,Pe):new this.Collection(this,function(){return Ne(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?_e(this,Pe):new this.Collection(this,function(){return Ne(e,void 0,!1)})},t.prototype.below=function(e){return e==null?_e(this,Pe):new this.Collection(this,function(){return Ne(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?_e(this,Pe):new this.Collection(this,function(){return Ne(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?_e(this,ei):this.between(e,e+Xe,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):an(this,function(n,r){return n.indexOf(r[0])===0},[e],Xe)},t.prototype.equalsIgnoreCase=function(e){return an(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=Re.apply(it,arguments);return e.length===0?ct(this):an(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=Re.apply(it,arguments);return e.length===0?ct(this):an(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,Xe)},t.prototype.anyOf=function(){var e=this,n=Re.apply(it,arguments),r=this._cmp;try{n.sort(r)}catch{return _e(this,Pe)}if(n.length===0)return ct(this);var i=new this.Collection(this,function(){return Ne(n[0],n[n.length-1])});i._ondirectionchange=function(s){r=s==="next"?e._ascending:e._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(s,c,f){for(var p=s.key;r(p,n[o])>0;)if(++o,o===n.length)return c(f),!1;return r(p,n[o])===0?!0:(c(function(){s.continue(n[o])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[Yn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=Re.apply(it,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return _e(this,Pe)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Yn,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,o=this._ascending,s=this._descending,c=this._min,f=this._max;if(e.length===0)return ct(this);if(!e.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&o(A[0],A[1])<=0}))return _e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var p=!n||n.includeLowers!==!1,y=n&&n.includeUppers===!0;function v(A,M){for(var W=0,N=A.length;W<N;++W){var U=A[W];if(i(M[0],U[1])<0&&i(M[1],U[0])>0){U[0]=c(U[0],M[0]),U[1]=f(U[1],M[1]);break}}return W===N&&A.push(M),A}var w=o;function P(A,M){return w(A[0],M[0])}var k;try{k=e.reduce(v,[]),k.sort(P)}catch{return _e(this,Pe)}var _=0,K=y?function(A){return o(A,k[_][1])>0}:function(A){return o(A,k[_][1])>=0},I=p?function(A){return s(A,k[_][0])>0}:function(A){return s(A,k[_][0])>=0};function B(A){return!K(A)&&!I(A)}var D=K,R=new this.Collection(this,function(){return Ne(k[0][0],k[k.length-1][1],!p,!y)});return R._ondirectionchange=function(A){A==="next"?(D=K,w=o):(D=I,w=s),k.sort(P)},R._addAlgorithm(function(A,M,W){for(var N=A.key;D(N);)if(++_,_===k.length)return M(W),!1;return B(N)?!0:(r._cmp(N,k[_][1])===0||r._cmp(N,k[_][0])===0||M(function(){w===o?A.continue(k[_][0]):A.continue(k[_][1])}),!1)}),R},t.prototype.startsWithAnyOf=function(){var e=Re.apply(it,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?ct(this):this.inAnyRange(e.map(function(n){return[n,n+Xe]})):_e(this,"startsWithAnyOf() only works with strings")},t}();function Po(t){return At(si.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=t._deps.indexedDB;if(!o)throw new H.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(s,c){return o.cmp(c,s)},this._max=function(s,c){return o.cmp(s,c)>0?s:c},this._min=function(s,c){return o.cmp(s,c)<0?s:c},this._IDBKeyRange=t._deps.IDBKeyRange})}function Ae(t){return ne(function(e){return Ct(e),t(e.target.error),!1})}function Ct(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Tt="storagemutated",je="x-storagemutated-1",Le=St(null,Tt),Io=function(){function t(){}return t.prototype._lock=function(){return q(!V.global),++this._reculock,this._reculock===1&&!V.global&&(V.lockOwnerFor=this),this},t.prototype._unlock=function(){if(q(!V.global),--this._reculock===0)for(V.global||(V.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{st(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&V.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(q(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new H.DatabaseClosed(i);case"MissingAPIError":throw new H.MissingAPI(i.message,i);default:throw new H.OpenFailed(i)}if(!this.active)throw new H.TransactionInactive;return q(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=ne(function(o){Ct(o),n._reject(e.error)}),e.onabort=ne(function(o){Ct(o),n.active&&n._reject(new H.Abort(e.error)),n.active=!1,n.on("abort").fire(o)}),e.oncomplete=ne(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&Le.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return se(new H.ReadOnly("Transaction is readonly"));if(!this.active)return se(new H.TransactionInactive);if(this._locked())return new L(function(s,c){i._blockedFuncs.push([function(){i._promise(e,n,r).then(s,c)},V])});if(r)return Fe(function(){var s=new L(function(c,f){i._lock();var p=n(c,f,i);p&&p.then&&p.then(c,f)});return s.finally(function(){return i._unlock()}),s._lib=!0,s});var o=new L(function(s,c){var f=n(s,c,i);f&&f.then&&f.then(s,c)});return o._lib=!0,o},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=L.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new L(function(s,c){r.then(function(f){return n._waitingQueue.push(ne(s.bind(null,f)))},function(f){return n._waitingQueue.push(ne(c.bind(null,f)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(x(n,e))return n[e];var r=this.schema[e];if(!r)throw new H.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function Bo(t){return At(Io.prototype,function(n,r,i,o,s){var c=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=St(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(f,p){c._resolve=f,c._reject=p}),this._completion.then(function(){c.active=!1,c.on.complete.fire()},function(f){var p=c.active;return c.active=!1,c.on.error.fire(f),c.parent?c.parent._reject(f):p&&c.idbtrans&&c.idbtrans.abort(),se(f)})})}function Zn(t,e,n,r,i,o,s){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+li(e)}}function li(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ci(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:oe(n,function(r){return[r.name,r]})}}function Mo(t){return t.length===1?t[0]:t}var Kt=function(t){try{return t.only([[]]),Kt=function(){return[[]]},[[]]}catch{return Kt=function(){return Xe},Xe}};function er(t){return t==null?function(){}:typeof t=="string"?Fo(t):function(e){return X(e,t)}}function Fo(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return X(n,t)}}function fi(t){return[].slice.call(t)}var $o=0;function Dt(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function No(t,e,n){function r(v,w){var P=fi(v.objectStoreNames);return{schema:{name:v.name,tables:P.map(function(k){return w.objectStore(k)}).map(function(k){var _=k.keyPath,K=k.autoIncrement,I=d(_),B=_==null,D={},R={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:B,compound:I,keyPath:_,autoIncrement:K,unique:!0,extractKey:er(_)},indexes:fi(k.indexNames).map(function(A){return k.index(A)}).map(function(A){var M=A.name,W=A.unique,N=A.multiEntry,U=A.keyPath,G=d(U),Z={name:M,compound:G,keyPath:U,unique:W,multiEntry:N,extractKey:er(U)};return D[Dt(U)]=Z,Z}),getIndexByKeyPath:function(A){return D[Dt(A)]}};return D[":id"]=R.primaryKey,_!=null&&(D[Dt(_)]=R.primaryKey),R})},hasGetAll:P.length>0&&"getAll"in w.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(v){if(v.type===3)return null;if(v.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=v.lower,P=v.upper,k=v.lowerOpen,_=v.upperOpen,K=w===void 0?P===void 0?null:e.upperBound(P,!!_):P===void 0?e.lowerBound(w,!!k):e.bound(w,P,!!k,!!_);return K}function o(v){var w=v.name;function P(K){var I=K.trans,B=K.type,D=K.keys,R=K.values,A=K.range;return new Promise(function(M,W){M=ne(M);var N=I.objectStore(w),U=N.keyPath==null,G=B==="put"||B==="add";if(!G&&B!=="delete"&&B!=="deleteRange")throw new Error("Invalid operation type: "+B);var Z=(D||R||{length:1}).length;if(D&&R&&D.length!==R.length)throw new Error("Given keys array must have same length as given values array.");if(Z===0)return M({numFailures:0,failures:{},results:[],lastResult:void 0});var te,J=[],de=[],Q=0,be=function(Ke){++Q,Ct(Ke)};if(B==="deleteRange"){if(A.type===4)return M({numFailures:Q,failures:de,results:[],lastResult:void 0});A.type===3?J.push(te=N.clear()):J.push(te=N.delete(i(A)))}else{var Ee=G?U?[R,D]:[R,null]:[D,null],ze=Ee[0],Te=Ee[1];if(G)for(var we=0;we<Z;++we)J.push(te=Te&&Te[we]!==void 0?N[B](ze[we],Te[we]):N[B](ze[we])),te.onerror=be;else for(var we=0;we<Z;++we)J.push(te=N[B](ze[we])),te.onerror=be}var Ve=function(Ke){var Pt=Ke.target.result;J.forEach(function(xe,fn){return xe.error!=null&&(de[fn]=xe.error)}),M({numFailures:Q,failures:de,results:B==="delete"?D:J.map(function(xe){return xe.result}),lastResult:Pt})};te.onerror=function(Ke){be(Ke),Ve(Ke)},te.onsuccess=Ve})}function k(K){var I=K.trans,B=K.values,D=K.query,R=K.reverse,A=K.unique;return new Promise(function(M,W){M=ne(M);var N=D.index,U=D.range,G=I.objectStore(w),Z=N.isPrimaryKey?G:G.index(N.name),te=R?A?"prevunique":"prev":A?"nextunique":"next",J=B||!("openKeyCursor"in Z)?Z.openCursor(i(U),te):Z.openKeyCursor(i(U),te);J.onerror=Ae(W),J.onsuccess=ne(function(de){var Q=J.result;if(!Q){M(null);return}Q.___id=++$o,Q.done=!1;var be=Q.continue.bind(Q),Ee=Q.continuePrimaryKey;Ee&&(Ee=Ee.bind(Q));var ze=Q.advance.bind(Q),Te=function(){throw new Error("Cursor not started")},we=function(){throw new Error("Cursor not stopped")};Q.trans=I,Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=Te,Q.fail=ne(W),Q.next=function(){var Ve=this,Ke=1;return this.start(function(){return Ke--?Ve.continue():Ve.stop()}).then(function(){return Ve})},Q.start=function(Ve){var Ke=new Promise(function(xe,fn){xe=ne(xe),J.onerror=Ae(fn),Q.fail=fn,Q.stop=function(ya){Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=we,xe(ya)}}),Pt=function(){if(J.result)try{Ve()}catch(xe){Q.fail(xe)}else Q.done=!0,Q.start=function(){throw new Error("Cursor behind last entry")},Q.stop()};return J.onsuccess=ne(function(xe){J.onsuccess=Pt,Pt()}),Q.continue=be,Q.continuePrimaryKey=Ee,Q.advance=ze,Pt(),Ke},M(Q)},W)})}function _(K){return function(I){return new Promise(function(B,D){B=ne(B);var R=I.trans,A=I.values,M=I.limit,W=I.query,N=M===1/0?void 0:M,U=W.index,G=W.range,Z=R.objectStore(w),te=U.isPrimaryKey?Z:Z.index(U.name),J=i(G);if(M===0)return B({result:[]});if(K){var de=A?te.getAll(J,N):te.getAllKeys(J,N);de.onsuccess=function(ze){return B({result:ze.target.result})},de.onerror=Ae(D)}else{var Q=0,be=A||!("openKeyCursor"in te)?te.openCursor(J):te.openKeyCursor(J),Ee=[];be.onsuccess=function(ze){var Te=be.result;if(!Te)return B({result:Ee});if(Ee.push(A?Te.value:Te.primaryKey),++Q===M)return B({result:Ee});Te.continue()},be.onerror=Ae(D)}})}}return{name:w,schema:v,mutate:P,getMany:function(K){var I=K.trans,B=K.keys;return new Promise(function(D,R){D=ne(D);for(var A=I.objectStore(w),M=B.length,W=new Array(M),N=0,U=0,G,Z=function(Q){var be=Q.target;(W[be._pos]=be.result)!=null,++U===N&&D(W)},te=Ae(R),J=0;J<M;++J){var de=B[J];de!=null&&(G=A.get(B[J]),G._pos=J,G.onsuccess=Z,G.onerror=te,++N)}N===0&&D(W)})},get:function(K){var I=K.trans,B=K.key;return new Promise(function(D,R){D=ne(D);var A=I.objectStore(w),M=A.get(B);M.onsuccess=function(W){return D(W.target.result)},M.onerror=Ae(R)})},query:_(f),openCursor:k,count:function(K){var I=K.query,B=K.trans,D=I.index,R=I.range;return new Promise(function(A,M){var W=B.objectStore(w),N=D.isPrimaryKey?W:W.index(D.name),U=i(R),G=U?N.count(U):N.count();G.onsuccess=ne(function(Z){return A(Z.target.result)}),G.onerror=Ae(M)})}}}var s=r(t,n),c=s.schema,f=s.hasGetAll,p=c.tables.map(function(v){return o(v)}),y={};return p.forEach(function(v){return y[v.name]=v}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(v){var w=y[v];if(!w)throw new Error("Table '"+v+"' not found");return y[v]},MIN_KEY:-1/0,MAX_KEY:Kt(e),schema:c}}function jo(t,e){return e.reduce(function(n,r){var i=r.create;return a(a({},n),i(n))},t)}function Lo(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=jo(No(e,i,r),t.dbcore);return{dbcore:o}}function tr(t,e){var n=t._novip,r=e.db,i=Lo(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(o){var s=o.name;n.core.schema.tables.some(function(c){return c.name===s})&&(o.core=n.core.table(s),n[s]instanceof n.Table&&(n[s].core=o.core))})}function un(t,e,n,r){var i=t._novip;n.forEach(function(o){var s=r[o];e.forEach(function(c){var f=E(c,o);(!f||"value"in f&&f.value===void 0)&&(c===i.Transaction.prototype||c instanceof i.Transaction?F(c,o,{get:function(){return this.table(o)},set:function(p){$(this,o,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):c[o]=new i.Table(o,s))})})}function nr(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function zo(t,e){return t._cfg.version-e._cfg.version}function Vo(t,e,n,r){var i=t._dbSchema,o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);var s=o._reject.bind(o),c=V.transless||V;Fe(function(){V.trans=o,V.transless=c,e===0?(h(i).forEach(function(f){rr(n,f,i[f].primKey,i[f].indexes)}),tr(t,n),L.follow(function(){return t.on.populate.fire(o)}).catch(s)):Wo(t,e,o,n).catch(s)})}function Wo(t,e,n,r){var i=t._novip,o=[],s=i._versions,c=i._dbSchema=or(i,i.idbdb,r),f=!1,p=s.filter(function(v){return v._cfg.version>=e});p.forEach(function(v){o.push(function(){var w=c,P=v._cfg.dbschema;ar(i,w,r),ar(i,P,r),c=i._dbSchema=P;var k=hi(w,P);k.add.forEach(function(R){rr(r,R[0],R[1].primKey,R[1].indexes)}),k.change.forEach(function(R){if(R.recreate)throw new H.Upgrade("Not yet support for changing primary key");var A=r.objectStore(R.name);R.add.forEach(function(M){return ir(A,M)}),R.change.forEach(function(M){A.deleteIndex(M.name),ir(A,M)}),R.del.forEach(function(M){return A.deleteIndex(M)})});var _=v._cfg.contentUpgrade;if(_&&v._cfg.version>e){tr(i,r),n._memoizedTables={},f=!0;var K=ge(P);k.del.forEach(function(R){K[R]=w[R]}),nr(i,[i.Transaction.prototype]),un(i,[i.Transaction.prototype],h(K),K),n.schema=K;var I=Tn(_);I&&ut();var B,D=L.follow(function(){if(B=_(n),B&&I){var R=Oe.bind(null,null);B.then(R,R)}});return B&&typeof B.then=="function"?L.resolve(B):D.then(function(){return B})}}),o.push(function(w){if(!f||!_o){var P=v._cfg.dbschema;Uo(P,w)}nr(i,[i.Transaction.prototype]),un(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function y(){return o.length?L.resolve(o.shift()(n.idbtrans)).then(y):L.resolve()}return y().then(function(){Ho(c,r)})}function hi(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],o=e[r];if(!i)n.add.push([r,o]);else{var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!en)s.recreate=!0,n.change.push(s);else{var c=i.idxByName,f=o.idxByName,p=void 0;for(p in c)f[p]||s.del.push(p);for(p in f){var y=c[p],v=f[p];y?y.src!==v.src&&s.change.push(v):s.add.push(v)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}}return n}function rr(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return ir(i,o)}),i}function Ho(t,e){h(t).forEach(function(n){e.db.objectStoreNames.contains(n)||rr(e,n,t[n].primKey,t[n].indexes)})}function Uo(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function ir(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function or(t,e,n){var r={},i=T(e.objectStoreNames,0);return i.forEach(function(o){for(var s=n.objectStore(o),c=s.keyPath,f=Zn(li(c),c||"",!1,!1,!!s.autoIncrement,c&&typeof c!="string",!0),p=[],y=0;y<s.indexNames.length;++y){var v=s.index(s.indexNames[y]);c=v.keyPath;var w=Zn(v.name,c,!!v.unique,!!v.multiEntry,!1,c&&typeof c!="string",!1);p.push(w)}r[o]=ci(o,f,p)}),r}function Yo(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=or(r,e,n);r._storeNames=T(e.objectStoreNames,0),un(r,[r._allTables],h(i),i)}function Go(t,e){var n=or(t,t.idbdb,e),r=hi(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function ar(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var s=i[o],c=n.objectStore(s);r._hasGetAll="getAll"in c;for(var f=0;f<c.indexNames.length;++f){var p=c.indexNames[f],y=c.index(p).keyPath,v=typeof y=="string"?y:"["+T(y).join("+")+"]";if(e[s]){var w=e[s].idxByName[v];w&&(w.name=p,delete e[s].idxByName[v],e[s].idxByName[p]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Qo(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Zn(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),d(i),n===0)})}var Xo=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){h(e).forEach(function(r){if(e[r]!==null){var i=Qo(e[r]),o=i.shift();if(o.multi)throw new H.Schema("Primary key cannot be multi-valued");i.forEach(function(s){if(s.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),n[r]=ci(r,o,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,e):e;var r=n._versions,i={},o={};return r.forEach(function(s){g(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,nr(n,[n._allTables,n,n.Transaction.prototype]),un(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],h(o),o),n._storeNames=h(o),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=On(this._cfg.contentUpgrade||ee,e),this},t}();function qo(t){return At(Xo.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ur(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Je(tn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function sr(t){return t&&typeof t.databases=="function"}function Jo(t){var e=t.indexedDB,n=t.IDBKeyRange;return sr(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==tn})}):ur(e,n).toCollection().primaryKeys()}function Zo(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!sr(n)&&e!==tn&&ur(n,r).put({name:e}).catch(ee)}function ea(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!sr(n)&&e!==tn&&ur(n,r).delete(e).catch(ee)}function lr(t){return Fe(function(){return V.letThrough=!0,t()})}function ta(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function na(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?se(e.dbOpenError):t});Se&&(e.openCanceller._stackHolder=Ue()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new H.DatabaseClosed("db.open() was cancelled")}var o=e.dbReadyResolve,s=null,c=!1;return L.race([r,(typeof navigator>"u"?L.resolve():ta()).then(function(){return new L(function(f,p){if(i(),!n)throw new H.MissingAPI;var y=t.name,v=e.autoSchema?n.open(y):n.open(y,Math.round(t.verno*10));if(!v)throw new H.MissingAPI;v.onerror=Ae(p),v.onblocked=ne(t._fireOnBlocked),v.onupgradeneeded=ne(function(w){if(s=v.transaction,e.autoSchema&&!t._options.allowEmptyDB){v.onerror=Ct,s.abort(),v.result.close();var P=n.deleteDatabase(y);P.onsuccess=P.onerror=ne(function(){p(new H.NoSuchDatabase("Database "+y+" doesnt exist"))})}else{s.onerror=Ae(p);var k=w.oldVersion>Math.pow(2,62)?0:w.oldVersion;c=k<1,t._novip.idbdb=v.result,Vo(t,k/10,s,p)}},p),v.onsuccess=ne(function(){s=null;var w=t._novip.idbdb=v.result,P=T(w.objectStoreNames);if(P.length>0)try{var k=w.transaction(Mo(P),"readonly");e.autoSchema?Yo(t,w,k):(ar(t,t._dbSchema,k),Go(t,k)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),tr(t,k)}catch{}kt.push(t),w.onversionchange=ne(function(_){e.vcFired=!0,t.on("versionchange").fire(_)}),w.onclose=ne(function(_){t.on("close").fire(_)}),c&&Zo(t._deps,y),f()},p)})})]).then(function(){return i(),e.onReadyBeingFired=[],L.resolve(lr(function(){return t.on.ready.fire(t.vip)})).then(function f(){if(e.onReadyBeingFired.length>0){var p=e.onReadyBeingFired.reduce(On,ee);return e.onReadyBeingFired=[],L.resolve(lr(function(){return p(t.vip)})).then(f)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(f){e.dbOpenError=f;try{s&&s.abort()}catch{}return r===e.openCanceller&&t._close(),se(f)}).finally(function(){e.openComplete=!0,o()})}function cr(t){var e=function(s){return t.next(s)},n=function(s){return t.throw(s)},r=o(e),i=o(n);function o(s){return function(c){var f=s(c),p=f.value;return f.done?p:!p||typeof p.then!="function"?d(p)?Promise.all(p).then(r,i):r(p):p.then(r,i)}}return o(e)()}function ra(t,e,n){var r=arguments.length;if(r<2)throw new H.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Ir(i);return[t,o,n]}function di(t,e,n,r,i){return L.resolve().then(function(){var o=V.transless||V,s=t._createTransaction(e,n,t._dbSchema,r),c={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),t._state.PR1398_maxLoop=3}catch(v){return v.name===Rn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return di(t,e,n,null,i)})):se(v)}var f=Tn(i);f&&ut();var p,y=L.follow(function(){if(p=i.call(s,s),p)if(f){var v=Oe.bind(null,null);p.then(v,v)}else typeof p.next=="function"&&typeof p.throw=="function"&&(p=cr(p))},c);return(p&&typeof p.then=="function"?L.resolve(p).then(function(v){return s.active?v:se(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):y.then(function(){return p})).then(function(v){return r&&s._resolve(),s._completion.then(function(){return v})}).catch(function(v){return s._reject(v),se(v)})})}function sn(t,e,n){for(var r=d(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function ia(t){return a(a({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},o=[];function s(_,K,I){var B=Dt(_),D=i[B]=i[B]||[],R=_==null?0:typeof _=="string"?1:_.length,A=K>0,M=a(a({},I),{isVirtual:A,keyTail:K,keyLength:R,extractKey:er(_),unique:!A&&I.unique});if(D.push(M),M.isPrimaryKey||o.push(M),R>1){var W=R===2?_[0]:_.slice(0,R-1);s(W,K+1,I)}return D.sort(function(N,U){return N.keyTail-U.keyTail}),M}var c=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[c];for(var f=0,p=r.indexes;f<p.length;f++){var y=p[f];s(y.keyPath,0,y)}function v(_){var K=i[Dt(_)];return K&&K[0]}function w(_,K){return{type:_.type===1?2:_.type,lower:sn(_.lower,_.lowerOpen?t.MAX_KEY:t.MIN_KEY,K),lowerOpen:!0,upper:sn(_.upper,_.upperOpen?t.MIN_KEY:t.MAX_KEY,K),upperOpen:!0}}function P(_){var K=_.query.index;return K.isVirtual?a(a({},_),{query:{index:K,range:w(_.query.range,K.keyTail)}}):_}var k=a(a({},n),{schema:a(a({},r),{primaryKey:c,indexes:o,getIndexByKeyPath:v}),count:function(_){return n.count(P(_))},query:function(_){return n.query(P(_))},openCursor:function(_){var K=_.query.index,I=K.keyTail,B=K.isVirtual,D=K.keyLength;if(!B)return n.openCursor(_);function R(A){function M(N){N!=null?A.continue(sn(N,_.reverse?t.MAX_KEY:t.MIN_KEY,I)):_.unique?A.continue(A.key.slice(0,D).concat(_.reverse?t.MIN_KEY:t.MAX_KEY,I)):A.continue()}var W=Object.create(A,{continue:{value:M},continuePrimaryKey:{value:function(N,U){A.continuePrimaryKey(sn(N,t.MAX_KEY,I),U)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var N=A.key;return D===1?N[0]:N.slice(0,D)}},value:{get:function(){return A.value}}});return W}return n.openCursor(P(_)).then(function(A){return A&&R(A)})}});return k}})}var oa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ia};function fr(t,e,n,r){return n=n||{},r=r||"",h(t).forEach(function(i){if(!x(e,i))n[r+i]=void 0;else{var o=t[i],s=e[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){var c=An(o),f=An(s);c!==f?n[r+i]=e[i]:c==="Object"?fr(o,s,n,r+i+"."):o!==s&&(n[r+i]=e[i])}else o!==s&&(n[r+i]=e[i])}}),h(e).forEach(function(i){x(t,i)||(n[r+i]=e[i])}),n}function aa(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var ua={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return a(a({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=a(a({},n),{mutate:function(o){var s=V.trans,c=s.table(e).hook,f=c.deleting,p=c.creating,y=c.updating;switch(o.type){case"add":if(p.fire===ee)break;return s._promise("readwrite",function(){return v(o)},!0);case"put":if(p.fire===ee&&y.fire===ee)break;return s._promise("readwrite",function(){return v(o)},!0);case"delete":if(f.fire===ee)break;return s._promise("readwrite",function(){return v(o)},!0);case"deleteRange":if(f.fire===ee)break;return s._promise("readwrite",function(){return w(o)},!0)}return n.mutate(o);function v(k){var _=V.trans,K=k.keys||aa(r,k);if(!K)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?a(a({},k),{keys:K}):a({},k),k.type!=="delete"&&(k.values=u([],k.values,!0)),k.keys&&(k.keys=u([],k.keys,!0)),sa(n,k,K).then(function(I){var B=K.map(function(D,R){var A=I[R],M={onerror:null,onsuccess:null};if(k.type==="delete")f.fire.call(M,D,A,_);else if(k.type==="add"||A===void 0){var W=p.fire.call(M,D,k.values[R],_);D==null&&W!=null&&(D=W,k.keys[R]=D,r.outbound||Y(k.values[R],r.keyPath,D))}else{var N=fr(A,k.values[R]),U=y.fire.call(M,N,D,A,_);if(U){var G=k.values[R];Object.keys(U).forEach(function(Z){x(G,Z)?G[Z]=U[Z]:Y(G,Z,U[Z])})}}return M});return n.mutate(k).then(function(D){for(var R=D.failures,A=D.results,M=D.numFailures,W=D.lastResult,N=0;N<K.length;++N){var U=A?A[N]:K[N],G=B[N];U==null?G.onerror&&G.onerror(R[N]):G.onsuccess&&G.onsuccess(k.type==="put"&&I[N]?k.values[N]:U)}return{failures:R,results:A,numFailures:M,lastResult:W}}).catch(function(D){return B.forEach(function(R){return R.onerror&&R.onerror(D)}),Promise.reject(D)})})}function w(k){return P(k.trans,k.range,1e4)}function P(k,_,K){return n.query({trans:k,values:!1,query:{index:r,range:_},limit:K}).then(function(I){var B=I.result;return v({type:"delete",keys:B,trans:k}).then(function(D){return D.numFailures>0?Promise.reject(D.failures[0]):B.length<K?{failures:[],numFailures:0,lastResult:void 0}:P(k,a(a({},_),{lower:B[B.length-1],lowerOpen:!0}),K)})})}}});return i}})}};function sa(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function pi(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,o=0;i<e.keys.length&&o<t.length;++i)ye(e.keys[i],t[o])===0&&(r.push(n?yt(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch{return null}}var la={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return a(a({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=pi(r.keys,r.trans._cache,r.cache==="clone");return i?L.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?yt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},hr;function dr(t){return!("from"in t)}var Ce=function(t,e){if(this)g(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new Ce;return t&&"d"in t&&g(n,t),n}};S(Ce.prototype,(hr={add:function(t){return Ot(this,t),this},addKey:function(t){return Rt(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return Rt(e,n,n)}),this}},hr[Cn]=function(){return pr(this)},hr));function Rt(t,e,n){var r=ye(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(dr(t))return g(t,{from:e,to:n,d:1});var i=t.l,o=t.r;if(ye(n,t.from)<0)return i?Rt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},yi(t);if(ye(e,t.to)>0)return o?Rt(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},yi(t);ye(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),ye(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var s=!t.r;i&&!t.l&&Ot(t,i),o&&s&&Ot(t,o)}}function Ot(t,e){function n(r,i){var o=i.from,s=i.to,c=i.l,f=i.r;Rt(r,o,s),c&&n(r,c),f&&n(r,f)}dr(e)||n(t,e)}function vi(t,e){var n=pr(e),r=n.next();if(r.done)return!1;for(var i=r.value,o=pr(t),s=o.next(i.from),c=s.value;!r.done&&!s.done;){if(ye(c.from,i.to)<=0&&ye(c.to,i.from)>=0)return!0;ye(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(s=o.next(i.from)).value}return!1}function pr(t){var e=dr(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&ye(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||ye(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function yi(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",s=a({},t),c=t[i];t.from=c.from,t.to=c.to,t[i]=c[i],s[i]=c[o],t[o]=s,s.d=mi(s)}t.d=mi(t)}function mi(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var ca={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new Ce(t.MIN_KEY,t.MAX_KEY);return a(a({},t),{table:function(r){var i=t.table(r),o=i.schema,s=o.primaryKey,c=s.extractKey,f=s.outbound,p=a(a({},i),{mutate:function(w){var P=w.trans,k=P.mutatedParts||(P.mutatedParts={}),_=function(W){var N="idb://"+e+"/"+r+"/"+W;return k[N]||(k[N]=new Ce)},K=_(""),I=_(":dels"),B=w.type,D=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[[],w.values]:[],R=D[0],A=D[1],M=w.trans._cache;return i.mutate(w).then(function(W){if(d(R)){B!=="delete"&&(R=W.results),K.addKeys(R);var N=pi(R,M);!N&&B!=="add"&&I.addKeys(R),(N||A)&&fa(_,o,N,A)}else if(R){var U={from:R.lower,to:R.upper};I.add(U),K.add(U)}else K.add(n),I.add(n),o.indexes.forEach(function(G){return _(G.name).add(n)});return W})}}),y=function(w){var P,k,_=w.query,K=_.index,I=_.range;return[K,new Ce((P=I.lower)!==null&&P!==void 0?P:t.MIN_KEY,(k=I.upper)!==null&&k!==void 0?k:t.MAX_KEY)]},v={get:function(w){return[s,new Ce(w.key)]},getMany:function(w){return[s,new Ce().addKeys(w.keys)]},count:y,query:y,openCursor:y};return h(v).forEach(function(w){p[w]=function(P){var k=V.subscr;if(k){var _=function(M){var W="idb://"+e+"/"+r+"/"+M;return k[W]||(k[W]=new Ce)},K=_(""),I=_(":dels"),B=v[w](P),D=B[0],R=B[1];if(_(D.name||"").add(R),!D.isPrimaryKey)if(w==="count")I.add(n);else{var A=w==="query"&&f&&P.values&&i.query(a(a({},P),{values:!1}));return i[w].apply(this,arguments).then(function(M){if(w==="query"){if(f&&P.values)return A.then(function(G){var Z=G.result;return K.addKeys(Z),M});var W=P.values?M.result.map(c):M.result;P.values?K.addKeys(W):I.addKeys(W)}else if(w==="openCursor"){var N=M,U=P.values;return N&&Object.create(N,{key:{get:function(){return I.addKey(N.primaryKey),N.key}},primaryKey:{get:function(){var G=N.primaryKey;return I.addKey(G),G}},value:{get:function(){return U&&K.addKey(N.primaryKey),N.value}}})}return M})}}return i[w].apply(this,arguments)}}),p}})}};function fa(t,e,n,r){function i(o){var s=t(o.name||"");function c(p){return p!=null?o.extractKey(p):null}var f=function(p){return o.multiEntry&&d(p)?p.forEach(function(y){return s.addKey(y)}):s.addKey(p)};(n||r).forEach(function(p,y){var v=n&&c(n[y]),w=r&&c(r[y]);ye(v,w)!==0&&(v!=null&&f(v),w!=null&&f(w))})}e.indexes.forEach(i)}var Je=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=a({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};s.dbReadyPromise=new L(function(c){s.dbReadyResolve=c}),s.openCanceller=new L(function(c,f){s.cancelOpen=f}),this._state=s,this.name=e,this.on=St(this,"populate","blocked","versionchange","close",{ready:[On,ee]}),this.on.ready.subscribe=z(this.on.ready.subscribe,function(c){return function(f,p){t.vip(function(){var y=r._state;if(y.openComplete)y.dbOpenError||L.resolve().then(f),p&&c(f);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(f),p&&c(f);else{c(f);var v=r;p||c(function w(){v.on.ready.unsubscribe(f),v.on.ready.unsubscribe(w)})}})}}),this.Collection=Co(this),this.Table=Eo(this),this.Transaction=Bo(this),this.Version=qo(this),this.WhereClause=Po(this),this.on("versionchange",function(c){c.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(c){!c.newVersion||c.newVersion<c.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+c.oldVersion/10)}),this._maxKey=Kt(n.IDBKeyRange),this._createTransaction=function(c,f,p,y){return new r.Transaction(c,f,p,r._options.chromeTransactionDurability,y)},this._fireOnBlocked=function(c){r.on("blocked").fire(c),kt.filter(function(f){return f.name===r.name&&f!==r&&!f._state.vcFired}).map(function(f){return f.on("versionchange").fire(c)})},this.use(oa),this.use(ua),this.use(ca),this.use(la),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(c){return c(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new H.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(zo),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||V.letThrough||this._vip)?e():new L(function(r,i){if(n._state.openComplete)return i(new H.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new H.DatabaseClosed);return}n.open().catch(ee)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,o=e.name;o&&this.unuse({stack:n,name:o});var s=this._middlewares[n]||(this._middlewares[n]=[]);return s.push({stack:n,create:r,level:i??10,name:o}),s.sort(function(c,f){return c.level-f.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},t.prototype.open=function(){return na(this)},t.prototype._close=function(){var e=this._state,n=kt.indexOf(this);if(n>=0&&kt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new L(function(r){e.dbReadyResolve=r}),e.openCanceller=new L(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new H.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new L(function(i,o){var s=function(){e.close();var c=e._deps.indexedDB.deleteDatabase(e.name);c.onsuccess=ne(function(){ea(e._deps,e.name),i()}),c.onerror=Ae(o),c.onblocked=e._fireOnBlocked};if(n)throw new H.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(s):s()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=ra.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,o=V.trans;(!o||o.db!==this||e.indexOf("!")!==-1)&&(o=null);var s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var c,f;try{if(f=n.map(function(y){var v=y instanceof i.Table?y.name:y;if(typeof v!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return v}),e=="r"||e===Gn)c=Gn;else if(e=="rw"||e==Qn)c=Qn;else throw new H.InvalidArgument("Invalid transaction mode: "+e);if(o){if(o.mode===Gn&&c===Qn)if(s)o=null;else throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&f.forEach(function(y){if(o&&o.storeNames.indexOf(y)===-1)if(s)o=null;else throw new H.SubTransaction("Table "+y+" not included in parent transaction.")}),s&&o&&!o.active&&(o=null)}}catch(y){return o?o._promise(null,function(v,w){w(y)}):se(y)}var p=di.bind(null,this,c,f,o,r);return o?o._promise(c,p,"lock"):V.trans?st(V.transless,function(){return i._whenReady(p)}):this._whenReady(p)},t.prototype.table=function(e){if(!x(this._allTables,e))throw new H.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),ha=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",da=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[ha]=function(){return this},t}();function gi(t,e){return h(e).forEach(function(n){var r=t[n]||(t[n]=new Ce);Ot(r,e[n])}),t}function _i(t){return new da(function(e){var n=Tn(t);function r(P){n&&ut();var k=function(){return Fe(t,{subscr:P,trans:null})},_=V.trans?st(V.transless,k):k();return n&&_.then(Oe,Oe),_}var i=!1,o={},s={},c={get closed(){return i},unsubscribe:function(){i=!0,Le.storagemutated.unsubscribe(v)}};e.start&&e.start(c);var f=!1,p=!1;function y(){return h(s).some(function(P){return o[P]&&vi(o[P],s[P])})}var v=function(P){gi(o,P),y()&&w()},w=function(){if(!(f||i)){o={};var P={},k=r(P);p||(Le(Tt,v),p=!0),f=!0,Promise.resolve(k).then(function(_){f=!1,!i&&(y()?w():(o={},s=P,e.next&&e.next(_)))},function(_){f=!1,e.error&&e.error(_),c.unsubscribe()})}};return w(),c})}var vr;try{vr={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{vr={indexedDB:null,IDBKeyRange:null}}var Ze=Je;S(Ze,a(a({},zt),{delete:function(t){var e=new Ze(t,{addons:[]});return e.delete()},exists:function(t){return new Ze(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Jo(Ze.dependencies).then(t)}catch{return se(new H.MissingAPI)}},defineClass:function(){function t(e){g(this,e)}return t},ignoreTransaction:function(t){return V.trans?st(V.transless,t):t()},vip:lr,async:function(t){return function(){try{var e=cr(t.apply(this,arguments));return!e||typeof e.then!="function"?L.resolve(e):e}catch(n){return se(n)}}},spawn:function(t,e,n){try{var r=cr(t.apply(n,e||[]));return!r||typeof r.then!="function"?L.resolve(r):r}catch(i){return se(i)}},currentTransaction:{get:function(){return V.trans||null}},waitFor:function(t,e){var n=L.resolve(typeof t=="function"?Ze.ignoreTransaction(t):t).timeout(e||6e4);return V.trans?V.trans.waitFor(n):n},Promise:L,debug:{get:function(){return Se},set:function(t){Mr(t,t==="dexie"?function(){return!0}:ti)}},derive:j,extend:g,props:S,override:z,Events:St,on:Le,liveQuery:_i,extendObservabilitySet:gi,getByKeyPath:X,setByKeyPath:Y,delByKeyPath:ve,shallowClone:ge,deepClone:yt,getObjectDiff:fr,cmp:ye,asap:re,minKey:Yn,addons:[],connections:kt,errnames:Rn,dependencies:vr,semVer:Zr,version:Zr.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})})),Ze.maxKey=Kt(Ze.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Le(Tt,function(t){if(!Ie){var e;en?(e=document.createEvent("CustomEvent"),e.initCustomEvent(je,!0,!0,t)):e=new CustomEvent(je,{detail:t}),Ie=!0,dispatchEvent(e),Ie=!1}}),addEventListener(je,function(t){var e=t.detail;Ie||ln(e)}));function ln(t){var e=Ie;try{Ie=!0,Le.storagemutated.fire(t)}finally{Ie=e}}var Ie=!1;if(typeof BroadcastChannel<"u"){var cn=new BroadcastChannel(je);typeof cn.unref=="function"&&cn.unref(),Le(Tt,function(t){Ie||cn.postMessage(t)}),cn.onmessage=function(t){t.data&&ln(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Le(Tt,function(t){try{Ie||(typeof localStorage<"u"&&localStorage.setItem(je,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&u([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:je,changedParts:t})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(t){if(t.key===je){var e=JSON.parse(t.newValue);e&&ln(e.changedParts)}});var bi=self.document&&navigator.serviceWorker;bi&&bi.addEventListener("message",pa)}function pa(t){var e=t.data;e&&e.type===je&&ln(e.changedParts)}L.rejectionMapper=to,Mr(Se,ti);var va=Object.freeze({__proto__:null,Dexie:Je,liveQuery:_i,default:Je,RangeSet:Ce,mergeRanges:Ot,rangesOverlap:vi});return a(Je,va,{default:Je}),Je});function Ma(a){return typeof a=="object"}function Fa(a){return a instanceof Array}const kn=new Promise((a,u)=>{if(window!=null&&window.Dexie){const l=new window.Dexie("helloworldtodos",{});l.version(1).stores({todos:"++id"}),a(l)}else u(new Error("Dexie is not loaded in window"))});class $a{constructor(){hn(this,"subs",new Set);hn(this,"subscribe",u=>(u([]),(async()=>u(await this._dat()||[]))(),this.subs.add(u),()=>{this.subs.delete(u)}));hn(this,"_dat",()=>kn.then(u=>u.table("todos").toArray()))}async refresh(){const u=await this._dat()||[];this.subs.forEach(l=>l(u))}}function Na(a){return Ma(a)&&typeof a.description=="string"&&typeof a.done=="boolean"}const $t=new $a;async function ja(a,u=!0){await(await kn).table("todos").put(a),u&&await $t.refresh()}async function La(a,u=!0){await(await kn).table("todos").delete(a.id),u&&await $t.refresh()}const Er={todos:$t,set:ja,remove:La};if(localStorage){const a="rawTodos";let u;try{u=JSON.parse(localStorage.getItem(a))}catch(l){localStorage.removeItem(a),console.error("Error while initializing Todos: ",l)}Fa(u)&&(u=u.filter(Na),u.length&&kn.table("todos").bulkPut(u),localStorage.removeItem(a))}const ht=[];function za(a,u=ce){let l;const h=new Set;function d(m){if(Nt(a,m)&&(a=m,l)){const x=!ht.length;for(const S of h)S[1](),ht.push(S,a);if(x){for(let S=0;S<ht.length;S+=2)ht[S][0](ht[S+1]);ht.length=0}}}function g(m){d(m(a))}function b(m,x=ce){const S=[m,x];return h.add(S),h.size===1&&(l=u(d)||ce),m(a),()=>{h.delete(S),h.size===0&&l&&(l(),l=null)}}return{set:d,update:g,subscribe:b}}function Pr(a){const u=a-1;return u*u*u+1}function Va(a,u){var l={};for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&u.indexOf(h)<0&&(l[h]=a[h]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,h=Object.getOwnPropertySymbols(a);d<h.length;d++)u.indexOf(h[d])<0&&Object.prototype.propertyIsEnumerable.call(a,h[d])&&(l[h[d]]=a[h[d]]);return l}function xr(a,{delay:u=0,duration:l=400,easing:h=Pr,axis:d="y"}={}){const g=getComputedStyle(a),b=+g.opacity,m=d==="y"?"height":"width",x=parseFloat(g[m]),S=d==="y"?["top","bottom"]:["left","right"],$=S.map(z=>`${z[0].toUpperCase()}${z.slice(1)}`),F=parseFloat(g[`padding${$[0]}`]),j=parseFloat(g[`padding${$[1]}`]),C=parseFloat(g[`margin${$[0]}`]),E=parseFloat(g[`margin${$[1]}`]),O=parseFloat(g[`border${$[0]}Width`]),T=parseFloat(g[`border${$[1]}Width`]);return{delay:u,duration:l,easing:h,css:z=>`overflow: hidden;opacity: ${Math.min(z*20,1)*b};${m}: ${z*x}px;padding-${S[0]}: ${z*F}px;padding-${S[1]}: ${z*j}px;margin-${S[0]}: ${z*C}px;margin-${S[1]}: ${z*E}px;border-${S[0]}-width: ${z*O}px;border-${S[1]}-width: ${z*T}px;`}}function Wa(a){var{fallback:u}=a,l=Va(a,["fallback"]);const h=new Map,d=new Map;function g(m,x,S){const{delay:$=0,duration:F=Y=>Math.sqrt(Y)*30,easing:j=Pr}=wi(wi({},l),S),C=m.getBoundingClientRect(),E=x.getBoundingClientRect(),O=C.left-E.left,T=C.top-E.top,z=C.width/E.width,q=C.height/E.height,re=Math.sqrt(O*O+T*T),oe=getComputedStyle(x),ae=oe.transform==="none"?"":oe.transform,X=+oe.opacity;return{delay:$,duration:nt(F)?F(re):F,easing:j,css:(Y,ve)=>`
				opacity: ${Y*X};
				transform-origin: top left;
				transform: ${ae} translate(${ve*O}px,${ve*T}px) scale(${Y+(1-Y)*z}, ${Y+(1-Y)*q});
			`}}function b(m,x,S){return($,F)=>(m.set(F.key,$),()=>{if(x.has(F.key)){const j=x.get(F.key);return x.delete(F.key),g(j,$,F)}return m.delete(F.key),u&&u($,F,S)})}return[b(d,h,!1),b(h,d,!0)]}function Ki(a,u,l){const h=a.slice();return h[3]=u[l],h}function Di(a,u){let l,h=u[3].msg+"",d,g,b,m,x;return{key:a,first:null,c(){l=ue("article"),d=jt(h),g=me(),fe(l,"class",b=xi(u[3].cssClass)+" svelte-lwkk25"),this.first=l},m(S,$){pe(S,l,$),ie(l,d),ie(l,g),x=!0},p(S,$){u=S,(!x||$&1)&&h!==(h=u[3].msg+"")&&Tr(d,h),(!x||$&1&&b!==(b=xi(u[3].cssClass)+" svelte-lwkk25"))&&fe(l,"class",b)},i(S){x||(Be(()=>{m||(m=Ci(l,xr,{duration:250},!0)),m.run(1)}),x=!0)},o(S){m||(m=Ci(l,xr,{duration:250},!1)),m.run(0),x=!1},d(S){S&&le(l),S&&m&&m.end()}}}function Ha(a){let u,l=[],h=new Map,d,g=a[0];const b=m=>m[3].id;for(let m=0;m<g.length;m+=1){let x=Ki(a,g,m),S=b(x);h.set(S,l[m]=Di(S,x))}return{c(){u=ue("div");for(let m=0;m<l.length;m+=1)l[m].c();fe(u,"class","toastcontainer svelte-lwkk25")},m(m,x){pe(m,u,x);for(let S=0;S<l.length;S+=1)l[S]&&l[S].m(u,null);d=!0},p(m,[x]){x&1&&(g=m[0],_r(),l=wr(l,x,b,1,m,g,h,u,Hi,Di,null,Ki),br())},i(m){if(!d){for(let x=0;x<g.length;x+=1)He(l[x]);d=!0}},o(m){for(let x=0;x<l.length;x+=1)tt(l[x]);d=!1},d(m){m&&le(u);for(let x=0;x<l.length;x+=1)l[x].d()}}}let Ua=1;const kr=za([]);function Ya(a,u,l=4){kr.update(h=>(h.push({id:Ua++,msg:a,cssClass:u,timeout:l}),h))}function Ga(a,u,l){let h;Mi(a,kr,b=>l(0,h=b));let d;function g(){!d&&h.length&&(d=window.setTimeout(()=>{h.forEach(b=>b.timeout--),Ea(kr,h=h.filter(b=>b.timeout>0),h),d=void 0,g()},1e3))}return a.$$.update=()=>{a.$$.dirty&1&&h.length&&g()},[h]}class Qa extends xn{constructor(u){super(),En(this,u,Ga,Ha,Nt,{})}}function Xa(a){let u,l,h,d,g,b;return{c(){u=ue("div"),l=ue("input"),h=me(),d=ue("button"),fe(l,"type","text"),fe(d,"class","fa fa-circle-plus svelte-tupxg1"),fe(u,"class","svelte-tupxg1")},m(m,x){pe(m,u,x),ie(u,l),ki(l,a[0].description),ie(u,h),ie(u,d),g||(b=[We(l,"input",a[2]),We(d,"click",Cr(a[1]))],g=!0)},p(m,[x]){x&1&&l.value!==m[0].description&&ki(l,m[0].description)},i:ce,o:ce,d(m){m&&le(u),g=!1,ke(b)}}}function qa(a,u,l){let h={description:"",done:!1};const d=()=>{h.description.trim()==""?Ya("noting to add","alert"):(l(0,h.description=h.description.trim(),h),Er.set(h),l(0,h={description:"",done:!1}))};function g(){h.description=this.value,l(0,h)}return[h,d,g]}class Ja extends xn{constructor(u){super(),En(this,u,qa,Xa,Nt,{})}}function Ui(a,{from:u,to:l},h={}){const d=getComputedStyle(a),g=d.transform==="none"?"":d.transform,[b,m]=d.transformOrigin.split(" ").map(parseFloat),x=u.left+u.width*b/l.width-(l.left+b),S=u.top+u.height*m/l.height-(l.top+m),{delay:$=0,duration:F=C=>Math.sqrt(C)*120,easing:j=Pr}=h;return{delay:$,duration:nt(F)?F(Math.sqrt(x*x+S*S)):F,easing:j,css:(C,E)=>{const O=E*x,T=E*S,z=C+E*u.width/l.width,q=C+E*u.height/l.height;return`transform: ${g} translate(${O}px, ${T}px) scale(${z}, ${q});`}}}function Ri(a,u,l){const h=a.slice();return h[13]=u[l],h[14]=u,h[15]=l,h}function Oi(a,u,l){const h=a.slice();return h[13]=u[l],h[16]=u,h[17]=l,h}function Pi(a,u){let l,h,d,g,b,m=u[13].description+"",x,S,$,F,j,C,E=ce,O,T,z;function q(){u[7].call(d,u[16],u[17])}function re(){return u[8](u[13],u[16],u[17])}function oe(){return u[9](u[13])}return{key:a,first:null,c(){l=ue("article"),h=ue("span"),d=ue("input"),g=me(),b=ue("span"),x=jt(m),S=me(),$=ue("button"),fe(d,"type","checkbox"),fe(b,"class","txt svelte-4lutm4"),fe($,"class","fa fa-trash-can"),fe($,"title","delete"),fe(l,"class","svelte-4lutm4"),yn(l,"done",u[13].done),this.first=l},m(ae,X){pe(ae,l,X),ie(l,h),ie(h,d),d.checked=u[13].done,ie(l,g),ie(l,b),ie(b,x),ie(l,S),ie(l,$),O=!0,T||(z=[We(d,"change",q),We(d,"click",re),We($,"click",Cr(oe))],T=!0)},p(ae,X){u=ae,X&2&&(d.checked=u[13].done),(!O||X&2)&&m!==(m=u[13].description+"")&&Tr(x,m),(!O||X&2)&&yn(l,"done",u[13].done)},r(){C=l.getBoundingClientRect()},f(){Li(l),E(),Kr(l,C)},a(){E(),E=ji(l,C,Ui,{duration:250})},i(ae){O||(ae&&Be(()=>{j&&j.end(1),F=Vi(l,u[4],{key:u[13].id}),F.start()}),O=!0)},o(ae){F&&F.invalidate(),j=Wi(l,u[3],{key:u[13].id}),O=!1},d(ae){ae&&le(l),ae&&j&&j.end(),T=!1,ke(z)}}}function Ii(a,u){let l,h,d,g,b,m=u[13].description+"",x,S,$,F,j,C,E,O=ce,T,z,q;function re(){u[10].call(d,u[14],u[15])}function oe(){return u[11](u[13],u[14],u[15])}function ae(){return u[12](u[13])}return{key:a,first:null,c(){l=ue("article"),h=ue("span"),d=ue("input"),g=me(),b=ue("span"),x=jt(m),S=me(),$=ue("button"),F=me(),fe(d,"type","checkbox"),fe(b,"class","txt svelte-4lutm4"),fe($,"class","fa fa-trash-can"),fe($,"title","delete"),fe(l,"class","svelte-4lutm4"),yn(l,"done",u[13].done),this.first=l},m(X,Y){pe(X,l,Y),ie(l,h),ie(h,d),d.checked=u[13].done,ie(l,g),ie(l,b),ie(b,x),ie(l,S),ie(l,$),ie(l,F),T=!0,z||(q=[We(d,"change",re),We(d,"click",oe),We($,"click",Cr(ae))],z=!0)},p(X,Y){u=X,Y&1&&(d.checked=u[13].done),(!T||Y&1)&&m!==(m=u[13].description+"")&&Tr(x,m),(!T||Y&1)&&yn(l,"done",u[13].done)},r(){E=l.getBoundingClientRect()},f(){Li(l),O(),Kr(l,E)},a(){O(),O=ji(l,E,Ui,{duration:250})},i(X){T||(X&&Be(()=>{C&&C.end(1),j=Vi(l,u[4],{key:u[13].id}),j.start()}),T=!0)},o(X){j&&j.invalidate(),C=Wi(l,u[3],{key:u[13].id}),T=!1},d(X){X&&le(l),X&&C&&C.end(),z=!1,ke(q)}}}function Za(a){let u=[],l=new Map,h,d,g,b=[],m=new Map,x,S,$=a[1];const F=E=>E[13].id;for(let E=0;E<$.length;E+=1){let O=Oi(a,$,E),T=F(O);l.set(T,u[E]=Pi(T,O))}let j=a[0];const C=E=>E[13].id;for(let E=0;E<j.length;E+=1){let O=Ri(a,j,E),T=C(O);m.set(T,b[E]=Ii(T,O))}return{c(){for(let E=0;E<u.length;E+=1)u[E].c();h=me(),d=ue("h3"),d.textContent="Done:",g=me();for(let E=0;E<b.length;E+=1)b[E].c();x=Sa()},m(E,O){for(let T=0;T<u.length;T+=1)u[T]&&u[T].m(E,O);pe(E,h,O),pe(E,d,O),pe(E,g,O);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(E,O);pe(E,x,O),S=!0},p(E,[O]){if(O&6){$=E[1],_r();for(let T=0;T<u.length;T+=1)u[T].r();u=wr(u,O,F,1,E,$,l,h.parentNode,Ti,Pi,h,Oi);for(let T=0;T<u.length;T+=1)u[T].a();br()}if(O&5){j=E[0],_r();for(let T=0;T<b.length;T+=1)b[T].r();b=wr(b,O,C,1,E,j,m,x.parentNode,Ti,Ii,x,Ri);for(let T=0;T<b.length;T+=1)b[T].a();br()}},i(E){if(!S){for(let O=0;O<$.length;O+=1)He(u[O]);for(let O=0;O<j.length;O+=1)He(b[O]);S=!0}},o(E){for(let O=0;O<u.length;O+=1)tt(u[O]);for(let O=0;O<b.length;O+=1)tt(b[O]);S=!1},d(E){for(let O=0;O<u.length;O+=1)u[O].d(E);E&&le(h),E&&le(d),E&&le(g);for(let O=0;O<b.length;O+=1)b[O].d(E);E&&le(x)}}}function eu(a,u,l){let h,d,g,b;Mi(a,$t,T=>l(6,b=T));const m=T=>{confirm("remove todo permanently ?")&&Er.remove(T)},[x,S]=Wa({fallback:xr});function $(T,z){T[z].done=this.checked,l(1,d),l(5,h),l(6,b)}const F=(T,z,q)=>{l(1,z[q].done=!T.done,d),Er.set(T)},j=T=>m(T);function C(T,z){T[z].done=this.checked,l(0,g),l(5,h),l(6,b)}const E=(T,z,q)=>{l(0,z[q].done=!T.done,g),$t.refresh()},O=T=>m(T);return a.$$.update=()=>{a.$$.dirty&64&&console.log(JSON.stringify(b)),a.$$.dirty&64&&l(5,h=[...b].reverse()),a.$$.dirty&32&&l(1,d=h.filter(T=>!T.done)),a.$$.dirty&32&&l(0,g=h.filter(T=>T.done))},[g,d,m,x,S,h,b,$,F,j,C,E,O]}class tu extends xn{constructor(u){super(),En(this,u,eu,Za,Nt,{})}}function nu(a){let u,l,h,d,g,b,m,x,S,$,F,j;return g=new Qa({}),S=new Ja({}),F=new tu({}),{c(){u=ue("base"),l=me(),h=ue("nav"),h.innerHTML=`<ul><li><strong>HelloWorld Todo&#39;s</strong></li></ul> 
    <ul><li><a href="https://github.com/Rocco-Gossmann/SvelteHelloWorldTodos" target="_blank">GitHub</a></li></ul>`,d=me(),mr(g.$$.fragment),b=me(),m=ue("h1"),m.textContent="Todos",x=me(),mr(S.$$.fragment),$=me(),mr(F.$$.fragment),fe(u,"href","/SvelteHelloWorldTodos"),fe(m,"class","text-center")},m(C,E){ie(document.head,u),pe(C,l,E),pe(C,h,E),pe(C,d,E),pn(g,C,E),pe(C,b,E),pe(C,m,E),pe(C,x,E),pn(S,C,E),pe(C,$,E),pn(F,C,E),j=!0},p:ce,i(C){j||(He(g.$$.fragment,C),He(S.$$.fragment,C),He(F.$$.fragment,C),j=!0)},o(C){tt(g.$$.fragment,C),tt(S.$$.fragment,C),tt(F.$$.fragment,C),j=!1},d(C){le(u),C&&le(l),C&&le(h),C&&le(d),vn(g,C),C&&le(b),C&&le(m),C&&le(x),vn(S,C),C&&le($),vn(F,C)}}}class ru extends xn{constructor(u){super(),En(this,u,null,nu,Nt,{})}}new ru({target:document.getElementById("app")})});export default iu();
