(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function N(){}const Ft=t=>t;function An(t,e){for(const n in e)t[n]=e[n];return t}function fs(t){return t()}function Cr(){return Object.create(null)}function ce(t){t.forEach(fs)}function Le(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ai(t){return Object.keys(t).length===0}function bn(t,...e){if(t==null)return N;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function se(t,e,n){t.$$.on_destroy.push(bn(e,n))}function li(t,e,n,r){if(t){const s=ds(t,e,n,r);return t[0](s)}}function ds(t,e,n,r){return t[1]&&r?An(n.ctx.slice(),t[1](r(e))):n.ctx}function ui(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|s[a];return i}return e.dirty|s}return e.dirty}function ci(t,e,n,r,s,i){if(s){const o=ds(e,n,r,i);t.p(o,s)}}function fi(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Pr(t){return t??""}function ut(t,e,n){return t.set(n),e}const hs=typeof window<"u";let vn=hs?()=>window.performance.now():()=>Date.now(),or=hs?t=>requestAnimationFrame(t):N;const ct=new Set;function ps(t){ct.forEach(e=>{e.c(t)||(ct.delete(e),e.f())}),ct.size!==0&&or(ps)}function wn(t){let e;return ct.size===0&&or(ps),{promise:new Promise(n=>{ct.add(e={c:t,f:n})}),abort(){ct.delete(e)}}}function P(t,e){t.appendChild(e)}function ms(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function di(t){const e=K("style");return hi(ms(t),e),e.sheet}function hi(t,e){return P(t.head||t,e),e.sheet}function T(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function ar(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function K(t){return document.createElement(t)}function me(t){return document.createTextNode(t)}function I(){return me(" ")}function Ae(){return me("")}function W(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function te(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pi(t){return Array.from(t.childNodes)}function qt(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ne(t,e){t.value=e??""}function _e(t,e,n){t.classList[n?"add":"remove"](e)}function ys(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,r,e),s}const ln=new Map;let un=0;function mi(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function yi(t,e){const n={stylesheet:di(e),rules:{}};return ln.set(t,n),n}function At(t,e,n,r,s,i,o,a=0){const l=16.666/r;let u=`{
`;for(let g=0;g<=1;g+=l){const y=e+(n-e)*i(g);u+=g*100+`%{${o(y,1-y)}}
`}const c=u+`100% {${o(n,1-n)}}
}`,f=`__svelte_${mi(c)}_${a}`,d=ms(t),{stylesheet:h,rules:p}=ln.get(d)||yi(d,t);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${c}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${s}ms 1 both`,un+=1,f}function jt(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-r.length;s&&(t.style.animation=r.join(", "),un-=s,un||gi())}function gi(){or(()=>{un||(ln.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&O(e)}),ln.clear())})}function gs(t,e,n,r){if(!e)return N;const s=t.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return N;const{delay:i=0,duration:o=300,easing:a=Ft,start:l=vn()+i,end:u=l+o,tick:c=N,css:f}=n(t,{from:e,to:s},r);let d=!0,h=!1,p;function m(){f&&(p=At(t,0,1,o,i,a,f)),i||(h=!0)}function g(){f&&jt(t,p),d=!1}return wn(y=>{if(!h&&y>=l&&(h=!0),h&&y>=u&&(c(1,0),g()),!d)return!1;if(h){const _=y-l,b=0+1*a(_/o);c(b,1-b)}return!0}),m(),c(0,1),g}function _s(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,lr(t,s)}}function lr(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),s=r.transform==="none"?"":r.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let Dt;function St(t){Dt=t}function ur(){if(!Dt)throw new Error("Function called outside component initialization");return Dt}function _i(t){ur().$$.on_mount.push(t)}function bi(t){ur().$$.on_destroy.push(t)}function bs(){const t=ur();return(e,n,{cancelable:r=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=ys(e,n,{cancelable:r});return s.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}const ot=[],jn=[];let ft=[];const Or=[],vi=Promise.resolve();let Dn=!1;function wi(){Dn||(Dn=!0,vi.then(vs))}function ie(t){ft.push(t)}const Sn=new Set;let nt=0;function vs(){if(nt!==0)return;const t=Dt;do{try{for(;nt<ot.length;){const e=ot[nt];nt++,St(e),ki(e.$$)}}catch(e){throw ot.length=0,nt=0,e}for(St(null),ot.length=0,nt=0;jn.length;)jn.pop()();for(let e=0;e<ft.length;e+=1){const n=ft[e];Sn.has(n)||(Sn.add(n),n())}ft.length=0}while(ot.length);for(;Or.length;)Or.pop()();Dn=!1,Sn.clear(),St(t)}function ki(t){if(t.fragment!==null){t.update(),ce(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ie)}}function xi(t){const e=[],n=[];ft.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ft=e}let wt;function cr(){return wt||(wt=Promise.resolve(),wt.then(()=>{wt=null})),wt}function He(t,e,n){t.dispatchEvent(ys(`${e?"intro":"outro"}${n}`))}const Xt=new Set;let be;function oe(){be={r:0,c:[],p:be}}function ae(){be.r||ce(be.c),be=be.p}function j(t,e){t&&t.i&&(Xt.delete(t),t.i(e))}function B(t,e,n,r){if(t&&t.o){if(Xt.has(t))return;Xt.add(t),be.c.push(()=>{Xt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const fr={duration:0};function dr(t,e,n){const r={direction:"in"};let s=e(t,n,r),i=!1,o,a,l=0;function u(){o&&jt(t,o)}function c(){const{delay:d=0,duration:h=300,easing:p=Ft,tick:m=N,css:g}=s||fr;g&&(o=At(t,0,1,h,d,p,g,l++)),m(0,1);const y=vn()+d,_=y+h;a&&a.abort(),i=!0,ie(()=>He(t,!0,"start")),a=wn(b=>{if(i){if(b>=_)return m(1,0),He(t,!0,"end"),u(),i=!1;if(b>=y){const w=p((b-y)/h);m(w,1-w)}}return i})}let f=!1;return{start(){f||(f=!0,jt(t),Le(s)?(s=s(r),cr().then(c)):c())},invalidate(){f=!1},end(){i&&(u(),i=!1)}}}function hr(t,e,n){const r={direction:"out"};let s=e(t,n,r),i=!0,o;const a=be;a.r+=1;function l(){const{delay:u=0,duration:c=300,easing:f=Ft,tick:d=N,css:h}=s||fr;h&&(o=At(t,1,0,c,u,f,h));const p=vn()+u,m=p+c;ie(()=>He(t,!1,"start")),wn(g=>{if(i){if(g>=m)return d(0,1),He(t,!1,"end"),--a.r||ce(a.c),!1;if(g>=p){const y=f((g-p)/c);d(1-y,y)}}return i})}return Le(s)?cr().then(()=>{s=s(r),l()}):l(),{end(u){u&&s.tick&&s.tick(1,0),i&&(o&&jt(t,o),i=!1)}}}function we(t,e,n,r){const s={direction:"both"};let i=e(t,n,s),o=r?0:1,a=null,l=null,u=null;function c(){u&&jt(t,u)}function f(h,p){const m=h.b-o;return p*=Math.abs(m),{a:o,b:h.b,d:m,duration:p,start:h.start,end:h.start+p,group:h.group}}function d(h){const{delay:p=0,duration:m=300,easing:g=Ft,tick:y=N,css:_}=i||fr,b={start:vn()+p,b:h};h||(b.group=be,be.r+=1),a||l?l=b:(_&&(c(),u=At(t,o,h,m,p,g,_)),h&&y(0,1),a=f(b,m),ie(()=>He(t,h,"start")),wn(w=>{if(l&&w>l.start&&(a=f(l,m),l=null,He(t,a.b,"start"),_&&(c(),u=At(t,o,a.b,a.duration,0,g,i.css))),a){if(w>=a.end)y(o=a.b,1-o),He(t,a.b,"end"),l||(a.b?c():--a.group.r||ce(a.group.c)),a=null;else if(w>=a.start){const x=w-a.start;o=a.a+a.d*g(x/a.duration),y(o,1-o)}}return!!(a||l)}))}return{run(h){Le(i)?cr().then(()=>{i=i(s),d(h)}):d(h)},end(){c(),a=l=null}}}function ws(t,e){B(t,1,1,()=>{e.delete(t.key)})}function Kr(t,e){t.f(),ws(t,e)}function Bn(t,e,n,r,s,i,o,a,l,u,c,f){let d=t.length,h=i.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const g=[],y=new Map,_=new Map,b=[];for(p=h;p--;){const k=f(s,i,p),C=n(k);let E=o.get(C);E?r&&b.push(()=>E.p(k,e)):(E=u(C,k),E.c()),y.set(C,g[p]=E),C in m&&_.set(C,Math.abs(p-m[C]))}const w=new Set,x=new Set;function v(k){j(k,1),k.m(a,c),o.set(k.key,k),c=k.first,h--}for(;d&&h;){const k=g[h-1],C=t[d-1],E=k.key,R=C.key;k===C?(c=k.first,d--,h--):y.has(R)?!o.has(E)||w.has(E)?v(k):x.has(R)?d--:_.get(E)>_.get(R)?(x.add(E),v(k)):(w.add(R),d--):(l(C,o),d--)}for(;d--;){const k=t[d];y.has(k.key)||l(k,o)}for(;h;)v(g[h-1]);return ce(b),g}function ee(t){t&&t.c()}function Q(t,e,n,r){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),r||ie(()=>{const o=t.$$.on_mount.map(fs).filter(Le);t.$$.on_destroy?t.$$.on_destroy.push(...o):ce(o),t.$$.on_mount=[]}),i.forEach(ie)}function J(t,e){const n=t.$$;n.fragment!==null&&(xi(n.after_update),ce(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ei(t,e){t.$$.dirty[0]===-1&&(ot.push(t),wi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function fe(t,e,n,r,s,i,o,a=[-1]){const l=Dt;St(t);const u=t.$$={fragment:null,ctx:[],props:i,update:N,not_equal:s,bound:Cr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Cr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,d,...h)=>{const p=h.length?h[0]:d;return u.ctx&&s(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&Ei(t,f)),d}):[],u.update(),c=!0,ce(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=pi(e.target);u.fragment&&u.fragment.l(f),f.forEach(O)}else u.fragment&&u.fragment.c();e.intro&&j(t.$$.fragment),Q(t,e.target,e.anchor,e.customElement),vs()}St(l)}class de{$destroy(){J(this,1),this.$destroy=N}$on(e,n){if(!Le(n))return N;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!ai(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}window.addEventListener("load",()=>{const t=document.createElement("div");t.style.overflow="scroll",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const n=t.offsetWidth-e.offsetWidth;t.parentNode.removeChild(t);const r=document.querySelector(".noscrollbars");r&&r.style.setProperty("--scrollbarwidth",n+"px")});const F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,H=Object.keys,X=Array.isArray;function ne(t,e){return typeof e!="object"||H(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||F.Promise||(F.Promise=Promise);const mt=Object.getPrototypeOf,Si={}.hasOwnProperty;function pe(t,e){return Si.call(t,e)}function yt(t,e){typeof e=="function"&&(e=e(mt(t))),(typeof Reflect>"u"?H:Reflect.ownKeys)(e).forEach(n=>{Pe(t,n,e[n])})}const ks=Object.defineProperty;function Pe(t,e,n,r){ks(t,e,ne(n&&pe(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function dt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Pe(t.prototype,"constructor",t),{extend:yt.bind(null,t.prototype)}}}}const $i=Object.getOwnPropertyDescriptor;function pr(t,e){let n;return $i(t,e)||(n=mt(t))&&pr(n,e)}const Ci=[].slice;function cn(t,e,n){return Ci.call(t,e,n)}function xs(t,e){return e(t)}function xt(t){if(!t)throw new Error("Assertion Failed")}function Es(t){F.setImmediate?setImmediate(t):setTimeout(t,0)}function Ss(t,e){return t.reduce((n,r,s)=>{var i=e(r,s);return i&&(n[i[0]]=i[1]),n},{})}function Oe(t,e){if(pe(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var i=Oe(t,e[r]);n.push(i)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:Oe(a,e.substr(o+1))}}function he(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){xt(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)he(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var o=e.substr(0,i),a=e.substr(i+1);if(a==="")n===void 0?X(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&pe(t,o)||(l=t[o]={}),he(l,a,n)}}else n===void 0?X(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function $s(t){var e={};for(var n in t)pe(t,n)&&(e[n]=t[n]);return e}const Pi=[].concat;function Cs(t){return Pi.apply([],t)}const Ps="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Cs([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>F[t]),Oi=Ps.map(t=>F[t]);Ss(Ps,t=>[t,!0]);let Be=null;function Lt(t){Be=typeof WeakMap<"u"&&new WeakMap;const e=In(t);return Be=null,e}function In(t){if(!t||typeof t!="object")return t;let e=Be&&Be.get(t);if(e)return e;if(X(t)){e=[],Be&&Be.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(In(t[n]))}else if(Oi.indexOf(t.constructor)>=0)e=t;else{const i=mt(t);for(var s in e=i===Object.prototype?{}:Object.create(i),Be&&Be.set(t,e),t)pe(t,s)&&(e[s]=In(t[s]))}return e}const{toString:Ki}={};function Rn(t){return Ki.call(t).slice(8,-1)}const Nn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ti=typeof Nn=="symbol"?function(t){var e;return t!=null&&(e=t[Nn])&&e.apply(t)}:function(){return null},at={};function $e(t){var e,n,r,s;if(arguments.length===1){if(X(t))return t.slice();if(this===at&&typeof t=="string")return[t];if(s=Ti(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const mr=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var ke=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Os(t,e){ke=t,Ks=e}var Ks=()=>!0;const Ai=!new Error("").stack;function Ze(){if(Ai)try{throw Ze.arguments,new Error}catch(t){return t}return new Error}function Mn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Ks).map(r=>`
`+r).join("")):""}var Ts=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],yr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ts),ji={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ht(t,e){this._e=Ze(),this.name=t,this.message=e}function As(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function fn(t,e,n,r){this._e=Ze(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=As(t,e)}function lt(t,e){this._e=Ze(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=As(t,this.failures)}dt(ht).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Mn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),dt(fn).from(ht),dt(lt).from(ht);var gr=yr.reduce((t,e)=>(t[e]=e+"Error",t),{});const Di=ht;var D=yr.reduce((t,e)=>{var n=e+"Error";function r(s,i){this._e=Ze(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=ji[e]||n,this.inner=null)}return dt(r).from(Di),t[e]=r,t},{});D.Syntax=SyntaxError,D.Type=TypeError,D.Range=RangeError;var Tr=Ts.reduce((t,e)=>(t[e+"Error"]=D[e],t),{}),Zt=yr.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=D[e]),t),{});function M(){}function Bt(t){return t}function Bi(t,e){return t==null||t===Bt?e:function(n){return e(t(n))}}function Qe(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Ii(t,e){return t===M?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Qe(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Qe(s,this.onerror):s),i!==void 0?i:n}}function Ri(t,e){return t===M?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Qe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Qe(r,this.onerror):r)}}function Ni(t,e){return t===M?e:function(n){var r=t.apply(this,arguments);ne(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Qe(s,this.onsuccess):s),i&&(this.onerror=this.onerror?Qe(i,this.onerror):i),r===void 0?o===void 0?void 0:o:ne(r,o)}}function Mi(t,e){return t===M?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function _r(t,e){return t===M?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}Zt.ModifyError=fn,Zt.DexieError=ht,Zt.BulkError=lt;var It={};const[Fn,dn,qn]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,mt(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,mt(e),t]})(),js=dn&&dn.then,en=Fn&&Fn.constructor,br=!!qn;var Ln=!1,Fi=qn?()=>{qn.then(Vt)}:F.setImmediate?setImmediate.bind(null,Vt):F.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Vt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Vt,0)},$t=function(t,e){Et.push([t,e]),hn&&(Fi(),hn=!1)},Un=!0,hn=!0,ze=[],tn=[],Wn=null,Vn=Bt,pt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:jr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{jr(t[0],t[1])}catch{}})}},A=pt,Et=[],Ge=0,nn=[];function $(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=M,this._lib=!1;var e=this._PSD=A;if(ke&&(this._stackHolder=Ze(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==It)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&zn(this,this._value))}this._state=null,this._value=null,++e.ref,Bs(this,t)}const Hn={get:function(){var t=A,e=pn;function n(r,s){var i=!t.global&&(t!==A||e!==pn);const o=i&&!Te();var a=new $((l,u)=>{vr(this,new Ds(mn(r,t,i,o),mn(s,t,i,o),l,u,t))});return ke&&Ns(a,this),a}return n.prototype=It,n},set:function(t){Pe(this,"then",t&&t.prototype===It?Hn:{get:function(){return t},set:Hn.set})}};function Ds(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function Bs(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Ut();n&&typeof n.then=="function"?Bs(t,(s,i)=>{n instanceof $?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,Is(t)),r&&Wt()}},zn.bind(null,t))}catch(n){zn(t,n)}}function zn(t,e){if(tn.push(e),t._state===null){var n=t._lib&&Ut();e=Vn(e),t._state=!1,t._value=e,ke&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,i){try{r.apply(null,i)}catch(o){s&&s(o)}}(()=>{var r=pr(e,"stack");e._promise=t,Pe(e,"stack",{get:()=>Ln?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){ze.some(s=>s._value===r._value)||ze.push(r)}(t),Is(t),n&&Wt()}}function Is(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)vr(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),Ge===0&&(++Ge,$t(()=>{--Ge==0&&wr()},[]))}function vr(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ge,$t(qi,[n,t,e])}else t._listeners.push(e)}function qi(t,e,n){try{Wn=e;var r,s=e._value;e._state?r=t(s):(tn.length&&(tn=[]),r=t(s),tn.indexOf(s)===-1&&function(i){for(var o=ze.length;o;)if(ze[--o]._value===i._value)return void ze.splice(o,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{Wn=null,--Ge==0&&wr(),--n.psd.ref||n.psd.finalize()}}function Rs(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,i,o=t._value;o!=null?(s=o.name||"Error",i=o.message||o,r=Mn(o,0)):(s=o,i=""),e.push(s+(i?": "+i:"")+r)}return ke&&((r=Mn(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&Rs(t._prev,e,n)),e}function Ns(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Vt(){Ut()&&Wt()}function Ut(){var t=Un;return Un=!1,hn=!1,t}function Wt(){var t,e,n;do for(;Et.length>0;)for(t=Et,Et=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Et.length>0);Un=!0,hn=!0}function wr(){var t=ze;ze=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=nn.slice(0),n=e.length;n;)e[--n]()}function Ht(t){return new $(It,!1,t)}function q(t,e){var n=A;return function(){var r=Ut(),s=A;try{return Fe(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{Fe(s,!1),r&&Wt()}}}yt($.prototype,{then:Hn,_then:function(t,e){vr(this,new Ds(null,null,t,e,A))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Ht(r)):this.then(null,r=>r&&r.name===e?n(r):Ht(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Ht(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Ln=!0;var t=Rs(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Ln=!1}}},timeout:function(t,e){return t<1/0?new $((n,r)=>{var s=setTimeout(()=>r(new D.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Pe($.prototype,Symbol.toStringTag,"Dexie.Promise"),pt.env=Ms(),yt($,{all:function(){var t=$e.apply(null,arguments).map(zt);return new $(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,i)=>$.resolve(s).then(o=>{t[i]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof $)return t;if(t&&typeof t.then=="function")return new $((n,r)=>{t.then(n,r)});var e=new $(It,!0,t);return Ns(e,Wn),e},reject:Ht,race:function(){var t=$e.apply(null,arguments).map(zt);return new $((e,n)=>{t.map(r=>$.resolve(r).then(e,n))})},PSD:{get:()=>A,set:t=>A=t},totalEchoes:{get:()=>pn},newPSD:Me,usePSD:bt,scheduler:{get:()=>$t,set:t=>{$t=t}},rejectionMapper:{get:()=>Vn,set:t=>{Vn=t}},follow:(t,e)=>new $((n,r)=>Me((s,i)=>{var o=A;o.unhandleds=[],o.onunhandled=i,o.finalize=Qe(function(){(function(a){function l(){a(),nn.splice(nn.indexOf(l),1)}nn.push(l),++Ge,$t(()=>{--Ge==0&&wr()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),en&&(en.allSettled&&Pe($,"allSettled",function(){const t=$e.apply(null,arguments).map(zt);return new $(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,i)=>$.resolve(s).then(o=>r[i]={status:"fulfilled",value:o},o=>r[i]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),en.any&&typeof AggregateError<"u"&&Pe($,"any",function(){const t=$e.apply(null,arguments).map(zt);return new $((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((i,o)=>$.resolve(i).then(a=>e(a),a=>{s[o]=a,--r||n(new AggregateError(s))}))})}));const Y={awaits:0,echoes:0,id:0};var Li=0,rn=[],$n=0,pn=0,Ui=0;function Me(t,e,n,r){var s=A,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++Ui;var o=pt.env;i.env=br?{Promise:$,PromiseProp:{value:$,configurable:!0,writable:!0},all:$.all,race:$.race,allSettled:$.allSettled,any:$.any,resolve:$.resolve,reject:$.reject,nthen:Ar(o.nthen,i),gthen:Ar(o.gthen,i)}:{},e&&ne(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=bt(i,t,n,r);return i.ref===0&&i.finalize(),a}function _t(){return Y.id||(Y.id=++Li),++Y.awaits,Y.echoes+=100,Y.id}function Te(){return!!Y.awaits&&(--Y.awaits==0&&(Y.id=0),Y.echoes=100*Y.awaits,!0)}function zt(t){return Y.echoes&&t&&t.constructor===en?(_t(),t.then(e=>(Te(),e),e=>(Te(),z(e)))):t}function Wi(t){++pn,Y.echoes&&--Y.echoes!=0||(Y.echoes=Y.id=0),rn.push(A),Fe(t,!0)}function Vi(){var t=rn[rn.length-1];rn.pop(),Fe(t,!1)}function Fe(t,e){var n=A;if((e?!Y.echoes||$n++&&t===A:!$n||--$n&&t===A)||Fs(e?Wi.bind(null,t):Vi),t!==A&&(A=t,n===pt&&(pt.env=Ms()),br)){var r=pt.env.Promise,s=t.env;dn.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(F,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function Ms(){var t=F.Promise;return br?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:dn.then,gthen:t.prototype.then}:{}}function bt(t,e,n,r,s){var i=A;try{return Fe(t,!0),e(n,r,s)}finally{Fe(i,!1)}}function Fs(t){js.call(Fn,t)}function mn(t,e,n,r){return typeof t!="function"?t:function(){var s=A;n&&_t(),Fe(e,!0);try{return t.apply(this,arguments)}finally{Fe(s,!1),r&&Fs(Te)}}}function Ar(t,e){return function(n,r){return t.call(this,mn(n,e),mn(r,e))}}(""+js).indexOf("[native code]")===-1&&(_t=Te=M);function jr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,s={promise:e,reason:t};if(F.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),ne(r,s)):F.CustomEvent&&ne(r=new CustomEvent("unhandledrejection",{detail:s}),s),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}ke&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var z=$.reject;function Gn(t,e,n,r){if(t.idbdb&&(t._state.openComplete||A.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===gr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Gn(t,e,n,r))):z(i)}return s._promise(e,(i,o)=>Me(()=>(A.trans=s,r(i,o,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return z(new D.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return z(new D.DatabaseClosed);t.open().catch(M)}return t._state.dbReadyPromise.then(()=>Gn(t,e,n,r))}const Ve=String.fromCharCode(65535),xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ct=[],kn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Hi=kn,zi=kn,qs=t=>!/(dexie\.js|dexie\.min\.js)/.test(t);function Je(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Ls={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gt(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Lt(e))[t],e)}function Gi(){throw D.Type()}function V(t,e){try{const n=Dr(t),r=Dr(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const o=s.length,a=i.length,l=o<a?o:a;for(let u=0;u<l;++u)if(s[u]!==i[u])return s[u]<i[u]?-1:1;return o===a?0:o<a?-1:1}(Br(t),Br(e));case"Array":return function(s,i){const o=s.length,a=i.length,l=o<a?o:a;for(let u=0;u<l;++u){const c=V(s[u],i[u]);if(c!==0)return c}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function Dr(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Rn(t);return n==="ArrayBuffer"?"binary":n}function Br(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Yi{_trans(e,n,r){const s=this._tx||A.trans,i=this.name;function o(l,u,c){if(!c.schema[i])throw new D.NotFound("Table "+i+" not part of transaction");return n(c.idbtrans,c)}const a=Ut();try{return s&&s.db===this.db?s===A.trans?s._promise(e,o,r):Me(()=>s._promise(e,o,r),{trans:s,transless:A.transless||A}):Gn(this.db,e,[this.name],o)}finally{a&&Wt()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(X(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=H(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&n.every(c=>u.keyPath.indexOf(c)>=0)&&u.keyPath.every(c=>n.indexOf(c)>=0))[0];if(r&&this.db._maxKey!==Ve)return this.where(r.name).equals(r.keyPath.map(u=>e[u]));!r&&ke&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function o(u,c){return i.cmp(u,c)===0}const[a,l]=n.reduce(([u,c],f)=>{const d=s[f],h=e[f];return[u||d,u||!d?Je(c,d&&d.multi?p=>{const m=Oe(p,f);return X(m)&&m.some(g=>o(h,g))}:p=>o(h,Oe(p,f))):c]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,X(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){const{db:n,name:r}=this;this.schema.mappedClass=e,e.prototype instanceof Gi&&(e=class extends e{get db(){return n}table(){return r}});const s=new Set;for(let o=e.prototype;o;o=mt(o))Object.getOwnPropertyNames(o).forEach(a=>s.add(a));const i=o=>{if(!o)return o;const a=Object.create(e.prototype);for(let l in o)if(!s.has(l))try{a[l]=o[l]}catch{}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),e}defineClass(){return this.mapToClass(function(e){ne(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Gt(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[i]})).then(o=>o.numFailures?$.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{he(e,s,o)}catch{}return o})}update(e,n){if(typeof e!="object"||X(e))return this.where(":id").equals(e).modify(n);{const r=Oe(e,this.schema.primKey.keyPath);if(r===void 0)return z(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?H(n).forEach(s=>{he(e,s,n[s])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=Gt(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[i],keys:n!=null?[n]:null})).then(o=>o.numFailures?$.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{he(e,s,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?$.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ls})).then(e=>e.numFailures?$.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&s)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&a?e.map(Gt(l)):e;return this.core.mutate({trans:o,type:"add",keys:s,values:c,wantResults:i}).then(({numFailures:f,results:d,lastResult:h,failures:p})=>{if(f===0)return i?d:h;throw new lt(`${this.name}.bulkAdd(): ${f} of ${u} operations failed`,p)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&s)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&a?e.map(Gt(l)):e;return this.core.mutate({trans:o,type:"put",keys:s,values:c,wantResults:i}).then(({numFailures:f,results:d,lastResult:h,failures:p})=>{if(f===0)return i?d:h;throw new lt(`${this.name}.bulkPut(): ${f} of ${u} operations failed`,p)})})}bulkUpdate(e){const n=this.core,r=e.map(o=>o.key),s=e.map(o=>o.changes),i=[];return this._trans("readwrite",o=>n.getMany({trans:o,keys:r,cache:"clone"}).then(a=>{const l=[],u=[];e.forEach(({key:f,changes:d},h)=>{const p=a[h];if(p){for(const m of Object.keys(d)){const g=d[m];if(m===this.schema.primKey.keyPath){if(V(g,f)!==0)throw new D.Constraint("Cannot update primary key in bulkUpdate()")}else he(p,m,g)}i.push(h),l.push(f),u.push(p)}});const c=l.length;return n.mutate({trans:o,type:"put",keys:l,values:u,updates:{keys:r,changeSpecs:s}}).then(({numFailures:f,failures:d})=>{if(f===0)return c;for(const h of Object.keys(d)){const p=i[Number(h)];if(p!=null){const m=d[h];delete d[h],d[p]=m}}throw new lt(`${this.name}.bulkUpdate(): ${f} of ${c} operations failed`,d)})}))}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new lt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function Pt(t){var e={},n=function(a,l){if(l){for(var u=arguments.length,c=new Array(u-1);--u;)c[u-1]=arguments[u];return e[a].subscribe.apply(null,c),t}if(typeof a=="string")return e[a]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(a,l,u){if(typeof a=="object")return o(a);l||(l=Mi),u||(u=M);var c={subscribers:[],fire:u,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=l(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(d){return d!==f}),c.fire=c.subscribers.reduce(l,u)}};return e[a]=n[a]=c,c}function o(a){H(a).forEach(function(l){var u=a[l];if(X(u))i(l,a[l][0],a[l][1]);else{if(u!=="asap")throw new D.InvalidArgument("Invalid event config");var c=i(l,Bt,function(){for(var f=arguments.length,d=new Array(f);f--;)d[f]=arguments[f];c.subscribers.forEach(function(h){Es(function(){h.apply(null,d)})})})}})}}function kt(t,e){return dt(e).from({prototype:t}),e}function rt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Cn(t,e){t.filter=Je(t.filter,e)}function Pn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Je(r(),e()):e,t.justLimit=n&&!r}function sn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new D.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ir(t,e,n){const r=sn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function Yt(t,e,n,r){const s=t.replayFilter?Je(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},o=(a,l,u)=>{if(!s||s(l,u,d=>l.stop(d),d=>l.fail(d))){var c=l.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),pe(i,f)||(i[f]=!0,e(a,l,u))}};return Promise.all([t.or._iterate(o,n),Rr(Ir(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return Rr(Ir(t,r,n),Je(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function Rr(t,e,n,r){var s=q(r?(i,o,a)=>n(r(i),o,a):n);return t.then(i=>{if(i)return i.start(()=>{var o=()=>i.continue();e&&!e(i,a=>o=a,a=>{i.stop(a),o=M},a=>{i.fail(a),o=M})||s(i.value,i,a=>o=a),o()})})}class Qi{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,z.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,z.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Je(n.algorithm,e)}_iterate(e,n){return Yt(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ne(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>Yt(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(rt(r,!0))return s.count({trans:n,query:{index:sn(r,s.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var i=0;return Yt(r,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],i=r.length-1;function o(u,c){return c?o(u[r[c]],c-1):u[s]}var a=this._ctx.dir==="next"?1:-1;function l(u,c){var f=o(u,i),d=o(c,i);return f<d?-a:f>d?a:0}return this.toArray(function(u){return u.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&rt(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=sn(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return Yt(r,i=>s.push(i),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,rt(n)?Pn(n,()=>{var r=e;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):Pn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Pn(this._ctx,()=>{var n=e;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return Cn(this._ctx,function(r,s,i){return!e(r.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return Cn(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=Je(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&rt(n,!0)&&n.limit>0)return this._read(s=>{var i=sn(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Cn(this._ctx,function(s){var i=s.primaryKey.toString(),o=pe(r,i);return r[i]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var i=H(e),o=i.length;s=function(m){for(var g=!1,y=0;y<o;++y){var _=i[y],b=e[_];Oe(m,_)!==b&&(he(m,_,b),g=!0)}return g}}const a=n.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,f=[];let d=0;const h=[],p=(m,g)=>{const{failures:y,numFailures:_}=g;d+=m-_;for(let b of H(y))f.push(y[b])};return this.clone().primaryKeys().then(m=>{const g=y=>{const _=Math.min(c,m.length-y);return a.getMany({trans:r,keys:m.slice(y,y+_),cache:"immutable"}).then(b=>{const w=[],x=[],v=l?[]:null,k=[];for(let E=0;E<_;++E){const R=b[E],L={value:Lt(R),primKey:m[y+E]};s.call(L,L.value,L)!==!1&&(L.value==null?k.push(m[y+E]):l||V(u(R),u(L.value))===0?(x.push(L.value),l&&v.push(m[y+E])):(k.push(m[y+E]),w.push(L.value)))}const C=rt(n)&&n.limit===1/0&&(typeof e!="function"||e===On)&&{index:n.index,range:n.range};return Promise.resolve(w.length>0&&a.mutate({trans:r,type:"add",values:w}).then(E=>{for(let R in E.failures)k.splice(parseInt(R),1);p(w.length,E)})).then(()=>(x.length>0||C&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:v,values:x,criteria:C,changeSpec:typeof e!="function"&&e}).then(E=>p(x.length,E))).then(()=>(k.length>0||C&&e===On)&&a.mutate({trans:r,type:"delete",keys:k,criteria:C}).then(E=>p(k.length,E))).then(()=>m.length>y+_&&g(y+c))})};return g(0).then(()=>{if(f.length>0)throw new fn("Error modifying one or more objects",f,d,h);return m.length})})})}delete(){var e=this._ctx,n=e.range;return rt(e)&&(e.isPrimKey&&!zi||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:s,range:i}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:a,lastResult:l,results:u,numFailures:c})=>{if(c)throw new fn("Could not delete some values",Object.keys(a).map(f=>a[f]),o-c);return o-c}))}):this.modify(On)}}const On=(t,e)=>e.value=null;function Ji(t,e){return t<e?-1:t===e?0:1}function Xi(t,e){return t>e?-1:t===e?0:1}function ue(t,e,n){var r=t instanceof Ws?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function st(t){return new t.Collection(t,()=>Us("")).limit(0)}function Zi(t,e,n,r,s,i){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var u=e[l];if(u!==r[l])return s(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):s(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;s(t[l],u)<0&&(a=l)}return o<r.length&&i==="next"?t+n.substr(t.length):o<t.length&&i==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function Qt(t,e,n,r){var s,i,o,a,l,u,c,f=n.length;if(!n.every(m=>typeof m=="string"))return ue(t,"String expected.");function d(m){s=function(y){return y==="next"?_=>_.toUpperCase():_=>_.toLowerCase()}(m),i=function(y){return y==="next"?_=>_.toLowerCase():_=>_.toUpperCase()}(m),o=m==="next"?Ji:Xi;var g=n.map(function(y){return{lower:i(y),upper:s(y)}}).sort(function(y,_){return o(y.lower,_.lower)});a=g.map(function(y){return y.upper}),l=g.map(function(y){return y.lower}),u=m,c=m==="next"?"":r}d("next");var h=new t.Collection(t,()=>De(a[0],l[f-1]+r));h._ondirectionchange=function(m){d(m)};var p=0;return h._addAlgorithm(function(m,g,y){var _=m.key;if(typeof _!="string")return!1;var b=i(_);if(e(b,l,p))return!0;for(var w=null,x=p;x<f;++x){var v=Zi(_,b,a[x],l[x],o,u);v===null&&w===null?p=x+1:(w===null||o(w,v)>0)&&(w=v)}return g(w!==null?function(){m.continue(w+c)}:y),!1}),h}function De(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Us(t){return{type:1,lower:t,upper:t}}class Ws{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?st(this):new this.Collection(this,()=>De(e,n,!r,!s))}catch{return ue(this,xe)}}equals(e){return e==null?ue(this,xe):new this.Collection(this,()=>Us(e))}above(e){return e==null?ue(this,xe):new this.Collection(this,()=>De(e,void 0,!0))}aboveOrEqual(e){return e==null?ue(this,xe):new this.Collection(this,()=>De(e,void 0,!1))}below(e){return e==null?ue(this,xe):new this.Collection(this,()=>De(void 0,e,!1,!0))}belowOrEqual(e){return e==null?ue(this,xe):new this.Collection(this,()=>De(void 0,e))}startsWith(e){return typeof e!="string"?ue(this,"String expected."):this.between(e,e+Ve,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Qt(this,(n,r)=>n.indexOf(r[0])===0,[e],Ve)}equalsIgnoreCase(e){return Qt(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=$e.apply(at,arguments);return e.length===0?st(this):Qt(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=$e.apply(at,arguments);return e.length===0?st(this):Qt(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,Ve)}anyOf(){const e=$e.apply(at,arguments);let n=this._cmp;try{e.sort(n)}catch{return ue(this,xe)}if(e.length===0)return st(this);const r=new this.Collection(this,()=>De(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((i,o,a)=>{const l=i.key;for(;n(l,e[s])>0;)if(++s,s===e.length)return o(a),!1;return n(l,e[s])===0||(o(()=>{i.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=$e.apply(at,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ue(this,xe)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[-(1/0),s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,i=this._descending,o=this._min,a=this._max;if(e.length===0)return st(this);if(!e.every(_=>_[0]!==void 0&&_[1]!==void 0&&s(_[0],_[1])<=0))return ue(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);const l=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;let c,f=s;function d(_,b){return f(_[0],b[0])}try{c=e.reduce(function(_,b){let w=0,x=_.length;for(;w<x;++w){const v=_[w];if(r(b[0],v[1])<0&&r(b[1],v[0])>0){v[0]=o(v[0],b[0]),v[1]=a(v[1],b[1]);break}}return w===x&&_.push(b),_},[]),c.sort(d)}catch{return ue(this,xe)}let h=0;const p=u?_=>s(_,c[h][1])>0:_=>s(_,c[h][1])>=0,m=l?_=>i(_,c[h][0])>0:_=>i(_,c[h][0])>=0;let g=p;const y=new this.Collection(this,()=>De(c[0][0],c[c.length-1][1],!l,!u));return y._ondirectionchange=_=>{_==="next"?(g=p,f=s):(g=m,f=i),c.sort(d)},y._addAlgorithm((_,b,w)=>{for(var x=_.key;g(x);)if(++h,h===c.length)return b(w),!1;return!!function(v){return!p(v)&&!m(v)}(x)||(this._cmp(x,c[h][1])===0||this._cmp(x,c[h][0])===0||b(()=>{f===s?_.continue(c[h][0]):_.continue(c[h][1])}),!1)}),y}startsWithAnyOf(){const e=$e.apply(at,arguments);return e.every(n=>typeof n=="string")?e.length===0?st(this):this.inAnyRange(e.map(n=>[n,n+Ve])):ue(this,"startsWithAnyOf() only works with strings")}}function ge(t){return q(function(e){return Rt(e),t(e.target.error),!1})}function Rt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const qe=Pt(null,"storagemutated");class eo{_lock(){return xt(!A.global),++this._reculock,this._reculock!==1||A.global||(A.lockOwnerFor=this),this}_unlock(){if(xt(!A.global),--this._reculock==0)for(A.global||(A.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{bt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&A.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(xt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new D.DatabaseClosed(r);case"MissingAPIError":throw new D.MissingAPI(r.message,r);default:throw new D.OpenFailed(r)}if(!this.active)throw new D.TransactionInactive;return xt(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=q(s=>{Rt(s),this._reject(e.error)}),e.onabort=q(s=>{Rt(s),this.active&&this._reject(new D.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=q(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&qe.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return z(new D.ReadOnly("Transaction is readonly"));if(!this.active)return z(new D.TransactionInactive);if(this._locked())return new $((i,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,o)},A])});if(r)return Me(()=>{var i=new $((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new $((i,o)=>{var a=n(i,o,this);a&&a.then&&a.then(i,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=$.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new $((o,a)=>{r.then(l=>n._waitingQueue.push(q(o.bind(null,l))),l=>n._waitingQueue.push(q(a.bind(null,l)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(pe(n,e))return n[e];const r=this.schema[e];if(!r)throw new D.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function Yn(t,e,n,r,s,i,o){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(s?"++":"")+Vs(e)}}function Vs(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Hs(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Ss(n,r=>[r.name,r])}}let Nt=t=>{try{return t.only([[]]),Nt=()=>[[]],[[]]}catch{return Nt=()=>Ve,Ve}};function Qn(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?n=>n[e]:n=>Oe(n,e)}(t):e=>Oe(e,t)}function Nr(t){return[].slice.call(t)}let to=0;function Ot(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function no(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:c,lowerOpen:f,upperOpen:d}=l;return u===void 0?c===void 0?null:e.upperBound(c,!!d):c===void 0?e.lowerBound(u,!!f):e.bound(u,c,!!f,!!d)}const{schema:s,hasGetAll:i}=function(l,u){const c=Nr(l.objectStoreNames);return{schema:{name:l.name,tables:c.map(f=>u.objectStore(f)).map(f=>{const{keyPath:d,autoIncrement:h}=f,p=X(d),m=d==null,g={},y={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:p,keyPath:d,autoIncrement:h,unique:!0,extractKey:Qn(d)},indexes:Nr(f.indexNames).map(_=>f.index(_)).map(_=>{const{name:b,unique:w,multiEntry:x,keyPath:v}=_,k={name:b,compound:X(v),keyPath:v,unique:w,multiEntry:x,extractKey:Qn(v)};return g[Ot(v)]=k,k}),getIndexByKeyPath:_=>g[Ot(_)]};return g[":id"]=y.primaryKey,d!=null&&(g[Ot(d)]=y.primaryKey),y})},hasGetAll:c.length>0&&"getAll"in u.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=s.tables.map(l=>function(u){const c=u.name;return{name:c,schema:u,mutate:function({trans:f,type:d,keys:h,values:p,range:m}){return new Promise((g,y)=>{g=q(g);const _=f.objectStore(c),b=_.keyPath==null,w=d==="put"||d==="add";if(!w&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:x}=h||p||{length:1};if(h&&p&&h.length!==p.length)throw new Error("Given keys array must have same length as given values array.");if(x===0)return g({numFailures:0,failures:{},results:[],lastResult:void 0});let v;const k=[],C=[];let E=0;const R=Z=>{++E,Rt(Z)};if(d==="deleteRange"){if(m.type===4)return g({numFailures:E,failures:C,results:[],lastResult:void 0});m.type===3?k.push(v=_.clear()):k.push(v=_.delete(r(m)))}else{const[Z,G]=w?b?[p,h]:[p,null]:[h,null];if(w)for(let U=0;U<x;++U)k.push(v=G&&G[U]!==void 0?_[d](Z[U],G[U]):_[d](Z[U])),v.onerror=R;else for(let U=0;U<x;++U)k.push(v=_[d](Z[U])),v.onerror=R}const L=Z=>{const G=Z.target.result;k.forEach((U,et)=>U.error!=null&&(C[et]=U.error)),g({numFailures:E,failures:C,results:d==="delete"?h:k.map(U=>U.result),lastResult:G})};v.onerror=Z=>{R(Z),L(Z)},v.onsuccess=L})},getMany:({trans:f,keys:d})=>new Promise((h,p)=>{h=q(h);const m=f.objectStore(c),g=d.length,y=new Array(g);let _,b=0,w=0;const x=k=>{const C=k.target;y[C._pos]=C.result,++w===b&&h(y)},v=ge(p);for(let k=0;k<g;++k)d[k]!=null&&(_=m.get(d[k]),_._pos=k,_.onsuccess=x,_.onerror=v,++b);b===0&&h(y)}),get:({trans:f,key:d})=>new Promise((h,p)=>{h=q(h);const m=f.objectStore(c).get(d);m.onsuccess=g=>h(g.target.result),m.onerror=ge(p)}),query:function(f){return d=>new Promise((h,p)=>{h=q(h);const{trans:m,values:g,limit:y,query:_}=d,b=y===1/0?void 0:y,{index:w,range:x}=_,v=m.objectStore(c),k=w.isPrimaryKey?v:v.index(w.name),C=r(x);if(y===0)return h({result:[]});if(f){const E=g?k.getAll(C,b):k.getAllKeys(C,b);E.onsuccess=R=>h({result:R.target.result}),E.onerror=ge(p)}else{let E=0;const R=g||!("openKeyCursor"in k)?k.openCursor(C):k.openKeyCursor(C),L=[];R.onsuccess=Z=>{const G=R.result;return G?(L.push(g?G.value:G.primaryKey),++E===y?h({result:L}):void G.continue()):h({result:L})},R.onerror=ge(p)}})}(i),openCursor:function({trans:f,values:d,query:h,reverse:p,unique:m}){return new Promise((g,y)=>{g=q(g);const{index:_,range:b}=h,w=f.objectStore(c),x=_.isPrimaryKey?w:w.index(_.name),v=p?m?"prevunique":"prev":m?"nextunique":"next",k=d||!("openKeyCursor"in x)?x.openCursor(r(b),v):x.openKeyCursor(r(b),v);k.onerror=ge(y),k.onsuccess=q(C=>{const E=k.result;if(!E)return void g(null);E.___id=++to,E.done=!1;const R=E.continue.bind(E);let L=E.continuePrimaryKey;L&&(L=L.bind(E));const Z=E.advance.bind(E),G=()=>{throw new Error("Cursor not stopped")};E.trans=f,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=q(y),E.next=function(){let U=1;return this.start(()=>U--?this.continue():this.stop()).then(()=>this)},E.start=U=>{const et=new Promise((re,Ue)=>{re=q(re),k.onerror=ge(Ue),E.fail=Ue,E.stop=vt=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=G,re(vt)}}),tt=()=>{if(k.result)try{U()}catch(re){E.fail(re)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return k.onsuccess=q(re=>{k.onsuccess=tt,tt()}),E.continue=R,E.continuePrimaryKey=L,E.advance=Z,tt(),et},g(E)},y)})},count({query:f,trans:d}){const{index:h,range:p}=f;return new Promise((m,g)=>{const y=d.objectStore(c),_=h.isPrimaryKey?y:y.index(h.name),b=r(p),w=b?_.count(b):_.count();w.onsuccess=q(x=>m(x.target.result)),w.onerror=ge(g)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Nt(e),schema:s}}function Jn({_novip:t},e){const n=e.db,r=function(s,i,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(c,f){return f.reduce((d,{create:h})=>({...d,...h(d)}),c)}(no(i,o,l),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(o=>o.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function yn({_novip:t},e,n,r){n.forEach(s=>{const i=r[s];e.forEach(o=>{const a=pr(o,s);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Pe(o,s,{get(){return this.table(s)},set(l){ks(this,s,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new t.Table(s,i))})})}function Xn({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function ro(t,e){return t._cfg.version-e._cfg.version}function so(t,e,n,r){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(r);const o=i._reject.bind(i),a=A.transless||A;Me(()=>{A.trans=i,A.transless=a,e===0?(H(s).forEach(l=>{Kn(n,l,s[l].primKey,s[l].indexes)}),Jn(t,n),$.follow(()=>t.on.populate.fire(i)).catch(o)):function({_novip:l},u,c,f){const d=[],h=l._versions;let p=l._dbSchema=er(l,l.idbdb,f),m=!1;function g(){return d.length?$.resolve(d.shift()(c.idbtrans)).then(g):$.resolve()}return h.filter(y=>y._cfg.version>=u).forEach(y=>{d.push(()=>{const _=p,b=y._cfg.dbschema;tr(l,_,f),tr(l,b,f),p=l._dbSchema=b;const w=zs(_,b);w.add.forEach(v=>{Kn(f,v[0],v[1].primKey,v[1].indexes)}),w.change.forEach(v=>{if(v.recreate)throw new D.Upgrade("Not yet support for changing primary key");{const k=f.objectStore(v.name);v.add.forEach(C=>Zn(k,C)),v.change.forEach(C=>{k.deleteIndex(C.name),Zn(k,C)}),v.del.forEach(C=>k.deleteIndex(C))}});const x=y._cfg.contentUpgrade;if(x&&y._cfg.version>u){Jn(l,f),c._memoizedTables={},m=!0;let v=$s(b);w.del.forEach(R=>{v[R]=_[R]}),Xn(l,[l.Transaction.prototype]),yn(l,[l.Transaction.prototype],H(v),v),c.schema=v;const k=mr(x);let C;k&&_t();const E=$.follow(()=>{if(C=x(c),C&&k){var R=Te.bind(null,null);C.then(R,R)}});return C&&typeof C.then=="function"?$.resolve(C):E.then(()=>C)}}),d.push(_=>{(!m||!Hi)&&function(b,w){[].slice.call(w.db.objectStoreNames).forEach(x=>b[x]==null&&w.db.deleteObjectStore(x))}(y._cfg.dbschema,_),Xn(l,[l.Transaction.prototype]),yn(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),c.schema=l._dbSchema})}),g().then(()=>{var y,_;_=f,H(y=p).forEach(b=>{_.db.objectStoreNames.contains(b)||Kn(_,b,y[b].primKey,y[b].indexes)})})}(t,e,i,n).catch(o)})}function zs(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],i=e[r];if(s){const o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!kn)o.recreate=!0,n.change.push(o);else{const a=s.idxByName,l=i.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const c=a[u],f=l[u];c?c.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}function Kn(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>Zn(s,i)),s}function Zn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function er(t,e,n){const r={};return cn(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let o=i.keyPath;const a=Yn(Vs(o),o||"",!1,!1,!!i.autoIncrement,o&&typeof o!="string",!0),l=[];for(let c=0;c<i.indexNames.length;++c){const f=i.index(i.indexNames[c]);o=f.keyPath;var u=Yn(f.name,o,!!f.unique,!!f.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}r[s]=Hs(s,a,l)}),r}function tr({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],o=n.objectStore(i);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,c=typeof u=="string"?u:"["+cn(u).join("+")+"]";if(e[i]){const f=e[i].idxByName[c];f&&(f.name=l,delete e[i].idxByName[c],e[i].idxByName[l]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class io{_parseStoresSpec(e,n){H(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Yn(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),X(u),a===0)}),i=s.shift();if(i.multi)throw new D.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=Hs(r,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ne(this._cfg.storesSource,e):e;const r=n._versions,s={};let i={};return r.forEach(o=>{ne(s,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(s,i)}),n._dbSchema=i,Xn(n,[n._allTables,n,n.Transaction.prototype]),yn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],H(i),i),n._storeNames=H(i),this}upgrade(e){return this._cfg.contentUpgrade=_r(this._cfg.contentUpgrade||M,e),this}}function kr(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Ye("__dbnames",{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function xr(t){return t&&typeof t.databases=="function"}function nr(t){return Me(function(){return A.letThrough=!0,t()})}function oo(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function ao(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?z(e.dbOpenError):t);ke&&(e.openCanceller._stackHolder=Ze()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,o=null,a=!1;return $.race([r,(typeof navigator>"u"?$.resolve():oo()).then(()=>new $((l,u)=>{if(s(),!n)throw new D.MissingAPI;const c=t.name,f=e.autoSchema?n.open(c):n.open(c,Math.round(10*t.verno));if(!f)throw new D.MissingAPI;f.onerror=ge(u),f.onblocked=q(t._fireOnBlocked),f.onupgradeneeded=q(d=>{if(o=f.transaction,e.autoSchema&&!t._options.allowEmptyDB){f.onerror=Rt,o.abort(),f.result.close();const p=n.deleteDatabase(c);p.onsuccess=p.onerror=q(()=>{u(new D.NoSuchDatabase(`Database ${c} doesnt exist`))})}else{o.onerror=ge(u);var h=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=h<1,t._novip.idbdb=f.result,so(t,h/10,o,u)}},u),f.onsuccess=q(()=>{o=null;const d=t._novip.idbdb=f.result,h=cn(d.objectStoreNames);if(h.length>0)try{const m=d.transaction((p=h).length===1?p[0]:p,"readonly");e.autoSchema?function({_novip:g},y,_){g.verno=y.version/10;const b=g._dbSchema=er(0,y,_);g._storeNames=cn(y.objectStoreNames,0),yn(g,[g._allTables],H(b),b)}(t,d,m):(tr(t,t._dbSchema,m),function(g,y){const _=zs(er(0,g.idbdb,y),g._dbSchema);return!(_.add.length||_.change.some(b=>b.add.length||b.change.length))}(t,m)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Jn(t,m)}catch{}var p;Ct.push(t),d.onversionchange=q(m=>{e.vcFired=!0,t.on("versionchange").fire(m)}),d.onclose=q(m=>{t.on("close").fire(m)}),a&&function({indexedDB:m,IDBKeyRange:g},y){!xr(m)&&y!=="__dbnames"&&kr(m,g).put({name:y}).catch(M)}(t._deps,c),l()},u)}))]).then(()=>(s(),e.onReadyBeingFired=[],$.resolve(nr(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(_r,M);return e.onReadyBeingFired=[],$.resolve(nr(()=>u(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),z(l)}).finally(()=>{e.openComplete=!0,i()})}function rr(t){var e=i=>t.next(i),n=s(e),r=s(i=>t.throw(i));function s(i){return o=>{var a=i(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):X(l)?Promise.all(l).then(n,r):n(l)}}return s(e)()}function lo(t,e,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];n=s.pop();var i=Cs(s);return[t,i,n]}function Gs(t,e,n,r,s){return $.resolve().then(()=>{const i=A.transless||A,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(f){return f.name===gr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Gs(t,e,n,null,s))):z(f)}const l=mr(s);let u;l&&_t();const c=$.follow(()=>{if(u=s.call(o,o),u)if(l){var f=Te.bind(null,null);u.then(f,f)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=rr(u))},a);return(u&&typeof u.then=="function"?$.resolve(u).then(f=>o.active?f:z(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>u)).then(f=>(r&&o._resolve(),o._completion.then(()=>f))).catch(f=>(o._reject(f),z(f)))})}function Jt(t,e,n){const r=X(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const uo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,s={},i=[];function o(c,f,d){const h=Ot(c),p=s[h]=s[h]||[],m=c==null?0:typeof c=="string"?1:c.length,g=f>0,y={...d,isVirtual:g,keyTail:f,keyLength:m,extractKey:Qn(c),unique:!g&&d.unique};return p.push(y),y.isPrimaryKey||i.push(y),m>1&&o(m===2?c[0]:c.slice(0,m-1),f+1,d),p.sort((_,b)=>_.keyTail-b.keyTail),y}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[a];for(const c of r.indexes)o(c.keyPath,0,c);function l(c){const f=c.query.index;return f.isVirtual?{...c,query:{index:f,range:(d=c.query.range,h=f.keyTail,{type:d.type===1?2:d.type,lower:Jt(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,h),lowerOpen:!0,upper:Jt(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,h),upperOpen:!0})}}:c;var d,h}return{...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(c){const f=s[Ot(c)];return f&&f[0]}},count:c=>n.count(l(c)),query:c=>n.query(l(c)),openCursor(c){const{keyTail:f,isVirtual:d,keyLength:h}=c.query.index;return d?n.openCursor(l(c)).then(p=>p&&function(m){return Object.create(m,{continue:{value:function(y){y!=null?m.continue(Jt(y,c.reverse?t.MAX_KEY:t.MIN_KEY,f)):c.unique?m.continue(m.key.slice(0,h).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,f)):m.continue()}},continuePrimaryKey:{value(y,_){m.continuePrimaryKey(Jt(y,t.MAX_KEY,f),_)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const y=m.key;return h===1?y[0]:y.slice(0,h)}},value:{get:()=>m.value}})}(p)):n.openCursor(c)}}}}}};function Er(t,e,n,r){return n=n||{},r=r||"",H(t).forEach(s=>{if(pe(e,s)){var i=t[s],o=e[s];if(typeof i=="object"&&typeof o=="object"&&i&&o){const a=Rn(i);a!==Rn(o)?n[r+s]=e[s]:a==="Object"?Er(i,o,n,r+s+"."):i!==o&&(n[r+s]=e[s])}else i!==o&&(n[r+s]=e[s])}else n[r+s]=void 0}),H(e).forEach(s=>{pe(t,s)||(n[r+s]=e[s])}),n}const co={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(i){const o=A.trans,{deleting:a,creating:l,updating:u}=o.table(e).hook;switch(i.type){case"add":if(l.fire===M)break;return o._promise("readwrite",()=>c(i),!0);case"put":if(l.fire===M&&u.fire===M)break;return o._promise("readwrite",()=>c(i),!0);case"delete":if(a.fire===M)break;return o._promise("readwrite",()=>c(i),!0);case"deleteRange":if(a.fire===M)break;return o._promise("readwrite",()=>function(d){return f(d.trans,d.range,1e4)}(i),!0)}return n.mutate(i);function c(d){const h=A.trans,p=d.keys||function(m,g){return g.type==="delete"?g.keys:g.keys||g.values.map(m.extractKey)}(r,d);if(!p)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:p}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(m,g,y){return g.type==="add"?Promise.resolve([]):m.getMany({trans:g.trans,keys:y,cache:"immutable"})}(n,d,p).then(m=>{const g=p.map((y,_)=>{const b=m[_],w={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(w,y,b,h);else if(d.type==="add"||b===void 0){const x=l.fire.call(w,y,d.values[_],h);y==null&&x!=null&&(y=x,d.keys[_]=y,r.outbound||he(d.values[_],r.keyPath,y))}else{const x=Er(b,d.values[_]),v=u.fire.call(w,x,y,b,h);if(v){const k=d.values[_];Object.keys(v).forEach(C=>{pe(k,C)?k[C]=v[C]:he(k,C,v[C])})}}return w});return n.mutate(d).then(({failures:y,results:_,numFailures:b,lastResult:w})=>{for(let x=0;x<p.length;++x){const v=_?_[x]:p[x],k=g[x];v==null?k.onerror&&k.onerror(y[x]):k.onsuccess&&k.onsuccess(d.type==="put"&&m[x]?d.values[x]:v)}return{failures:y,results:_,numFailures:b,lastResult:w}}).catch(y=>(g.forEach(_=>_.onerror&&_.onerror(y)),Promise.reject(y)))})}function f(d,h,p){return n.query({trans:d,values:!1,query:{index:r,range:h},limit:p}).then(({result:m})=>c({type:"delete",keys:m,trans:d}).then(g=>g.numFailures>0?Promise.reject(g.failures[0]):m.length<p?{failures:[],numFailures:0,lastResult:void 0}:f(d,{...h,lower:m[m.length-1],lowerOpen:!0},p)))}}}}})};function Ys(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)V(e.keys[s],t[i])===0&&(r.push(n?Lt(e.values[s]):e.values[s]),++i);return r.length===t.length?r:null}catch{return null}}const fo={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const s=Ys(r.keys,r.trans._cache,r.cache==="clone");return s?$.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Lt(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Sr(t){return!("from"in t)}const Ee=function(t,e){if(!this){const n=new Ee;return t&&"d"in t&&ne(n,t),n}ne(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Mt(t,e,n){const r=V(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Sr(t))return ne(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(V(n,t.from)<0)return s?Mt(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Mr(t);if(V(e,t.to)>0)return i?Mt(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Mr(t);V(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),V(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;s&&!t.l&&gn(t,s),i&&o&&gn(t,i)}function gn(t,e){Sr(e)||function n(r,{from:s,to:i,l:o,r:a}){Mt(r,s,i),o&&n(r,o),a&&n(r,a)}(t,e)}function ho(t,e){const n=sr(e);let r=n.next();if(r.done)return!1;let s=r.value;const i=sr(t);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(V(a.from,s.to)<=0&&V(a.to,s.from)>=0)return!0;V(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function sr(t){let e=Sr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&V(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||V(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Mr(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",o={...t},a=t[s];t.from=a.from,t.to=a.to,t[s]=a[s],o[s]=a[i],t[i]=o,o.d=Fr(o)}t.d=Fr(t)}function Fr({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}yt(Ee.prototype,{add(t){return gn(this,t),this},addKey(t){return Mt(this,t,t),this},addKeys(t){return t.forEach(e=>Mt(this,e,e)),this},[Nn](){return sr(this)}});const po={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Ee(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const s=t.table(r),{schema:i}=s,{primaryKey:o}=i,{extractKey:a,outbound:l}=o,u={...s,mutate:d=>{const h=d.trans,p=h.mutatedParts||(h.mutatedParts={}),m=v=>{const k=`idb://${e}/${r}/${v}`;return p[k]||(p[k]=new Ee)},g=m(""),y=m(":dels"),{type:_}=d;let[b,w]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const x=d.trans._cache;return s.mutate(d).then(v=>{if(X(b)){_!=="delete"&&(b=v.results),g.addKeys(b);const k=Ys(b,x);k||_==="add"||y.addKeys(b),(k||w)&&function(C,E,R,L){function Z(G){const U=C(G.name||"");function et(re){return re!=null?G.extractKey(re):null}const tt=re=>G.multiEntry&&X(re)?re.forEach(Ue=>U.addKey(Ue)):U.addKey(re);(R||L).forEach((re,Ue)=>{const vt=R&&et(R[Ue]),En=L&&et(L[Ue]);V(vt,En)!==0&&(vt!=null&&tt(vt),En!=null&&tt(En))})}E.indexes.forEach(Z)}(m,i,k,w)}else if(b){const k={from:b.lower,to:b.upper};y.add(k),g.add(k)}else g.add(n),y.add(n),i.indexes.forEach(k=>m(k.name).add(n));return v})}},c=({query:{index:d,range:h}})=>{var p,m;return[d,new Ee((p=h.lower)!==null&&p!==void 0?p:t.MIN_KEY,(m=h.upper)!==null&&m!==void 0?m:t.MAX_KEY)]},f={get:d=>[o,new Ee(d.key)],getMany:d=>[o,new Ee().addKeys(d.keys)],count:c,query:c,openCursor:c};return H(f).forEach(d=>{u[d]=function(h){const{subscr:p}=A;if(p){const m=w=>{const x=`idb://${e}/${r}/${w}`;return p[x]||(p[x]=new Ee)},g=m(""),y=m(":dels"),[_,b]=f[d](h);if(m(_.name||"").add(b),!_.isPrimaryKey){if(d!=="count"){const w=d==="query"&&l&&h.values&&s.query({...h,values:!1});return s[d].apply(this,arguments).then(x=>{if(d==="query"){if(l&&h.values)return w.then(({result:k})=>(g.addKeys(k),x));const v=h.values?x.result.map(a):x.result;h.values?g.addKeys(v):y.addKeys(v)}else if(d==="openCursor"){const v=x,k=h.values;return v&&Object.create(v,{key:{get:()=>(y.addKey(v.primaryKey),v.key)},primaryKey:{get(){const C=v.primaryKey;return y.addKey(C),C}},value:{get:()=>(k&&g.addKey(v.primaryKey),v.value)}})}return x})}y.add(n)}}return s[d].apply(this,arguments)}}),u}}}};class Ye{constructor(e,n){this._middlewares={},this.verno=0;const r=Ye.dependencies;this._options=n={addons:Ye.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new $(a=>{i.dbReadyResolve=a}),i.openCanceller=new $((a,l)=>{i.cancelOpen=l}),this._state=i,this.name=e,this.on=Pt(this,"populate","blocked","versionchange","close",{ready:[_r,M]}),this.on.ready.subscribe=xs(this.on.ready.subscribe,a=>(l,u)=>{Ye.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||$.resolve().then(l),u&&a(l);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(l),u&&a(l);else{a(l);const f=this;u||a(function d(){f.on.ready.unsubscribe(l),f.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,kt(Qi.prototype,function(a,l){this.db=o;let u=Ls,c=null;if(l)try{u=l()}catch(p){c=p}const f=a._ctx,d=f.table,h=d.hook.reading.fire;this._ctx={table:d,index:f.index,isPrimKey:!f.index||d.schema.primKey.keyPath&&f.index===d.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:f.or,valueMapper:h!==Bt?h:null}})),this.Table=function(a){return kt(Yi.prototype,function(l,u,c){this.db=a,this._tx=c,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:Pt(null,{creating:[Ii,M],reading:[Bi,Bt],updating:[Ni,M],deleting:[Ri,M]})})}(this),this.Transaction=function(a){return kt(eo.prototype,function(l,u,c,f,d){this.db=a,this.mode=l,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Pt(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $((h,p)=>{this._resolve=h,this._reject=p}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},h=>{var p=this.active;return this.active=!1,this.on.error.fire(h),this.parent?this.parent._reject(h):p&&this.idbtrans&&this.idbtrans.abort(),z(h)})})}(this),this.Version=function(a){return kt(io.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return kt(Ws.prototype,function(l,u,c){if(this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:c},this._cmp=this._ascending=V,this._descending=(f,d)=>V(d,f),this._max=(f,d)=>V(f,d)>0?f:d,this._min=(f,d)=>V(f,d)<0?f:d,this._IDBKeyRange=a._deps.IDBKeyRange,!this._IDBKeyRange)throw new D.MissingAPI})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Nt(n.IDBKeyRange),this._createTransaction=(a,l,u,c)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,c),this._fireOnBlocked=a=>{this.on("blocked").fire(a),Ct.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(uo),this.use(co),this.use(po),this.use(fo),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new D.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(ro),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||A.letThrough||this._vip)?e():new $((n,r)=>{if(this._state.openComplete)return r(new D.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new D.DatabaseClosed);this.open().catch(M)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r??10,name:s}),i.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return ao(this)}_close(){const e=this._state,n=Ct.indexOf(this);if(n>=0&&Ct.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new $(r=>{e.dbReadyResolve=r}),e.openCanceller=new $((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new D.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new $((r,s)=>{const i=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=q(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!xr(a)&&u!=="__dbnames"&&kr(a,l).delete(u).catch(M)})(this._deps,this.name),r()}),o.onerror=ge(s),o.onblocked=this._fireOnBlocked};if(e)throw new D.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return H(this._allTables).map(e=>this._allTables[e])}transaction(){const e=lo.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=A.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(u=>{var c=u instanceof this.Table?u.name:u;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e==="readonly")o="readonly";else{if(e!="rw"&&e!="readwrite")throw new D.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(s){if(s.mode==="readonly"&&o==="readwrite"){if(!i)throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&a.forEach(u=>{if(s&&s.storeNames.indexOf(u)===-1){if(!i)throw new D.SubTransaction("Table "+u+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(u){return s?s._promise(null,(c,f)=>{f(u)}):z(u)}const l=Gs.bind(null,this,o,a,s,r);return s?s._promise(o,l,"lock"):A.trans?bt(A.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!pe(this._allTables,e))throw new D.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const mo=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class yo{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[mo](){return this}}function Qs(t,e){return H(e).forEach(n=>{gn(t[n]||(t[n]=new Ee),e[n])}),t}let _n;try{_n={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{_n={indexedDB:null,IDBKeyRange:null}}function go(t){return new yo(e=>{const n=mr(t);let r=!1,s={},i={};const o={get closed(){return r},unsubscribe:()=>{r=!0,qe.storagemutated.unsubscribe(c)}};e.start&&e.start(o);let a=!1,l=!1;function u(){return H(i).some(d=>s[d]&&ho(s[d],i[d]))}const c=d=>{Qs(s,d),u()&&f()},f=()=>{if(a||r||!_n.indexedDB)return;s={};const d={},h=function(p){n&&_t();const m=()=>Me(t,{subscr:p,trans:null}),g=A.trans?bt(A.transless,m):m();return n&&g.then(Te,Te),g}(d);l||(qe("storagemutated",c),l=!0),a=!0,Promise.resolve(h).then(p=>{a=!1,r||(u()?f():(s={},i=d,e.next&&e.next(p)))},p=>{["DatabaseClosedError","AbortError"].includes(p?.name)||(a=!1,e.error&&e.error(p),o.unsubscribe())})};return f(),o})}const We=Ye;function on(t){let e=Ce;try{Ce=!0,qe.storagemutated.fire(t)}finally{Ce=e}}yt(We,{...Zt,delete:t=>new We(t,{addons:[]}).delete(),exists:t=>new We(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return xr(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!=="__dbnames")):kr(e,n).toCollection().primaryKeys()}(We.dependencies).then(t)}catch{return z(new D.MissingAPI)}},defineClass:()=>function(t){ne(this,t)},ignoreTransaction:t=>A.trans?bt(A.transless,t):t(),vip:nr,async:function(t){return function(){try{var e=rr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:$.resolve(e)}catch(n){return z(n)}}},spawn:function(t,e,n){try{var r=rr(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:$.resolve(r)}catch(s){return z(s)}},currentTransaction:{get:()=>A.trans||null},waitFor:function(t,e){const n=$.resolve(typeof t=="function"?We.ignoreTransaction(t):t).timeout(e||6e4);return A.trans?A.trans.waitFor(n):n},Promise:$,debug:{get:()=>ke,set:t=>{Os(t,t==="dexie"?()=>!0:qs)}},derive:dt,extend:ne,props:yt,override:xs,Events:Pt,on:qe,liveQuery:go,extendObservabilitySet:Qs,getByKeyPath:Oe,setByKeyPath:he,delByKeyPath:function(t,e){typeof e=="string"?he(t,e,void 0):"length"in e&&[].map.call(e,function(n){he(t,n,void 0)})},shallowClone:$s,deepClone:Lt,getObjectDiff:Er,cmp:V,asap:Es,minKey:-(1/0),addons:[],connections:Ct,errnames:gr,dependencies:_n,semVer:"4.0.1-alpha.10",version:"4.0.1-alpha.10".split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),We.maxKey=Nt(We.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(qe("storagemutated",t=>{if(!Ce){let e;kn?(e=document.createEvent("CustomEvent"),e.initCustomEvent("x-storagemutated-1",!0,!0,t)):e=new CustomEvent("x-storagemutated-1",{detail:t}),Ce=!0,dispatchEvent(e),Ce=!1}}),addEventListener("x-storagemutated-1",({detail:t})=>{Ce||on(t)}));let Ce=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel("x-storagemutated-1");typeof t.unref=="function"&&t.unref(),qe("storagemutated",e=>{Ce||t.postMessage(e)}),t.onmessage=e=>{e.data&&on(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){qe("storagemutated",e=>{try{Ce||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:"x-storagemutated-1",changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key==="x-storagemutated-1"){const n=JSON.parse(e.newValue);n&&on(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type==="x-storagemutated-1"&&on(e.changedParts)})}$.rejectionMapper=function(t,e){if(!t||t instanceof ht||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Tr[t.name])return t;var n=new Tr[t.name](e||t.message,t);return"stack"in t&&Pe(n,"stack",{get:function(){return this.inner.stack}}),n},Os(ke,qs);class _o extends Ye{tags;todos;constructor(){super("helloworldtodos"),this.version(2).stores({tags:"&key",todos:"++id,*tags"})}}const an=new _o,it=[];function je(t,e=N){let n;const r=new Set;function s(a){if(le(t,a)&&(t=a,n)){const l=!it.length;for(const u of r)u[1](),it.push(u,t);if(l){for(let u=0;u<it.length;u+=2)it[u][0](it[u+1]);it.length=0}}}function i(a){s(a(t))}function o(a,l=N){const u=[a,l];return r.add(u),r.size===1&&(n=e(s)||N),a(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}class bo{add(e,n,...r){return new Promise((s,i)=>{this.queue.push({c:e,f:n,a:r,r:s,e:i}),this.run()})}constructor(){this.job=void 0,this.queue=[]}run(){this.job||(this.job=this.queue.shift(),this.job&&this.job.f.apply(this.job.c,this.job.a).then(this.job.r).catch(this.job.e).finally(()=>{this.job=void 0,setTimeout(()=>this.run(),0)}))}}const Se=je(),Kt=je(localStorage.getItem("haslock")!=null);class Tn{_data={};constructor(e,n){this._data=n;const{set:r,subscribe:s,update:i}=je(n);this.table=e,this.parset=r,this.subscribe=s}async set(e){await this.table.update(e),this.parset(e)}get data(){return this._data}set data(e){this._data=e,this.set(this._data)}setDataNoWrite(e){this._data=e,this.parset(e)}refresh(){this.set(this._data)}}class Js{dataset=new Map;queue=new bo;table;keyName="";lockkey=void 0;autoIncrement=!1;async validateDrop(){return!0}async afterDrop(){}async afterUpdate(){}async onLockUnlock(){}async lockDataSet(e){return e}async unlockDataSet(e){return e}constructor(e,n){this.table=e,n.idField&&(this.keyName=n.idField),n.autoIncrement&&(this.autoInrement=!0),Se.subscribe(r=>{this.lockkey=r,this.dataset.clear(),this.onLockUnlock(r)})}async findByPK(e,n){const r=new Error("").stack;return await this.queue.add(this,s=>this.table.get(s).then(async i=>{if(!i){console.warn(`Request for pk '${s}' on table '${this.table.name}' resulted in no data for call `,r);return}if(this.dataset.has(e))return this.dataset.get(e),this.dataset.get(e);if(this.lockkey){const o=await this.unlockDataSet(i,this.lockkey),a=new Tn(this,o);return this.dataset.set(s,a),a}else{const o=new Tn(this,i);return this.dataset.set(s,o),Promise.resolve(o)}}),e)}async update(e){if(!e[this.keyName])throw new Error(`given data is missing field ${this.keyName}`);const n=e[this.keyName],r=await this.findByPK(n);if(r){let s=r.data;for(let i of Object.keys(s))s[i]=e[i];r.setDataNoWrite(s)}if(await this.table.put(this.lockkey?await this.lockDataSet({...e},this.lockkey):e)){this.dataset.delete(n);const s=await this.findByPK(n);return await this.afterUpdate(s),s}else throw new Error("failed to insert data")}async drop(e){console.log(e),e instanceof Tn||(e=await this.findByPK(e)),console.log(e);const n=e.data[this.keyName];await this.validateDrop(e)&&(await this.table.delete(n),await this.afterDrop(e))}async encryptAll(e,n){this.table.db.transaction("rw",this.table,async()=>{await this.table.each(async r=>{n&&(r=await this.unlockDataSet(r,n)),e&&(r=await this.lockDataSet(r,e)),this.table.put(r)})})}}function Xs(t,e=!1){return e?crypto.subtle.digest("SHA-256",new TextEncoder().encode(t)).then(n=>{const r=new Uint8Array(n);let s="";for(let i=0;i<r.length;i++)s+=r[i].toString(16).padStart(2,"0");return s}):crypto.subtle.digest("SHA-256",new TextEncoder().encode(t))}function vo(t){return crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"])}function wo(){return crypto.randomUUID()}class gt{data;iv;static fromBase64(e){return gt.fromUint8Array(new Uint8Array(ei(e||"")))}static fromUint8Array(e){if(e.length<32)throw new Error("the given array does not seem to contain encrypted data (min length: 32)");const n=new Uint8Array(16),r=new Uint8Array(e.length-16);for(let s=0;s<16;s++)n[s]=e[s];for(let s=16,i=0;s<e.length;s++,i++)r[i]=e[s];return new gt({iv:n,data:r})}constructor(e){this.data=e.data,this.iv=e.iv}toUint8Array(){const e=this.iv.length,n=this.data.length,r=new Uint8Array(e+n);for(let s=0;s<e;s++)r[s]=this.iv[s];for(let s=0,i=e;s<n;s++,i++)r[i]=this.data[s];return r}toBase64(){return Zs(this.toUint8Array())}}function xn(t){return Xs(t).then(e=>vo(e))}async function ko(t,e){const n=e instanceof CryptoKey?e:await xn(e),r=new Uint8Array(16);return await crypto.getRandomValues(r),new gt({iv:r,data:new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",length:2048,iv:r},n,t))})}async function xo(t,e){if(!t)return;const n=e instanceof CryptoKey?e:await xn(e);return await crypto.subtle.decrypt({name:"AES-GCM",length:2048,iv:t.iv},n,t.data)}function Zs(t){if(typeof Buffer<"u")return Buffer.from(t).toString("base64");{let e="";const n=new Uint8Array(t),r=n.byteLength;for(let s=0;s<r;s++)e+=String.fromCharCode(n[s]);return btoa(e)}}function ei(t){if(typeof Buffer<"u")return Buffer.from(t,"base64");{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return r.buffer}}const Tt={sha256:Xs,uuid:wo,password2CryptoKey:xn,synckey:{encrypt:ko,decrypt:xo},base64:{encrypt:Zs,decrypt:ei}};class Eo extends Js{valuesStore=je([]);async lockDataSet(e,n){if(e.data)throw new Error("Data is already locked :-( ");return e.data=(await Tt.synckey.encrypt(new TextEncoder().encode(JSON.stringify({value:e.value,color:e.color,version:e.version})),n)).toBase64(),e.value="encrypted tag",e.color="#000000",e.version=999999999,e}async unlockDataSet(e,n){if(!e.data)return e;let r=JSON.parse(new TextDecoder().decode(await Tt.synckey.decrypt(gt.fromBase64(e.data),n)));return e.value=r.value,e.color=r.color,e.version=r.version,delete e.data,e}async afterUpdate(e){this.valuesStore.update(n=>(e.data.value&&n.indexOf(e.data.value)==-1&&n.push(e.data.value),n))}async afterDrop(e){this.valuesStore.update(n=>{let r=n.indexOf(e.data.value);return r!=-1&&n.splice(r,1),n})}onLockUnlock(e){return this.updateValues(e)}constructor(){super(an.tags,{idField:"key"}),this.updateValues()}definePKByValue(e){let n=e.trim().toLowerCase();if(n=="")throw Error("cant define key for empty value");return Tt.sha256(n,!0)}get values(){return this.valuesStore}updateValues(e){const n=[];return this.table.toCollection().each(async r=>{r.data?e&&n.push((await this.unlockDataSet(r,e)).value):n.push(r.value)}).then(()=>{this.valuesStore.set(n)})}}const Re=new Eo;function qr(t,e,n){const r=t.slice();return r[2]=e[n],r}function Lr(t){let e,n;return{c(){e=K("option"),e.__value=n=t[2],e.value=e.__value},m(r,s){T(r,e,s)},p(r,s){s&1&&n!==(n=r[2])&&(e.__value=n,e.value=e.__value)},d(r){r&&O(e)}}}function So(t){let e,n=t[0],r=[];for(let s=0;s<n.length;s+=1)r[s]=Lr(qr(t,n,s));return{c(){e=K("datalist");for(let s=0;s<r.length;s+=1)r[s].c();S(e,"id","available_tags")},m(s,i){T(s,e,i);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(s,[i]){if(i&1){n=s[0];let o;for(o=0;o<n.length;o+=1){const a=qr(s,n,o);r[o]?r[o].p(a,i):(r[o]=Lr(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:N,o:N,d(s){s&&O(e),ar(r,s)}}}function $o(t,e,n){let r;const s=Re.values;return se(t,s,i=>n(0,r=i)),[r,s]}class Co extends de{constructor(e){super(),fe(this,e,$o,So,le,{})}}function $r(t){const e=t-1;return e*e*e+1}function Po(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ur(t,{delay:e=0,duration:n=400,easing:r=Ft}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:i=>`opacity: ${i*s}`}}function ye(t,{delay:e=0,duration:n=400,easing:r=$r,axis:s="y"}={}){const i=getComputedStyle(t),o=+i.opacity,a=s==="y"?"height":"width",l=parseFloat(i[a]),u=s==="y"?["top","bottom"]:["left","right"],c=u.map(y=>`${y[0].toUpperCase()}${y.slice(1)}`),f=parseFloat(i[`padding${c[0]}`]),d=parseFloat(i[`padding${c[1]}`]),h=parseFloat(i[`margin${c[0]}`]),p=parseFloat(i[`margin${c[1]}`]),m=parseFloat(i[`border${c[0]}Width`]),g=parseFloat(i[`border${c[1]}Width`]);return{delay:e,duration:n,easing:r,css:y=>`overflow: hidden;opacity: ${Math.min(y*20,1)*o};${a}: ${y*l}px;padding-${u[0]}: ${y*f}px;padding-${u[1]}: ${y*d}px;margin-${u[0]}: ${y*h}px;margin-${u[1]}: ${y*p}px;border-${u[0]}-width: ${y*m}px;border-${u[1]}-width: ${y*g}px;`}}function Oo(t){var{fallback:e}=t,n=Po(t,["fallback"]);const r=new Map,s=new Map;function i(a,l,u){const{delay:c=0,duration:f=k=>Math.sqrt(k)*30,easing:d=$r}=An(An({},n),u),h=a.getBoundingClientRect(),p=l.getBoundingClientRect(),m=h.left-p.left,g=h.top-p.top,y=h.width/p.width,_=h.height/p.height,b=Math.sqrt(m*m+g*g),w=getComputedStyle(l),x=w.transform==="none"?"":w.transform,v=+w.opacity;return{delay:c,duration:Le(f)?f(b):f,easing:d,css:(k,C)=>`
				opacity: ${k*v};
				transform-origin: top left;
				transform: ${x} translate(${C*m}px,${C*g}px) scale(${k+(1-k)*y}, ${k+(1-k)*_});
			`}}function o(a,l,u){return(c,f)=>(a.set(f.key,c),()=>{if(l.has(f.key)){const d=l.get(f.key);return l.delete(f.key),i(d,c,f)}return a.delete(f.key),e&&e(c,f,u)})}return[o(s,r,!1),o(r,s,!0)]}function Wr(t){let e,n,r;function s(l,u){return l[1]?To:Ko}let i=s(t),o=i(t),a=!t[0]&&Vr(t);return{c(){e=K("span"),o.c(),n=I(),a&&a.c(),S(e,"class","tag svelte-1law4as"),S(e,"style",r=`--tagcolor: ${t[3].color}`)},m(l,u){T(l,e,u),o.m(e,null),P(e,n),a&&a.m(e,null)},p(l,u){i===(i=s(l))&&o?o.p(l,u):(o.d(1),o=i(l),o&&(o.c(),o.m(e,n))),l[0]?a&&(a.d(1),a=null):a?a.p(l,u):(a=Vr(l),a.c(),a.m(e,null)),u&8&&r!==(r=`--tagcolor: ${l[3].color}`)&&S(e,"style",r)},d(l){l&&O(e),o.d(),a&&a.d()}}}function Ko(t){let e,n=t[3].value+"",r,s,i;return{c(){e=K("a"),r=me(n),S(e,"href","#"),S(e,"class","svelte-1law4as")},m(o,a){T(o,e,a),P(e,r),s||(i=W(e,"click",te(t[6])),s=!0)},p(o,a){a&8&&n!==(n=o[3].value+"")&&qt(r,n)},d(o){o&&O(e),s=!1,i()}}}function To(t){let e=t[3].value+"",n;return{c(){n=me(e)},m(r,s){T(r,n,s)},p(r,s){s&8&&e!==(e=r[3].value+"")&&qt(n,e)},d(r){r&&O(n)}}}function Vr(t){let e,n,r;return{c(){e=K("a"),e.textContent=" ",S(e,"href","#"),S(e,"class","fa fa-times svelte-1law4as")},m(s,i){T(s,e,i),n||(r=W(e,"click",te(t[7])),n=!0)},p:N,d(s){s&&O(e),n=!1,r()}}}function Ao(t){let e,n=t[3]&&Wr(t);return{c(){n&&n.c(),e=Ae()},m(r,s){n&&n.m(r,s),T(r,e,s)},p(r,[s]){r[3]?n?n.p(r,s):(n=Wr(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:N,o:N,d(r){n&&n.d(r),r&&O(e)}}}function jo(t,e,n){let r,s=N,i=()=>(s(),s=bn(u,h=>n(3,r=h)),u);t.$$.on_destroy.push(()=>s());let{key:o=""}=e,{noremove:a=!1}=e,{noclick:l=!1}=e,u;const c=bs(),f=()=>c("click",u),d=()=>c("remove",u);return t.$$set=h=>{"key"in h&&n(5,o=h.key),"noremove"in h&&n(0,a=h.noremove),"noclick"in h&&n(1,l=h.noclick)},t.$$.update=()=>{t.$$.dirty&32&&Re.findByPK(o).then(h=>i(n(2,u=h)))},[a,l,u,r,c,o,f,d]}class ti extends de{constructor(e){super(),fe(this,e,jo,Ao,le,{key:5,noremove:0,noclick:1})}}function Hr(t,e,n){const r=t.slice();return r[3]=e[n],r}function zr(t,e){let n,r=e[3].msg+"",s,i,o,a,l;return{key:t,first:null,c(){n=K("article"),s=me(r),i=I(),S(n,"class",o=Pr(e[3].cssClass)+" svelte-1e5twis"),this.first=n},m(u,c){T(u,n,c),P(n,s),P(n,i),l=!0},p(u,c){e=u,(!l||c&1)&&r!==(r=e[3].msg+"")&&qt(s,r),(!l||c&1&&o!==(o=Pr(e[3].cssClass)+" svelte-1e5twis"))&&S(n,"class",o)},i(u){l||(ie(()=>{l&&(a||(a=we(n,ye,{duration:250},!0)),a.run(1))}),l=!0)},o(u){a||(a=we(n,ye,{duration:250},!1)),a.run(0),l=!1},d(u){u&&O(n),u&&a&&a.end()}}}function Do(t){let e,n=[],r=new Map,s,i=t[0];const o=a=>a[3].id;for(let a=0;a<i.length;a+=1){let l=Hr(t,i,a),u=o(l);r.set(u,n[a]=zr(u,l))}return{c(){e=K("div");for(let a=0;a<n.length;a+=1)n[a].c();S(e,"class","toastcontainer svelte-1e5twis")},m(a,l){T(a,e,l);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);s=!0},p(a,[l]){l&1&&(i=a[0],oe(),n=Bn(n,l,o,1,a,i,r,e,ws,zr,null,Hr),ae())},i(a){if(!s){for(let l=0;l<i.length;l+=1)j(n[l]);s=!0}},o(a){for(let l=0;l<n.length;l+=1)B(n[l]);s=!1},d(a){a&&O(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}let Bo=1;const ir=je([]);function Xe(t,e,n=4){ir.update(r=>(r.push({id:Bo++,msg:t,cssClass:e,timeout:n*10}),r))}function Io(t,e,n){let r;se(t,ir,o=>n(0,r=o));let s;function i(){!s&&r.length&&(s=window.setTimeout(()=>{r.forEach(o=>o.timeout--),ut(ir,r=r.filter(o=>o.timeout>0),r),s=void 0,i()},100))}return t.$$.update=()=>{t.$$.dirty&1&&r.length&&i()},[r]}class Ro extends de{constructor(e){super(),fe(this,e,Io,Do,le,{})}}const ve=je([]);try{let t=localStorage.getItem("tagfilter");t&&(t=JSON.parse(t)),t instanceof Array&&ve.set(t)}catch{console.warn("failed to load taglist from localStorage"),localStorage.removeItem("tagfilter")}ve.subscribe(t=>localStorage.setItem("tagfilter",JSON.stringify(t)));class No extends Js{lastFilter=[];_store=je([]);async afterDrop(e){this._store.update(n=>n.filter(r=>r.data.id!=e.data.id))}constructor(){super(an.todos,{idField:"id"})}async onLockUnlock(){this.filterStore(this.lastFilter)}async lockDataSet(e,n){if(e.data)throw new Error("Data is already locked :-( ");return e.data=(await Tt.synckey.encrypt(new TextEncoder().encode(JSON.stringify({description:e.description,done:e.done,tags:e.tags})),n)).toBase64(),e.description="encrypted todo",e.done=!1,e}async unlockDataSet(e,n){if(!e.data)return e;let r=JSON.parse(new TextDecoder().decode(await Tt.synckey.decrypt(gt.fromBase64(e.data),n)));return e.description=r.description,e.done=r.done,delete e.data,e}async dropTag(e){await an.todos.toCollection().modify(n=>{const r=n.tags.indexOf(e);r!==-1&&n.tags.splice(r,1)}),this._store.update(n=>(n.forEach(r=>{let s=r.data,i=s.tags.indexOf(e);i>-1&&(s.tags.splice(i,1),r.data=s)}),n))}async filterStore(e){this.lastFilter=e||[];let n=an.todos;this.lastFilter.length?(n=n.where("id").anyOf(await n.where("tags").anyOf(this.lastFilter).primaryKeys()),this.lastFilter.length>1&&(n=n.and(i=>{let o=!0;for(let a=0;a<e.length;a++)if(i.tags.indexOf(e[a])==-1){o=!1;break}return o}))):n=n.toCollection();const r=await n.primaryKeys(),s=await Promise.all(r.map(i=>this.findByPK(i)));this._store.set(s)}refreshView(){this.filterStore(this.lastFilter)}async insert(e){e.id=Date.now()*1e3+Math.floor(Math.random()*800+100);const n=await this.update(e);this._store.update(r=>(r.push(n),r))}get store(){return this._store}}const Ke=new No;ve.subscribe(t=>{Ke.filterStore(t)});function Gr(t){let e,n,r,s,i,o,a,l,u,c,f,d,h,p,m,g,y,_,b,w,x,v,k,C;return{c(){e=K("section"),n=K("label"),n.textContent="Key:",r=I(),s=K("input"),o=I(),a=K("button"),l=I(),u=K("label"),u.textContent="Value:",c=I(),f=K("input"),h=I(),p=K("label"),p.textContent="Color:",m=I(),g=K("input"),y=I(),_=K("button"),_.textContent="close",b=I(),w=K("button"),w.textContent="save",S(n,"for","tagedit_key_input"),S(s,"id","tagedit_key_input"),S(s,"type","text"),s.value=i=t[0].data.key,s.disabled=!0,S(a,"class","fa fa-trash-can"),S(a,"title","delete"),S(u,"for","tagedit_value_input"),S(f,"id","tagedit_value_input"),S(f,"type","text"),f.value=d=t[0].data.value,f.disabled=!0,S(f,"class","svelte-1hd6fid"),S(p,"for","tagedit_value_input"),S(g,"id","tagedit_value_input"),S(g,"type","color"),S(g,"class","svelte-1hd6fid"),S(_,"id","tagedit_close_btn"),S(w,"id","tagedit_save_btn"),S(w,"class","svelte-1hd6fid"),S(e,"class","svelte-1hd6fid")},m(E,R){T(E,e,R),P(e,n),P(e,r),P(e,s),P(e,o),P(e,a),P(e,l),P(e,u),P(e,c),P(e,f),P(e,h),P(e,p),P(e,m),P(e,g),Ne(g,t[0].data.color),P(e,y),P(e,_),P(e,b),P(e,w),v=!0,k||(C=[W(a,"click",te(t[3])),W(g,"input",t[4]),W(_,"click",te(t[5])),W(w,"click",te(t[2]))],k=!0)},p(E,R){(!v||R&1&&i!==(i=E[0].data.key)&&s.value!==i)&&(s.value=i),(!v||R&1&&d!==(d=E[0].data.value)&&f.value!==d)&&(f.value=d),R&1&&Ne(g,E[0].data.color)},i(E){v||(ie(()=>{v&&(x||(x=we(e,ye,{},!0)),x.run(1))}),v=!0)},o(E){x||(x=we(e,ye,{},!1)),x.run(0),v=!1},d(E){E&&O(e),E&&x&&x.end(),k=!1,ce(C)}}}function Mo(t){let e,n,r=t[0]&&Gr(t);return{c(){r&&r.c(),e=Ae()},m(s,i){r&&r.m(s,i),T(s,e,i),n=!0},p(s,[i]){s[0]?r?(r.p(s,i),i&1&&j(r,1)):(r=Gr(s),r.c(),j(r,1),r.m(e.parentNode,e)):r&&(oe(),B(r,1,1,()=>{r=null}),ae())},i(s){n||(j(r),n=!0)},o(s){B(r),n=!1},d(s){r&&r.d(s),s&&O(e)}}}let Ie=je();function Fo(t,e,n){let r,s=N;se(t,Ie,c=>n(0,r=c)),t.$$.on_destroy.push(()=>s());const i=async()=>{r&&confirm("deleting the tag here, will remove it from all Todos too. This step can not be undone! Continue?")&&(await Ke.dropTag(r.data.key),await Re.drop(r),ve.update(c=>c.filter(f=>f!=r.data.key)),ut(Ie,r=void 0,r),Xe("tag removed","info",2))},o=async()=>{r.refresh(),ut(Ie,r=void 0,r),Xe("changes saved","success",2)},a=()=>i();function l(){r.data.color=this.value,Ie.set(r)}return[r,i,o,a,l,()=>ut(Ie,r=void 0,r)]}class qo extends de{constructor(e){super(),fe(this,e,Fo,Mo,le,{})}}function Yr(t){let e,n,r,s,i,o,a,l;return{c(){e=K("form"),n=K("input"),r=I(),s=K("button"),S(n,"type","text"),S(n,"list","available_tags"),S(n,"autocomplete",""),S(s,"type","submit"),S(s,"class","fa fa-plus-circle svelte-b6n156"),S(e,"class","taginput svelte-b6n156"),_e(e,"open",t[1])},m(u,c){T(u,e,c),P(e,n),Ne(n,t[0]),P(e,r),P(e,s),o=!0,a||(l=[W(n,"input",t[4]),W(e,"submit",te(t[2]))],a=!0)},p(u,c){c&1&&n.value!==u[0]&&Ne(n,u[0]),(!o||c&2)&&_e(e,"open",u[1])},i(u){o||(ie(()=>{o&&(i||(i=we(e,ye,{},!0)),i.run(1))}),o=!0)},o(u){i||(i=we(e,ye,{},!1)),i.run(0),o=!1},d(u){u&&O(e),u&&i&&i.end(),a=!1,ce(l)}}}function Lo(t){let e,n,r=t[1]&&Yr(t);return{c(){r&&r.c(),e=Ae()},m(s,i){r&&r.m(s,i),T(s,e,i),n=!0},p(s,[i]){s[1]?r?(r.p(s,i),i&2&&j(r,1)):(r=Yr(s),r.c(),j(r,1),r.m(e.parentNode,e)):r&&(oe(),B(r,1,1,()=>{r=null}),ae())},i(s){n||(j(r),n=!0)},o(s){B(r),n=!1},d(s){r&&r.d(s),s&&O(e)}}}function Uo(t,e,n){const r=bs();let{visible:s=!0}=e,{value:i=""}=e,{noautocreate:o=!1}=e;const a=async()=>{let u;try{u=await Re.definePKByValue(i)}catch{Xe("can't submit an empty Tag","alert",2);return}let c=await Re.findByPK(u);if(!c){if(o){Xe("tag is unknown","alert",2);return}const f={key:u,value:i,color:"#73828c"};c=await Re.update(f)}r("submit",c),n(0,i="")};function l(){i=this.value,n(0,i)}return t.$$set=u=>{"visible"in u&&n(1,s=u.visible),"value"in u&&n(0,i=u.value),"noautocreate"in u&&n(3,o=u.noautocreate)},[i,s,a,o,l]}class ni extends de{constructor(e){super(),fe(this,e,Uo,Lo,le,{visible:1,value:0,noautocreate:3})}}function Qr(t,e,n){const r=t.slice();return r[9]=e[n],r}function Jr(t){let e,n,r,s,i,o,a,l,u;e=new ni({}),e.$on("submit",t[4]),r=new qo({});const c=[Vo,Wo],f=[];function d(h,p){return h[0].length?0:1}return o=d(t),a=f[o]=c[o](t),{c(){ee(e.$$.fragment),n=I(),ee(r.$$.fragment),s=I(),i=K("section"),a.c(),S(i,"class","taglist svelte-n6f67g"),_e(i,"open",t[1])},m(h,p){Q(e,h,p),T(h,n,p),Q(r,h,p),T(h,s,p),T(h,i,p),f[o].m(i,null),u=!0},p(h,p){let m=o;o=d(h),o===m?f[o].p(h,p):(oe(),B(f[m],1,1,()=>{f[m]=null}),ae(),a=f[o],a?a.p(h,p):(a=f[o]=c[o](h),a.c()),j(a,1),a.m(i,null)),(!u||p&2)&&_e(i,"open",h[1])},i(h){u||(j(e.$$.fragment,h),j(r.$$.fragment,h),j(a),ie(()=>{u&&(l||(l=we(i,ye,{},!0)),l.run(1))}),u=!0)},o(h){B(e.$$.fragment,h),B(r.$$.fragment,h),B(a),l||(l=we(i,ye,{},!1)),l.run(0),u=!1},d(h){J(e,h),h&&O(n),J(r,h),h&&O(s),h&&O(i),f[o].d(),h&&l&&l.end()}}}function Wo(t){let e;return{c(){e=me("No Tags yet")},m(n,r){T(n,e,r)},p:N,i:N,o:N,d(n){n&&O(e)}}}function Vo(t){let e,n,r=t[0],s=[];for(let o=0;o<r.length;o+=1)s[o]=Xr(Qr(t,r,o));const i=o=>B(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ae()},m(o,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(o,a);T(o,e,a),n=!0},p(o,a){if(a&13){r=o[0];let l;for(l=0;l<r.length;l+=1){const u=Qr(o,r,l);s[l]?(s[l].p(u,a),j(s[l],1)):(s[l]=Xr(u),s[l].c(),j(s[l],1),s[l].m(e.parentNode,e))}for(oe(),l=r.length;l<s.length;l+=1)i(l);ae()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)j(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)B(s[a]);n=!1},d(o){ar(s,o),o&&O(e)}}}function Xr(t){let e,n;return e=new ti({props:{key:t[9]}}),e.$on("remove",t[3]),e.$on("click",t[8]),{c(){ee(e.$$.fragment)},m(r,s){Q(e,r,s),n=!0},p(r,s){const i={};s&1&&(i.key=r[9]),e.$set(i)},i(r){n||(j(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function Ho(t){let e,n,r,s,i,o,a=t[1]&&Jr(t);return{c(){e=K("a"),e.textContent="Tags",n=I(),a&&a.c(),r=Ae(),S(e,"role","button"),S(e,"href","#"),S(e,"class","svelte-n6f67g")},m(l,u){T(l,e,u),T(l,n,u),a&&a.m(l,u),T(l,r,u),s=!0,i||(o=W(e,"click",te(t[7])),i=!0)},p(l,[u]){l[1]?a?(a.p(l,u),u&2&&j(a,1)):(a=Jr(l),a.c(),j(a,1),a.m(r.parentNode,r)):a&&(oe(),B(a,1,1,()=>{a=null}),ae())},i(l){s||(j(a),s=!0)},o(l){B(a),s=!1},d(l){l&&O(e),l&&O(n),a&&a.d(l),l&&O(r),i=!1,o()}}}function zo(t,e,n){let r,s,i,o,a;se(t,ve,d=>n(0,s=d)),se(t,Se,d=>n(5,i=d)),se(t,Kt,d=>n(6,o=d)),se(t,Ie,d=>n(2,a=d));function l(d){const h=d?.detail?.data?.key,p=s.indexOf(h);p>-1&&(s.splice(p,1),ve.set(s))}function u(d){const h=d?.detail?.data?.key;h&&s.indexOf(h)==-1?(s.push(h),ve.set(s)):console.error("missing key",d,h)}const c=()=>n(1,r=!r),f=d=>{Ie.set(Ie&&a==d.detail?void 0:d.detail)};return t.$$.update=()=>{t.$$.dirty&97&&n(1,r=o&&!i?!1:s.length>0)},[s,r,a,l,u,i,o,c,f]}class Go extends de{constructor(e){super(),fe(this,e,zo,Ho,le,{})}}function Yo(t){let e,n,r,s,i,o,a;return{c(){e=K("div"),n=K("form"),r=K("input"),s=I(),i=K("button"),S(r,"tabindex","0"),S(r,"type","text"),S(i,"type","submit"),S(i,"class","fa fa-circle-plus svelte-1telry2"),S(n,"class","svelte-1telry2")},m(l,u){T(l,e,u),P(e,n),P(n,r),Ne(r,t[0].description),P(n,s),P(n,i),o||(a=[W(r,"input",t[3]),W(n,"submit",te(t[1]))],o=!0)},p(l,[u]){u&1&&r.value!==l[0].description&&Ne(r,l[0].description)},i:N,o:N,d(l){l&&O(e),o=!1,ce(a)}}}function Qo(t,e,n){let r;se(t,ve,a=>n(2,r=a));let s={description:"",done:!1,tags:r};const i=async()=>{n(0,s.description=s.description.trim(),s)==""?Xe("noting to add","alert",2):(await Ke.insert(s),n(0,s.description="",s),s.tags.splice(0))};function o(){s.description=this.value,n(0,s),n(2,r)}return t.$$.update=()=>{t.$$.dirty&4&&n(0,s.tags=[...r],s)},[s,i,r,o]}class Jo extends de{constructor(e){super(),fe(this,e,Qo,Yo,le,{})}}function ri(t,{from:e,to:n},r={}){const s=getComputedStyle(t),i=s.transform==="none"?"":s.transform,[o,a]=s.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*o/n.width-(n.left+o),u=e.top+e.height*a/n.height-(n.top+a),{delay:c=0,duration:f=h=>Math.sqrt(h)*120,easing:d=$r}=r;return{delay:c,duration:Le(f)?f(Math.sqrt(l*l+u*u)):f,easing:d,css:(h,p)=>{const m=p*l,g=p*u,y=h+p*e.width/n.width,_=h+p*e.height/n.height;return`transform: ${i} translate(${m}px, ${g}px) scale(${y}, ${_});`}}}function Zr(t,e,n){const r=t.slice();return r[13]=e[n],r}function es(t){let e,n,r,s;return n=new ti({props:{key:t[13],noremove:t[2].done}}),n.$on("click",t[10]),n.$on("remove",t[5]),{c(){e=K("li"),ee(n.$$.fragment),r=I(),S(e,"class","svelte-nckg0g")},m(i,o){T(i,e,o),Q(n,e,null),P(e,r),s=!0},p(i,o){const a={};o&4&&(a.key=i[13]),o&4&&(a.noremove=i[2].done),n.$set(a)},i(i){s||(j(n.$$.fragment,i),s=!0)},o(i){B(n.$$.fragment,i),s=!1},d(i){i&&O(e),J(n)}}}function ts(t){let e,n,r,s,i,o,a=t[1]&&ns(t);return{c(){e=K("button"),n=I(),a&&a.c(),r=Ae(),S(e,"class","fa fa-tag"),S(e,"title","new Tag")},m(l,u){T(l,e,u),T(l,n,u),a&&a.m(l,u),T(l,r,u),s=!0,i||(o=W(e,"click",te(t[11])),i=!0)},p(l,u){l[1]?a?(a.p(l,u),u&2&&j(a,1)):(a=ns(l),a.c(),j(a,1),a.m(r.parentNode,r)):a&&(oe(),B(a,1,1,()=>{a=null}),ae())},i(l){s||(j(a),s=!0)},o(l){B(a),s=!1},d(l){l&&O(e),l&&O(n),a&&a.d(l),l&&O(r),i=!1,o()}}}function ns(t){let e,n,r;return n=new ni({}),n.$on("submit",t[6]),{c(){e=K("div"),ee(n.$$.fragment),S(e,"class","taginput svelte-nckg0g")},m(s,i){T(s,e,i),Q(n,e,null),r=!0},p:N,i(s){r||(j(n.$$.fragment,s),r=!0)},o(s){B(n.$$.fragment,s),r=!1},d(s){s&&O(e),J(n)}}}function Xo(t){let e,n,r,s,i,o=t[2].description+"",a,l,u,c,f,d,h,p,m,g=t[2].tags,y=[];for(let w=0;w<g.length;w+=1)y[w]=es(Zr(t,g,w));const _=w=>B(y[w],1,1,()=>{y[w]=null});let b=!t[2].done&&ts(t);return{c(){e=K("article"),n=K("span"),r=K("input"),s=I(),i=K("span"),a=me(o),l=I(),u=K("button"),c=I(),f=K("ul");for(let w=0;w<y.length;w+=1)y[w].c();d=I(),b&&b.c(),S(r,"type","checkbox"),S(i,"class","txt svelte-nckg0g"),S(u,"class","fa fa-trash-can"),S(u,"title","delete"),S(f,"class","svelte-nckg0g"),S(e,"class","svelte-nckg0g"),_e(e,"done",t[2].done)},m(w,x){T(w,e,x),P(e,n),P(n,r),r.checked=t[2].done,P(e,s),P(e,i),P(i,a),P(e,l),P(e,u),P(e,c),P(e,f);for(let v=0;v<y.length;v+=1)y[v]&&y[v].m(f,null);P(e,d),b&&b.m(e,null),h=!0,p||(m=[W(r,"change",t[7]),W(r,"change",t[8]),W(u,"click",te(t[9]))],p=!0)},p(w,[x]){if(x&4&&(r.checked=w[2].done),(!h||x&4)&&o!==(o=w[2].description+"")&&qt(a,o),x&52){g=w[2].tags;let v;for(v=0;v<g.length;v+=1){const k=Zr(w,g,v);y[v]?(y[v].p(k,x),j(y[v],1)):(y[v]=es(k),y[v].c(),j(y[v],1),y[v].m(f,null))}for(oe(),v=g.length;v<y.length;v+=1)_(v);ae()}w[2].done?b&&(oe(),B(b,1,1,()=>{b=null}),ae()):b?(b.p(w,x),x&4&&j(b,1)):(b=ts(w),b.c(),j(b,1),b.m(e,null)),(!h||x&4)&&_e(e,"done",w[2].done)},i(w){if(!h){for(let x=0;x<g.length;x+=1)j(y[x]);j(b),h=!0}},o(w){y=y.filter(Boolean);for(let x=0;x<y.length;x+=1)B(y[x]);B(b),h=!1},d(w){w&&O(e),ar(y,w),b&&b.d(),p=!1,ce(m)}}}function Zo(t,e,n){let r,s=N,i=()=>(s(),s=bn(a,_=>n(2,r=_)),a),o;se(t,ve,_=>n(12,o=_)),t.$$.on_destroy.push(()=>s());let{todo:a}=e;i();let l=!1;const u=()=>{confirm("remove todo permanently ?")&&Ke.drop(a)},c=async _=>{const b=_.data.key;o.indexOf(b)==-1&&(o.push(b),ve.set(o))},f=async _=>{r.tags.indexOf(_.detail.data.key)!=-1&&confirm("remove Tag?")&&(ut(a,r.tags=r.tags.filter(b=>b&&b!=_.detail.data.key),r),await a.set(r),Ke.refreshView())},d=async _=>{r.tags.indexOf(_.detail.data.key)==-1&&(r.tags.push(_.detail.data.key),ut(a,r.tags=r.tags.filter(b=>b),r),a.set(r)),n(1,l=!1)};function h(){r.done=this.checked,a.set(r)}const p=()=>Ke.refreshView(),m=()=>u(),g=_=>c(_.detail),y=()=>n(1,l=!l);return t.$$set=_=>{"todo"in _&&i(n(0,a=_.todo))},[a,l,r,u,c,f,d,h,p,m,g,y]}class si extends de{constructor(e){super(),fe(this,e,Zo,Xo,le,{todo:0})}}function rs(t,e,n){const r=t.slice();return r[6]=e[n],r}function ss(t,e,n){const r=t.slice();return r[6]=e[n],r}function is(t,e){let n,r,s,i,o,a=N,l;return r=new si({props:{todo:e[6]}}),{key:t,first:null,c(){n=K("div"),ee(r.$$.fragment),this.first=n},m(u,c){T(u,n,c),Q(r,n,null),l=!0},p(u,c){e=u;const f={};c&2&&(f.todo=e[6]),r.$set(f)},r(){o=n.getBoundingClientRect()},f(){_s(n),a(),lr(n,o)},a(){a(),a=gs(n,o,ri,{duration:ii})},i(u){l||(j(r.$$.fragment,u),u&&ie(()=>{l&&(i&&i.end(1),s=dr(n,e[4],{key:e[6].data.id}),s.start())}),l=!0)},o(u){B(r.$$.fragment,u),s&&s.invalidate(),u&&(i=hr(n,e[3],{key:e[6].data.id})),l=!1},d(u){u&&O(n),J(r),u&&i&&i.end()}}}function os(t,e){let n,r,s,i,o,a,l=N,u;return r=new si({props:{todo:e[6]}}),{key:t,first:null,c(){n=K("div"),ee(r.$$.fragment),s=I(),this.first=n},m(c,f){T(c,n,f),Q(r,n,null),P(n,s),u=!0},p(c,f){e=c;const d={};f&1&&(d.todo=e[6]),r.$set(d)},r(){a=n.getBoundingClientRect()},f(){_s(n),l(),lr(n,a)},a(){l(),l=gs(n,a,ri,{duration:ii})},i(c){u||(j(r.$$.fragment,c),c&&ie(()=>{u&&(o&&o.end(1),i=dr(n,e[4],{key:e[6].data.id}),i.start())}),u=!0)},o(c){B(r.$$.fragment,c),i&&i.invalidate(),c&&(o=hr(n,e[3],{key:e[6].data.id})),u=!1},d(c){c&&O(n),J(r),c&&o&&o.end()}}}function ea(t){let e=[],n=new Map,r,s,i,o=[],a=new Map,l,u,c=t[1];const f=p=>p[6].data.id;for(let p=0;p<c.length;p+=1){let m=ss(t,c,p),g=f(m);n.set(g,e[p]=is(g,m))}let d=t[0];const h=p=>p[6].data.id;for(let p=0;p<d.length;p+=1){let m=rs(t,d,p),g=h(m);a.set(g,o[p]=os(g,m))}return{c(){for(let p=0;p<e.length;p+=1)e[p].c();r=I(),s=K("h3"),s.textContent="Done:",i=I();for(let p=0;p<o.length;p+=1)o[p].c();l=Ae()},m(p,m){for(let g=0;g<e.length;g+=1)e[g]&&e[g].m(p,m);T(p,r,m),T(p,s,m),T(p,i,m);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(p,m);T(p,l,m),u=!0},p(p,[m]){if(m&2){c=p[1],oe();for(let g=0;g<e.length;g+=1)e[g].r();e=Bn(e,m,f,1,p,c,n,r.parentNode,Kr,is,r,ss);for(let g=0;g<e.length;g+=1)e[g].a();ae()}if(m&1){d=p[0],oe();for(let g=0;g<o.length;g+=1)o[g].r();o=Bn(o,m,h,1,p,d,a,l.parentNode,Kr,os,l,rs);for(let g=0;g<o.length;g+=1)o[g].a();ae()}},i(p){if(!u){for(let m=0;m<c.length;m+=1)j(e[m]);for(let m=0;m<d.length;m+=1)j(o[m]);u=!0}},o(p){for(let m=0;m<e.length;m+=1)B(e[m]);for(let m=0;m<o.length;m+=1)B(o[m]);u=!1},d(p){for(let m=0;m<e.length;m+=1)e[m].d(p);p&&O(r),p&&O(s),p&&O(i);for(let m=0;m<o.length;m+=1)o[m].d(p);p&&O(l)}}}const ii=250;function ta(t,e,n){let r,s,i,o,a=N,l=()=>(a(),a=bn(r,f=>n(5,o=f)),r);t.$$.on_destroy.push(()=>a());const[u,c]=Oo({fallback:ye});return t.$$.update=()=>{t.$$.dirty&32&&n(1,s=o.filter(f=>!f.data.done)),t.$$.dirty&32&&n(0,i=o.filter(f=>f.data.done))},l(n(2,r=Ke.store)),[i,s,r,u,c,o]}class na extends de{constructor(e){super(),fe(this,e,ta,ea,le,{})}}function as(t){let e,n,r,s,i,o,a;return{c(){e=K("article"),n=me(`App has been updated. Please reopen the app or 
    `),r=K("a"),r.textContent="reload",S(r,"href","#"),S(e,"class","ViteUpdatePrompt svelte-lnojhr")},m(l,u){T(l,e,u),P(e,n),P(e,r),i=!0,o||(a=W(r,"click",te(function(){Le(t[0])&&t[0].apply(this,arguments)})),o=!0)},p(l,u){t=l},i(l){i||(ie(()=>{i&&(s||(s=we(e,ye,{},!0)),s.run(1))}),i=!0)},o(l){s||(s=we(e,ye,{},!1)),s.run(0),i=!1},d(l){l&&O(e),l&&s&&s.end(),o=!1,a()}}}function ra(t){let e,n,r=t[0]&&as(t);return{c(){r&&r.c(),e=Ae()},m(s,i){r&&r.m(s,i),T(s,e,i),n=!0},p(s,[i]){s[0]?r?(r.p(s,i),i&1&&j(r,1)):(r=as(s),r.c(),j(r,1),r.m(e.parentNode,e)):r&&(oe(),B(r,1,1,()=>{r=null}),ae())},i(s){n||(j(r),n=!0)},o(s){B(r),n=!1},d(s){r&&r.d(s),s&&O(e)}}}const oi=je();function sa(t,e,n){let r,s=N;return se(t,oi,i=>n(0,r=i)),t.$$.on_destroy.push(()=>s()),[r]}class ia extends de{constructor(e){super(),fe(this,e,sa,ra,le,{})}}function oa(t){let e,n,r,s,i,o,a;const l=t[5].default,u=li(l,t,t[4],null);return{c(){e=K("div"),n=K("div"),r=I(),s=K("div"),u&&u.c(),S(n,"class","modalBackdrop "+t[1]+" svelte-ce4pm9"),S(s,"class","modalContent Modal "+t[0]+" svelte-ce4pm9"),S(e,"class","modalContainer svelte-ce4pm9")},m(c,f){T(c,e,f),P(e,n),P(e,r),P(e,s),u&&u.m(s,null),t[6](e),a=!0},p(c,[f]){u&&u.p&&(!a||f&16)&&ci(u,l,c,c[4],a?ui(l,c[4],f,null):fi(c[4]),null)},i(c){a||(j(u,c),ie(()=>{a&&(o&&o.end(1),i=dr(e,Ur,{}),i.start())}),a=!0)},o(c){B(u,c),i&&i.invalidate(),o=hr(e,Ur,{}),a=!1},d(c){c&&O(e),u&&u.d(c),t[6](null),c&&o&&o.end()}}}function aa(t,e,n){let{$$slots:r={},$$scope:s}=e;const i="",o="";let{open:a=!0}=e,l;_i(()=>{document.body.appendChild(l),n(3,a=!0)}),bi(()=>{document.body.removeChild(l),n(3,a=!1)});function u(c){jn[c?"unshift":"push"](()=>{l=c,n(2,l)})}return t.$$set=c=>{"open"in c&&n(3,a=c.open),"$$scope"in c&&n(4,s=c.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&(a?document.body.style.overflow="hidden":document.body.style.overflow="")},[i,o,l,a,s,r,u]}class la extends de{constructor(e){super(),fe(this,e,aa,oa,le,{contentClass:0,backdropClass:1,open:3})}get contentClass(){return this.$$.ctx[0]}get backdropClass(){return this.$$.ctx[1]}}function ls(t){let e,n,r;return{c(){e=K("a"),e.innerHTML='<li class="fa fa-shield-halved"></li>',S(e,"role","button"),S(e,"href","#"),S(e,"class","unlockbtn svelte-oug3cm")},m(s,i){T(s,e,i),n||(r=W(e,"click",te(t[7])),n=!0)},p:N,d(s){s&&O(e),n=!1,r()}}}function us(t){let e,n;return e=new la({props:{$$slots:{default:[ua]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(r,s){Q(e,r,s),n=!0},p(r,s){const i={};s&2062&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||(j(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){J(e,r)}}}function ua(t){let e,n,r,s,i,o,a,l,u,c,f,d,h;return{c(){e=K("article"),n=K("form"),r=K("h6"),s=me(t[2]),i=me(":"),o=I(),a=K("a"),a.innerHTML='<li class="fa fa-times"></li>',l=I(),u=K("input"),c=I(),f=K("button"),f.textContent="OK",S(a,"href","#"),S(a,"class","closebtn svelte-oug3cm"),S(u,"type","password"),S(u,"class","svelte-oug3cm"),S(f,"type","submit"),S(n,"class","svelte-oug3cm")},m(p,m){T(p,e,m),P(e,n),P(n,r),P(r,s),P(r,i),P(n,o),P(n,a),P(n,l),P(n,u),Ne(u,t[3]),P(n,c),P(n,f),d||(h=[W(a,"click",te(t[8])),W(u,"input",t[9]),W(n,"submit",te(t[6]))],d=!0)},p(p,m){m&4&&qt(s,p[2]),m&8&&u.value!==p[3]&&Ne(u,p[3])},d(p){p&&O(e),d=!1,ce(h)}}}function ca(t){let e,n,r,s,i,o,a,l,u=t[0]&&t[4]&&ls(t),c=t[1]&&us(t);return{c(){e=K("a"),n=K("li"),r=I(),u&&u.c(),s=I(),c&&c.c(),i=Ae(),S(n,"class","fa"),_e(n,"fa-lock",!t[0]),_e(n,"fa-lock-open",t[0]),S(e,"role","button"),S(e,"href","#"),S(e,"class","unlockbtn svelte-oug3cm")},m(f,d){T(f,e,d),P(e,n),T(f,r,d),u&&u.m(f,d),T(f,s,d),c&&c.m(f,d),T(f,i,d),o=!0,a||(l=W(e,"click",te(t[5])),a=!0)},p(f,[d]){(!o||d&1)&&_e(n,"fa-lock",!f[0]),(!o||d&1)&&_e(n,"fa-lock-open",f[0]),f[0]&&f[4]?u?u.p(f,d):(u=ls(f),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null),f[1]?c?(c.p(f,d),d&2&&j(c,1)):(c=us(f),c.c(),j(c,1),c.m(i.parentNode,i)):c&&(oe(),B(c,1,1,()=>{c=null}),ae())},i(f){o||(j(c),o=!0)},o(f){B(c),o=!1},d(f){f&&O(e),f&&O(r),u&&u.d(f),f&&O(s),c&&c.d(f),f&&O(i),a=!1,l()}}}function fa(t,e,n){let r,s;se(t,Se,p=>n(10,r=p)),se(t,Kt,p=>n(4,s=p));let i=localStorage.getItem("haslock")==null,o=!1,a="",l="";const u=()=>{i?s?(Se.set(void 0),n(0,i=!1)):(n(2,a="Set a password"),n(1,o=!0)):(n(2,a="Enter your password"),n(1,o=!0))},c=async()=>{if(l.trim().length!=l.length)Xe("password can't contain whitespaces at the start or end","error",4);else if(!l.length)Xe("password is empty","info",2),n(0,i=!1),Se.set(void 0),n(1,o=!1),n(3,l="");else{const p=await xn(l);s?(n(0,i=!0),Se.set(p),n(3,l="")):(await Re.encryptAll(p,r),await Ke.encryptAll(p,r),Kt.set(!0),localStorage.setItem("haslock","1"),Se.set(void 0),n(0,i=!1),n(3,l="")),n(1,o=!1)}},f=async()=>{r&&confirm("this will remove the password protectedion from your todos. Continue?")&&(await Re.encryptAll(void 0,r),await Ke.encryptAll(void 0,r),localStorage.removeItem("haslock"),Kt.set(!1),Se.set(void 0),n(0,i=!0),n(3,l=""))},d=()=>n(1,o=!1);function h(){l=this.value,n(3,l)}return[i,o,a,l,s,u,c,f,d,h]}class da extends de{constructor(e){super(),fe(this,e,fa,ca,le,{})}}function ha(t){let e,n,r,s,i,o,a,l,u,c;return e=new Go({}),i=new Jo({}),a=new na({}),u=new Co({}),{c(){ee(e.$$.fragment),n=I(),r=K("h1"),r.textContent="Todos",s=I(),ee(i.$$.fragment),o=I(),ee(a.$$.fragment),l=I(),ee(u.$$.fragment),S(r,"class","text-center")},m(f,d){Q(e,f,d),T(f,n,d),T(f,r,d),T(f,s,d),Q(i,f,d),T(f,o,d),Q(a,f,d),T(f,l,d),Q(u,f,d),c=!0},i(f){c||(j(e.$$.fragment,f),j(i.$$.fragment,f),j(a.$$.fragment,f),j(u.$$.fragment,f),c=!0)},o(f){B(e.$$.fragment,f),B(i.$$.fragment,f),B(a.$$.fragment,f),B(u.$$.fragment,f),c=!1},d(f){J(e,f),f&&O(n),f&&O(r),f&&O(s),J(i,f),f&&O(o),J(a,f),f&&O(l),J(u,f)}}}function pa(t){let e;return{c(){e=me("please enter your password first")},m(n,r){T(n,e,r)},i:N,o:N,d(n){n&&O(e)}}}function ma(t){let e,n,r,s,i,o,a,l,u,c,f,d,h;i=new da({});const p=[pa,ha],m=[];function g(y,_){return y[0]&&!y[1]?0:1}return a=g(t),l=m[a]=p[a](t),c=new Ro({}),d=new ia({}),{c(){e=K("base"),n=I(),r=K("nav"),r.innerHTML=`<ul><li><strong>HelloWorld Todo&#39;s</strong></li></ul> 
    <ul><li><a href="https://github.com/Rocco-Gossmann/SvelteHelloWorldTodos" target="_blank">GitHub</a></li></ul>`,s=I(),ee(i.$$.fragment),o=I(),l.c(),u=I(),ee(c.$$.fragment),f=I(),ee(d.$$.fragment),S(e,"href","/SvelteHelloWorldTodos")},m(y,_){P(document.head,e),T(y,n,_),T(y,r,_),T(y,s,_),Q(i,y,_),T(y,o,_),m[a].m(y,_),T(y,u,_),Q(c,y,_),T(y,f,_),Q(d,y,_),h=!0},p(y,[_]){let b=a;a=g(y),a!==b&&(oe(),B(m[b],1,1,()=>{m[b]=null}),ae(),l=m[a],l||(l=m[a]=p[a](y),l.c()),j(l,1),l.m(u.parentNode,u))},i(y){h||(j(i.$$.fragment,y),j(l),j(c.$$.fragment,y),j(d.$$.fragment,y),h=!0)},o(y){B(i.$$.fragment,y),B(l),B(c.$$.fragment,y),B(d.$$.fragment,y),h=!1},d(y){O(e),y&&O(n),y&&O(r),y&&O(s),J(i,y),y&&O(o),m[a].d(y),y&&O(u),J(c,y),y&&O(f),J(d,y)}}}function ya(t,e,n){let r,s;return se(t,Kt,i=>n(0,r=i)),se(t,Se,i=>n(1,s=i)),[r,s]}class ga extends de{constructor(e){super(),fe(this,e,ya,ma,le,{})}}const _a="modulepreload",ba=function(t){return"/SvelteHelloWorldTodos/"+t},cs={},va=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=ba(i),i in cs)return;cs[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=s.length-1;c>=0;c--){const f=s[c];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":_a,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};function wa(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l,u;const c=async(d=!0)=>{await l,await u?.()};async function f(){if("serviceWorker"in navigator){const{Workbox:d}=await va(()=>import("./workbox-window.prod.es5-08b2315b.js"),[]);a=new d("/SvelteHelloWorldTodos/sw.js",{scope:"/SvelteHelloWorldTodos/",type:"classic"}),u=async()=>{await a?.messageSkipWaiting()};{let h=!1;const p=()=>{h=!0,a?.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n?.()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!h&&r?.():m.isExternal?window.location.reload():!h&&r?.():m.isUpdate||r?.()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(h=>{i?i("/SvelteHelloWorldTodos/sw.js",h):s?.(h)}).catch(h=>{o?.(h)})}}return l=f(),c}new ga({target:document.getElementById("app")});const ka=wa({onNeedRefresh(){oi.set(ka)}});
